/*!
 * jQuery JavaScript Library v1.4.2
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Sat Feb 13 22:33:48 2010 -0500
 */
(function(A,w){function ma(){if(!c.isReady){try{s.documentElement.doScroll("left")}catch(a){setTimeout(ma,1);return}c.ready()}}function Qa(a,b){b.src?c.ajax({url:b.src,async:false,dataType:"script"}):c.globalEval(b.text||b.textContent||b.innerHTML||"");b.parentNode&&b.parentNode.removeChild(b)}function X(a,b,d,f,e,j){var i=a.length;if(typeof b==="object"){for(var o in b)X(a,o,b[o],f,e,d);return a}if(d!==w){f=!j&&f&&c.isFunction(d);for(o=0;o<i;o++)e(a[o],b,f?d.call(a[o],o,e(a[o],b)):d,j);return a}return i?
e(a[0],b):w}function J(){return(new Date).getTime()}function Y(){return false}function Z(){return true}function na(a,b,d){d[0].type=a;return c.event.handle.apply(b,d)}function oa(a){var b,d=[],f=[],e=arguments,j,i,o,k,n,r;i=c.data(this,"events");if(!(a.liveFired===this||!i||!i.live||a.button&&a.type==="click")){a.liveFired=this;var u=i.live.slice(0);for(k=0;k<u.length;k++){i=u[k];i.origType.replace(O,"")===a.type?f.push(i.selector):u.splice(k--,1)}j=c(a.target).closest(f,a.currentTarget);n=0;for(r=
j.length;n<r;n++)for(k=0;k<u.length;k++){i=u[k];if(j[n].selector===i.selector){o=j[n].elem;f=null;if(i.preType==="mouseenter"||i.preType==="mouseleave")f=c(a.relatedTarget).closest(i.selector)[0];if(!f||f!==o)d.push({elem:o,handleObj:i})}}n=0;for(r=d.length;n<r;n++){j=d[n];a.currentTarget=j.elem;a.data=j.handleObj.data;a.handleObj=j.handleObj;if(j.handleObj.origHandler.apply(j.elem,e)===false){b=false;break}}return b}}function pa(a,b){return"live."+(a&&a!=="*"?a+".":"")+b.replace(/\./g,"`").replace(/ /g,
"&")}function qa(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function ra(a,b){var d=0;b.each(function(){if(this.nodeName===(a[d]&&a[d].nodeName)){var f=c.data(a[d++]),e=c.data(this,f);if(f=f&&f.events){delete e.handle;e.events={};for(var j in f)for(var i in f[j])c.event.add(this,j,f[j][i],f[j][i].data)}}})}function sa(a,b,d){var f,e,j;b=b&&b[0]?b[0].ownerDocument||b[0]:s;if(a.length===1&&typeof a[0]==="string"&&a[0].length<512&&b===s&&!ta.test(a[0])&&(c.support.checkClone||!ua.test(a[0]))){e=
true;if(j=c.fragments[a[0]])if(j!==1)f=j}if(!f){f=b.createDocumentFragment();c.clean(a,b,f,d)}if(e)c.fragments[a[0]]=j?f:1;return{fragment:f,cacheable:e}}function K(a,b){var d={};c.each(va.concat.apply([],va.slice(0,b)),function(){d[this]=a});return d}function wa(a){return"scrollTo"in a&&a.document?a:a.nodeType===9?a.defaultView||a.parentWindow:false}var c=function(a,b){return new c.fn.init(a,b)},Ra=A.jQuery,Sa=A.$,s=A.document,T,Ta=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,Ua=/^.[^:#\[\.,]*$/,Va=/\S/,
Wa=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,Xa=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,P=navigator.userAgent,xa=false,Q=[],L,$=Object.prototype.toString,aa=Object.prototype.hasOwnProperty,ba=Array.prototype.push,R=Array.prototype.slice,ya=Array.prototype.indexOf;c.fn=c.prototype={init:function(a,b){var d,f;if(!a)return this;if(a.nodeType){this.context=this[0]=a;this.length=1;return this}if(a==="body"&&!b){this.context=s;this[0]=s.body;this.selector="body";this.length=1;return this}if(typeof a==="string")if((d=Ta.exec(a))&&
(d[1]||!b))if(d[1]){f=b?b.ownerDocument||b:s;if(a=Xa.exec(a))if(c.isPlainObject(b)){a=[s.createElement(a[1])];c.fn.attr.call(a,b,true)}else a=[f.createElement(a[1])];else{a=sa([d[1]],[f]);a=(a.cacheable?a.fragment.cloneNode(true):a.fragment).childNodes}return c.merge(this,a)}else{if(b=s.getElementById(d[2])){if(b.id!==d[2])return T.find(a);this.length=1;this[0]=b}this.context=s;this.selector=a;return this}else if(!b&&/^\w+$/.test(a)){this.selector=a;this.context=s;a=s.getElementsByTagName(a);return c.merge(this,
a)}else return!b||b.jquery?(b||T).find(a):c(b).find(a);else if(c.isFunction(a))return T.ready(a);if(a.selector!==w){this.selector=a.selector;this.context=a.context}return c.makeArray(a,this)},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length},toArray:function(){return R.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this.slice(a)[0]:this[a]},pushStack:function(a,b,d){var f=c();c.isArray(a)?ba.apply(f,a):c.merge(f,a);f.prevObject=this;f.context=this.context;if(b===
"find")f.selector=this.selector+(this.selector?" ":"")+d;else if(b)f.selector=this.selector+"."+b+"("+d+")";return f},each:function(a,b){return c.each(this,a,b)},ready:function(a){c.bindReady();if(c.isReady)a.call(s,c);else Q&&Q.push(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(R.apply(this,arguments),"slice",R.call(arguments).join(","))},map:function(a){return this.pushStack(c.map(this,
function(b,d){return a.call(b,d,b)}))},end:function(){return this.prevObject||c(null)},push:ba,sort:[].sort,splice:[].splice};c.fn.init.prototype=c.fn;c.extend=c.fn.extend=function(){var a=arguments[0]||{},b=1,d=arguments.length,f=false,e,j,i,o;if(typeof a==="boolean"){f=a;a=arguments[1]||{};b=2}if(typeof a!=="object"&&!c.isFunction(a))a={};if(d===b){a=this;--b}for(;b<d;b++)if((e=arguments[b])!=null)for(j in e){i=a[j];o=e[j];if(a!==o)if(f&&o&&(c.isPlainObject(o)||c.isArray(o))){i=i&&(c.isPlainObject(i)||
c.isArray(i))?i:c.isArray(o)?[]:{};a[j]=c.extend(f,i,o)}else if(o!==w)a[j]=o}return a};c.extend({noConflict:function(a){A.$=Sa;if(a)A.jQuery=Ra;return c},isReady:false,ready:function(){if(!c.isReady){if(!s.body)return setTimeout(c.ready,13);c.isReady=true;if(Q){for(var a,b=0;a=Q[b++];)a.call(s,c);Q=null}c.fn.triggerHandler&&c(s).triggerHandler("ready")}},bindReady:function(){if(!xa){xa=true;if(s.readyState==="complete")return c.ready();if(s.addEventListener){s.addEventListener("DOMContentLoaded",
L,false);A.addEventListener("load",c.ready,false)}else if(s.attachEvent){s.attachEvent("onreadystatechange",L);A.attachEvent("onload",c.ready);var a=false;try{a=A.frameElement==null}catch(b){}s.documentElement.doScroll&&a&&ma()}}},isFunction:function(a){return $.call(a)==="[object Function]"},isArray:function(a){return $.call(a)==="[object Array]"},isPlainObject:function(a){if(!a||$.call(a)!=="[object Object]"||a.nodeType||a.setInterval)return false;if(a.constructor&&!aa.call(a,"constructor")&&!aa.call(a.constructor.prototype,
"isPrototypeOf"))return false;var b;for(b in a);return b===w||aa.call(a,b)},isEmptyObject:function(a){for(var b in a)return false;return true},error:function(a){throw a;},parseJSON:function(a){if(typeof a!=="string"||!a)return null;a=c.trim(a);if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return A.JSON&&A.JSON.parse?A.JSON.parse(a):(new Function("return "+
a))();else c.error("Invalid JSON: "+a)},noop:function(){},globalEval:function(a){if(a&&Va.test(a)){var b=s.getElementsByTagName("head")[0]||s.documentElement,d=s.createElement("script");d.type="text/javascript";if(c.support.scriptEval)d.appendChild(s.createTextNode(a));else d.text=a;b.insertBefore(d,b.firstChild);b.removeChild(d)}},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,b,d){var f,e=0,j=a.length,i=j===w||c.isFunction(a);if(d)if(i)for(f in a){if(b.apply(a[f],
d)===false)break}else for(;e<j;){if(b.apply(a[e++],d)===false)break}else if(i)for(f in a){if(b.call(a[f],f,a[f])===false)break}else for(d=a[0];e<j&&b.call(d,e,d)!==false;d=a[++e]);return a},trim:function(a){return(a||"").replace(Wa,"")},makeArray:function(a,b){b=b||[];if(a!=null)a.length==null||typeof a==="string"||c.isFunction(a)||typeof a!=="function"&&a.setInterval?ba.call(b,a):c.merge(b,a);return b},inArray:function(a,b){if(b.indexOf)return b.indexOf(a);for(var d=0,f=b.length;d<f;d++)if(b[d]===
a)return d;return-1},merge:function(a,b){var d=a.length,f=0;if(typeof b.length==="number")for(var e=b.length;f<e;f++)a[d++]=b[f];else for(;b[f]!==w;)a[d++]=b[f++];a.length=d;return a},grep:function(a,b,d){for(var f=[],e=0,j=a.length;e<j;e++)!d!==!b(a[e],e)&&f.push(a[e]);return f},map:function(a,b,d){for(var f=[],e,j=0,i=a.length;j<i;j++){e=b(a[j],j,d);if(e!=null)f[f.length]=e}return f.concat.apply([],f)},guid:1,proxy:function(a,b,d){if(arguments.length===2)if(typeof b==="string"){d=a;a=d[b];b=w}else if(b&&
!c.isFunction(b)){d=b;b=w}if(!b&&a)b=function(){return a.apply(d||this,arguments)};if(a)b.guid=a.guid=a.guid||b.guid||c.guid++;return b},uaMatch:function(a){a=a.toLowerCase();a=/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||!/compatible/.test(a)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},browser:{}});P=c.uaMatch(P);if(P.browser){c.browser[P.browser]=true;c.browser.version=P.version}if(c.browser.webkit)c.browser.safari=
true;if(ya)c.inArray=function(a,b){return ya.call(b,a)};T=c(s);if(s.addEventListener)L=function(){s.removeEventListener("DOMContentLoaded",L,false);c.ready()};else if(s.attachEvent)L=function(){if(s.readyState==="complete"){s.detachEvent("onreadystatechange",L);c.ready()}};(function(){c.support={};var a=s.documentElement,b=s.createElement("script"),d=s.createElement("div"),f="script"+J();d.style.display="none";d.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";
var e=d.getElementsByTagName("*"),j=d.getElementsByTagName("a")[0];if(!(!e||!e.length||!j)){c.support={leadingWhitespace:d.firstChild.nodeType===3,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/red/.test(j.getAttribute("style")),hrefNormalized:j.getAttribute("href")==="/a",opacity:/^0.55$/.test(j.style.opacity),cssFloat:!!j.style.cssFloat,checkOn:d.getElementsByTagName("input")[0].value==="on",optSelected:s.createElement("select").appendChild(s.createElement("option")).selected,
parentNode:d.removeChild(d.appendChild(s.createElement("div"))).parentNode===null,deleteExpando:true,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null};b.type="text/javascript";try{b.appendChild(s.createTextNode("window."+f+"=1;"))}catch(i){}a.insertBefore(b,a.firstChild);if(A[f]){c.support.scriptEval=true;delete A[f]}try{delete b.test}catch(o){c.support.deleteExpando=false}a.removeChild(b);if(d.attachEvent&&d.fireEvent){d.attachEvent("onclick",function k(){c.support.noCloneEvent=
false;d.detachEvent("onclick",k)});d.cloneNode(true).fireEvent("onclick")}d=s.createElement("div");d.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";a=s.createDocumentFragment();a.appendChild(d.firstChild);c.support.checkClone=a.cloneNode(true).cloneNode(true).lastChild.checked;c(function(){var k=s.createElement("div");k.style.width=k.style.paddingLeft="1px";s.body.appendChild(k);c.boxModel=c.support.boxModel=k.offsetWidth===2;s.body.removeChild(k).style.display="none"});a=function(k){var n=
s.createElement("div");k="on"+k;var r=k in n;if(!r){n.setAttribute(k,"return;");r=typeof n[k]==="function"}return r};c.support.submitBubbles=a("submit");c.support.changeBubbles=a("change");a=b=d=e=j=null}})();c.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};var G="jQuery"+J(),Ya=0,za={};c.extend({cache:{},expando:G,noData:{embed:true,object:true,
applet:true},data:function(a,b,d){if(!(a.nodeName&&c.noData[a.nodeName.toLowerCase()])){a=a==A?za:a;var f=a[G],e=c.cache;if(!f&&typeof b==="string"&&d===w)return null;f||(f=++Ya);if(typeof b==="object"){a[G]=f;e[f]=c.extend(true,{},b)}else if(!e[f]){a[G]=f;e[f]={}}a=e[f];if(d!==w)a[b]=d;return typeof b==="string"?a[b]:a}},removeData:function(a,b){if(!(a.nodeName&&c.noData[a.nodeName.toLowerCase()])){a=a==A?za:a;var d=a[G],f=c.cache,e=f[d];if(b){if(e){delete e[b];c.isEmptyObject(e)&&c.removeData(a)}}else{if(c.support.deleteExpando)delete a[c.expando];
else a.removeAttribute&&a.removeAttribute(c.expando);delete f[d]}}}});c.fn.extend({data:function(a,b){if(typeof a==="undefined"&&this.length)return c.data(this[0]);else if(typeof a==="object")return this.each(function(){c.data(this,a)});var d=a.split(".");d[1]=d[1]?"."+d[1]:"";if(b===w){var f=this.triggerHandler("getData"+d[1]+"!",[d[0]]);if(f===w&&this.length)f=c.data(this[0],a);return f===w&&d[1]?this.data(d[0]):f}else return this.trigger("setData"+d[1]+"!",[d[0],b]).each(function(){c.data(this,
a,b)})},removeData:function(a){return this.each(function(){c.removeData(this,a)})}});c.extend({queue:function(a,b,d){if(a){b=(b||"fx")+"queue";var f=c.data(a,b);if(!d)return f||[];if(!f||c.isArray(d))f=c.data(a,b,c.makeArray(d));else f.push(d);return f}},dequeue:function(a,b){b=b||"fx";var d=c.queue(a,b),f=d.shift();if(f==="inprogress")f=d.shift();if(f){b==="fx"&&d.unshift("inprogress");f.call(a,function(){c.dequeue(a,b)})}}});c.fn.extend({queue:function(a,b){if(typeof a!=="string"){b=a;a="fx"}if(b===
w)return c.queue(this[0],a);return this.each(function(){var d=c.queue(this,a,b);a==="fx"&&d[0]!=="inprogress"&&c.dequeue(this,a)})},dequeue:function(a){return this.each(function(){c.dequeue(this,a)})},delay:function(a,b){a=c.fx?c.fx.speeds[a]||a:a;b=b||"fx";return this.queue(b,function(){var d=this;setTimeout(function(){c.dequeue(d,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])}});var Aa=/[\n\t]/g,ca=/\s+/,Za=/\r/g,$a=/href|src|style/,ab=/(button|input)/i,bb=/(button|input|object|select|textarea)/i,
cb=/^(a|area)$/i,Ba=/radio|checkbox/;c.fn.extend({attr:function(a,b){return X(this,a,b,true,c.attr)},removeAttr:function(a){return this.each(function(){c.attr(this,a,"");this.nodeType===1&&this.removeAttribute(a)})},addClass:function(a){if(c.isFunction(a))return this.each(function(n){var r=c(this);r.addClass(a.call(this,n,r.attr("class")))});if(a&&typeof a==="string")for(var b=(a||"").split(ca),d=0,f=this.length;d<f;d++){var e=this[d];if(e.nodeType===1)if(e.className){for(var j=" "+e.className+" ",
i=e.className,o=0,k=b.length;o<k;o++)if(j.indexOf(" "+b[o]+" ")<0)i+=" "+b[o];e.className=c.trim(i)}else e.className=a}return this},removeClass:function(a){if(c.isFunction(a))return this.each(function(k){var n=c(this);n.removeClass(a.call(this,k,n.attr("class")))});if(a&&typeof a==="string"||a===w)for(var b=(a||"").split(ca),d=0,f=this.length;d<f;d++){var e=this[d];if(e.nodeType===1&&e.className)if(a){for(var j=(" "+e.className+" ").replace(Aa," "),i=0,o=b.length;i<o;i++)j=j.replace(" "+b[i]+" ",
" ");e.className=c.trim(j)}else e.className=""}return this},toggleClass:function(a,b){var d=typeof a,f=typeof b==="boolean";if(c.isFunction(a))return this.each(function(e){var j=c(this);j.toggleClass(a.call(this,e,j.attr("class"),b),b)});return this.each(function(){if(d==="string")for(var e,j=0,i=c(this),o=b,k=a.split(ca);e=k[j++];){o=f?o:!i.hasClass(e);i[o?"addClass":"removeClass"](e)}else if(d==="undefined"||d==="boolean"){this.className&&c.data(this,"__className__",this.className);this.className=
this.className||a===false?"":c.data(this,"__className__")||""}})},hasClass:function(a){a=" "+a+" ";for(var b=0,d=this.length;b<d;b++)if((" "+this[b].className+" ").replace(Aa," ").indexOf(a)>-1)return true;return false},val:function(a){if(a===w){var b=this[0];if(b){if(c.nodeName(b,"option"))return(b.attributes.value||{}).specified?b.value:b.text;if(c.nodeName(b,"select")){var d=b.selectedIndex,f=[],e=b.options;b=b.type==="select-one";if(d<0)return null;var j=b?d:0;for(d=b?d+1:e.length;j<d;j++){var i=
e[j];if(i.selected){a=c(i).val();if(b)return a;f.push(a)}}return f}if(Ba.test(b.type)&&!c.support.checkOn)return b.getAttribute("value")===null?"on":b.value;return(b.value||"").replace(Za,"")}return w}var o=c.isFunction(a);return this.each(function(k){var n=c(this),r=a;if(this.nodeType===1){if(o)r=a.call(this,k,n.val());if(typeof r==="number")r+="";if(c.isArray(r)&&Ba.test(this.type))this.checked=c.inArray(n.val(),r)>=0;else if(c.nodeName(this,"select")){var u=c.makeArray(r);c("option",this).each(function(){this.selected=
c.inArray(c(this).val(),u)>=0});if(!u.length)this.selectedIndex=-1}else this.value=r}})}});c.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(a,b,d,f){if(!a||a.nodeType===3||a.nodeType===8)return w;if(f&&b in c.attrFn)return c(a)[b](d);f=a.nodeType!==1||!c.isXMLDoc(a);var e=d!==w;b=f&&c.props[b]||b;if(a.nodeType===1){var j=$a.test(b);if(b in a&&f&&!j){if(e){b==="type"&&ab.test(a.nodeName)&&a.parentNode&&c.error("type property can't be changed");
a[b]=d}if(c.nodeName(a,"form")&&a.getAttributeNode(b))return a.getAttributeNode(b).nodeValue;if(b==="tabIndex")return(b=a.getAttributeNode("tabIndex"))&&b.specified?b.value:bb.test(a.nodeName)||cb.test(a.nodeName)&&a.href?0:w;return a[b]}if(!c.support.style&&f&&b==="style"){if(e)a.style.cssText=""+d;return a.style.cssText}e&&a.setAttribute(b,""+d);a=!c.support.hrefNormalized&&f&&j?a.getAttribute(b,2):a.getAttribute(b);return a===null?w:a}return c.style(a,b,d)}});var O=/\.(.*)$/,db=function(a){return a.replace(/[^\w\s\.\|`]/g,
function(b){return"\\"+b})};c.event={add:function(a,b,d,f){if(!(a.nodeType===3||a.nodeType===8)){if(a.setInterval&&a!==A&&!a.frameElement)a=A;var e,j;if(d.handler){e=d;d=e.handler}if(!d.guid)d.guid=c.guid++;if(j=c.data(a)){var i=j.events=j.events||{},o=j.handle;if(!o)j.handle=o=function(){return typeof c!=="undefined"&&!c.event.triggered?c.event.handle.apply(o.elem,arguments):w};o.elem=a;b=b.split(" ");for(var k,n=0,r;k=b[n++];){j=e?c.extend({},e):{handler:d,data:f};if(k.indexOf(".")>-1){r=k.split(".");
k=r.shift();j.namespace=r.slice(0).sort().join(".")}else{r=[];j.namespace=""}j.type=k;j.guid=d.guid;var u=i[k],z=c.event.special[k]||{};if(!u){u=i[k]=[];if(!z.setup||z.setup.call(a,f,r,o)===false)if(a.addEventListener)a.addEventListener(k,o,false);else a.attachEvent&&a.attachEvent("on"+k,o)}if(z.add){z.add.call(a,j);if(!j.handler.guid)j.handler.guid=d.guid}u.push(j);c.event.global[k]=true}a=null}}},global:{},remove:function(a,b,d,f){if(!(a.nodeType===3||a.nodeType===8)){var e,j=0,i,o,k,n,r,u,z=c.data(a),
C=z&&z.events;if(z&&C){if(b&&b.type){d=b.handler;b=b.type}if(!b||typeof b==="string"&&b.charAt(0)==="."){b=b||"";for(e in C)c.event.remove(a,e+b)}else{for(b=b.split(" ");e=b[j++];){n=e;i=e.indexOf(".")<0;o=[];if(!i){o=e.split(".");e=o.shift();k=new RegExp("(^|\\.)"+c.map(o.slice(0).sort(),db).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(r=C[e])if(d){n=c.event.special[e]||{};for(B=f||0;B<r.length;B++){u=r[B];if(d.guid===u.guid){if(i||k.test(u.namespace)){f==null&&r.splice(B--,1);n.remove&&n.remove.call(a,u)}if(f!=
null)break}}if(r.length===0||f!=null&&r.length===1){if(!n.teardown||n.teardown.call(a,o)===false)Ca(a,e,z.handle);delete C[e]}}else for(var B=0;B<r.length;B++){u=r[B];if(i||k.test(u.namespace)){c.event.remove(a,n,u.handler,B);r.splice(B--,1)}}}if(c.isEmptyObject(C)){if(b=z.handle)b.elem=null;delete z.events;delete z.handle;c.isEmptyObject(z)&&c.removeData(a)}}}}},trigger:function(a,b,d,f){var e=a.type||a;if(!f){a=typeof a==="object"?a[G]?a:c.extend(c.Event(e),a):c.Event(e);if(e.indexOf("!")>=0){a.type=
e=e.slice(0,-1);a.exclusive=true}if(!d){a.stopPropagation();c.event.global[e]&&c.each(c.cache,function(){this.events&&this.events[e]&&c.event.trigger(a,b,this.handle.elem)})}if(!d||d.nodeType===3||d.nodeType===8)return w;a.result=w;a.target=d;b=c.makeArray(b);b.unshift(a)}a.currentTarget=d;(f=c.data(d,"handle"))&&f.apply(d,b);f=d.parentNode||d.ownerDocument;try{if(!(d&&d.nodeName&&c.noData[d.nodeName.toLowerCase()]))if(d["on"+e]&&d["on"+e].apply(d,b)===false)a.result=false}catch(j){}if(!a.isPropagationStopped()&&
f)c.event.trigger(a,b,f,true);else if(!a.isDefaultPrevented()){f=a.target;var i,o=c.nodeName(f,"a")&&e==="click",k=c.event.special[e]||{};if((!k._default||k._default.call(d,a)===false)&&!o&&!(f&&f.nodeName&&c.noData[f.nodeName.toLowerCase()])){try{if(f[e]){if(i=f["on"+e])f["on"+e]=null;c.event.triggered=true;f[e]()}}catch(n){}if(i)f["on"+e]=i;c.event.triggered=false}}},handle:function(a){var b,d,f,e;a=arguments[0]=c.event.fix(a||A.event);a.currentTarget=this;b=a.type.indexOf(".")<0&&!a.exclusive;
if(!b){d=a.type.split(".");a.type=d.shift();f=new RegExp("(^|\\.)"+d.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")}e=c.data(this,"events");d=e[a.type];if(e&&d){d=d.slice(0);e=0;for(var j=d.length;e<j;e++){var i=d[e];if(b||f.test(i.namespace)){a.handler=i.handler;a.data=i.data;a.handleObj=i;i=i.handler.apply(this,arguments);if(i!==w){a.result=i;if(i===false){a.preventDefault();a.stopPropagation()}}if(a.isImmediatePropagationStopped())break}}}return a.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(a){if(a[G])return a;var b=a;a=c.Event(b);for(var d=this.props.length,f;d;){f=this.props[--d];a[f]=b[f]}if(!a.target)a.target=a.srcElement||s;if(a.target.nodeType===3)a.target=a.target.parentNode;if(!a.relatedTarget&&a.fromElement)a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement;if(a.pageX==null&&a.clientX!=null){b=s.documentElement;d=s.body;a.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0);a.pageY=a.clientY+(b&&b.scrollTop||
d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0)}if(!a.which&&(a.charCode||a.charCode===0?a.charCode:a.keyCode))a.which=a.charCode||a.keyCode;if(!a.metaKey&&a.ctrlKey)a.metaKey=a.ctrlKey;if(!a.which&&a.button!==w)a.which=a.button&1?1:a.button&2?3:a.button&4?2:0;return a},guid:1E8,proxy:c.proxy,special:{ready:{setup:c.bindReady,teardown:c.noop},live:{add:function(a){c.event.add(this,a.origType,c.extend({},a,{handler:oa}))},remove:function(a){var b=true,d=a.origType.replace(O,"");c.each(c.data(this,
"events").live||[],function(){if(d===this.origType.replace(O,""))return b=false});b&&c.event.remove(this,a.origType,oa)}},beforeunload:{setup:function(a,b,d){if(this.setInterval)this.onbeforeunload=d;return false},teardown:function(a,b){if(this.onbeforeunload===b)this.onbeforeunload=null}}}};var Ca=s.removeEventListener?function(a,b,d){a.removeEventListener(b,d,false)}:function(a,b,d){a.detachEvent("on"+b,d)};c.Event=function(a){if(!this.preventDefault)return new c.Event(a);if(a&&a.type){this.originalEvent=
a;this.type=a.type}else this.type=a;this.timeStamp=J();this[G]=true};c.Event.prototype={preventDefault:function(){this.isDefaultPrevented=Z;var a=this.originalEvent;if(a){a.preventDefault&&a.preventDefault();a.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=Z;var a=this.originalEvent;if(a){a.stopPropagation&&a.stopPropagation();a.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Z;this.stopPropagation()},isDefaultPrevented:Y,isPropagationStopped:Y,
isImmediatePropagationStopped:Y};var Da=function(a){var b=a.relatedTarget;try{for(;b&&b!==this;)b=b.parentNode;if(b!==this){a.type=a.data;c.event.handle.apply(this,arguments)}}catch(d){}},Ea=function(a){a.type=a.data;c.event.handle.apply(this,arguments)};c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){c.event.special[a]={setup:function(d){c.event.add(this,b,d&&d.selector?Ea:Da,a)},teardown:function(d){c.event.remove(this,b,d&&d.selector?Ea:Da)}}});if(!c.support.submitBubbles)c.event.special.submit=
{setup:function(){if(this.nodeName.toLowerCase()!=="form"){c.event.add(this,"click.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="submit"||d==="image")&&c(b).closest("form").length)return na("submit",this,arguments)});c.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="text"||d==="password")&&c(b).closest("form").length&&a.keyCode===13)return na("submit",this,arguments)})}else return false},teardown:function(){c.event.remove(this,".specialSubmit")}};
if(!c.support.changeBubbles){var da=/textarea|input|select/i,ea,Fa=function(a){var b=a.type,d=a.value;if(b==="radio"||b==="checkbox")d=a.checked;else if(b==="select-multiple")d=a.selectedIndex>-1?c.map(a.options,function(f){return f.selected}).join("-"):"";else if(a.nodeName.toLowerCase()==="select")d=a.selectedIndex;return d},fa=function(a,b){var d=a.target,f,e;if(!(!da.test(d.nodeName)||d.readOnly)){f=c.data(d,"_change_data");e=Fa(d);if(a.type!=="focusout"||d.type!=="radio")c.data(d,"_change_data",
e);if(!(f===w||e===f))if(f!=null||e){a.type="change";return c.event.trigger(a,b,d)}}};c.event.special.change={filters:{focusout:fa,click:function(a){var b=a.target,d=b.type;if(d==="radio"||d==="checkbox"||b.nodeName.toLowerCase()==="select")return fa.call(this,a)},keydown:function(a){var b=a.target,d=b.type;if(a.keyCode===13&&b.nodeName.toLowerCase()!=="textarea"||a.keyCode===32&&(d==="checkbox"||d==="radio")||d==="select-multiple")return fa.call(this,a)},beforeactivate:function(a){a=a.target;c.data(a,
"_change_data",Fa(a))}},setup:function(){if(this.type==="file")return false;for(var a in ea)c.event.add(this,a+".specialChange",ea[a]);return da.test(this.nodeName)},teardown:function(){c.event.remove(this,".specialChange");return da.test(this.nodeName)}};ea=c.event.special.change.filters}s.addEventListener&&c.each({focus:"focusin",blur:"focusout"},function(a,b){function d(f){f=c.event.fix(f);f.type=b;return c.event.handle.call(this,f)}c.event.special[b]={setup:function(){this.addEventListener(a,
d,true)},teardown:function(){this.removeEventListener(a,d,true)}}});c.each(["bind","one"],function(a,b){c.fn[b]=function(d,f,e){if(typeof d==="object"){for(var j in d)this[b](j,f,d[j],e);return this}if(c.isFunction(f)){e=f;f=w}var i=b==="one"?c.proxy(e,function(k){c(this).unbind(k,i);return e.apply(this,arguments)}):e;if(d==="unload"&&b!=="one")this.one(d,f,e);else{j=0;for(var o=this.length;j<o;j++)c.event.add(this[j],d,i,f)}return this}});c.fn.extend({unbind:function(a,b){if(typeof a==="object"&&
!a.preventDefault)for(var d in a)this.unbind(d,a[d]);else{d=0;for(var f=this.length;d<f;d++)c.event.remove(this[d],a,b)}return this},delegate:function(a,b,d,f){return this.live(b,d,f,a)},undelegate:function(a,b,d){return arguments.length===0?this.unbind("live"):this.die(b,null,d,a)},trigger:function(a,b){return this.each(function(){c.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){a=c.Event(a);a.preventDefault();a.stopPropagation();c.event.trigger(a,b,this[0]);return a.result}},
toggle:function(a){for(var b=arguments,d=1;d<b.length;)c.proxy(a,b[d++]);return this.click(c.proxy(a,function(f){var e=(c.data(this,"lastToggle"+a.guid)||0)%d;c.data(this,"lastToggle"+a.guid,e+1);f.preventDefault();return b[e].apply(this,arguments)||false}))},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var Ga={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};c.each(["live","die"],function(a,b){c.fn[b]=function(d,f,e,j){var i,o=0,k,n,r=j||this.selector,
u=j?this:c(this.context);if(c.isFunction(f)){e=f;f=w}for(d=(d||"").split(" ");(i=d[o++])!=null;){j=O.exec(i);k="";if(j){k=j[0];i=i.replace(O,"")}if(i==="hover")d.push("mouseenter"+k,"mouseleave"+k);else{n=i;if(i==="focus"||i==="blur"){d.push(Ga[i]+k);i+=k}else i=(Ga[i]||i)+k;b==="live"?u.each(function(){c.event.add(this,pa(i,r),{data:f,selector:r,handler:e,origType:i,origHandler:e,preType:n})}):u.unbind(pa(i,r),e)}}return this}});c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),
function(a,b){c.fn[b]=function(d){return d?this.bind(b,d):this.trigger(b)};if(c.attrFn)c.attrFn[b]=true});A.attachEvent&&!A.addEventListener&&A.attachEvent("onunload",function(){for(var a in c.cache)if(c.cache[a].handle)try{c.event.remove(c.cache[a].handle.elem)}catch(b){}});(function(){function a(g){for(var h="",l,m=0;g[m];m++){l=g[m];if(l.nodeType===3||l.nodeType===4)h+=l.nodeValue;else if(l.nodeType!==8)h+=a(l.childNodes)}return h}function b(g,h,l,m,q,p){q=0;for(var v=m.length;q<v;q++){var t=m[q];
if(t){t=t[g];for(var y=false;t;){if(t.sizcache===l){y=m[t.sizset];break}if(t.nodeType===1&&!p){t.sizcache=l;t.sizset=q}if(t.nodeName.toLowerCase()===h){y=t;break}t=t[g]}m[q]=y}}}function d(g,h,l,m,q,p){q=0;for(var v=m.length;q<v;q++){var t=m[q];if(t){t=t[g];for(var y=false;t;){if(t.sizcache===l){y=m[t.sizset];break}if(t.nodeType===1){if(!p){t.sizcache=l;t.sizset=q}if(typeof h!=="string"){if(t===h){y=true;break}}else if(k.filter(h,[t]).length>0){y=t;break}}t=t[g]}m[q]=y}}}var f=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,
e=0,j=Object.prototype.toString,i=false,o=true;[0,0].sort(function(){o=false;return 0});var k=function(g,h,l,m){l=l||[];var q=h=h||s;if(h.nodeType!==1&&h.nodeType!==9)return[];if(!g||typeof g!=="string")return l;for(var p=[],v,t,y,S,H=true,M=x(h),I=g;(f.exec(""),v=f.exec(I))!==null;){I=v[3];p.push(v[1]);if(v[2]){S=v[3];break}}if(p.length>1&&r.exec(g))if(p.length===2&&n.relative[p[0]])t=ga(p[0]+p[1],h);else for(t=n.relative[p[0]]?[h]:k(p.shift(),h);p.length;){g=p.shift();if(n.relative[g])g+=p.shift();
t=ga(g,t)}else{if(!m&&p.length>1&&h.nodeType===9&&!M&&n.match.ID.test(p[0])&&!n.match.ID.test(p[p.length-1])){v=k.find(p.shift(),h,M);h=v.expr?k.filter(v.expr,v.set)[0]:v.set[0]}if(h){v=m?{expr:p.pop(),set:z(m)}:k.find(p.pop(),p.length===1&&(p[0]==="~"||p[0]==="+")&&h.parentNode?h.parentNode:h,M);t=v.expr?k.filter(v.expr,v.set):v.set;if(p.length>0)y=z(t);else H=false;for(;p.length;){var D=p.pop();v=D;if(n.relative[D])v=p.pop();else D="";if(v==null)v=h;n.relative[D](y,v,M)}}else y=[]}y||(y=t);y||k.error(D||
g);if(j.call(y)==="[object Array]")if(H)if(h&&h.nodeType===1)for(g=0;y[g]!=null;g++){if(y[g]&&(y[g]===true||y[g].nodeType===1&&E(h,y[g])))l.push(t[g])}else for(g=0;y[g]!=null;g++)y[g]&&y[g].nodeType===1&&l.push(t[g]);else l.push.apply(l,y);else z(y,l);if(S){k(S,q,l,m);k.uniqueSort(l)}return l};k.uniqueSort=function(g){if(B){i=o;g.sort(B);if(i)for(var h=1;h<g.length;h++)g[h]===g[h-1]&&g.splice(h--,1)}return g};k.matches=function(g,h){return k(g,null,null,h)};k.find=function(g,h,l){var m,q;if(!g)return[];
for(var p=0,v=n.order.length;p<v;p++){var t=n.order[p];if(q=n.leftMatch[t].exec(g)){var y=q[1];q.splice(1,1);if(y.substr(y.length-1)!=="\\"){q[1]=(q[1]||"").replace(/\\/g,"");m=n.find[t](q,h,l);if(m!=null){g=g.replace(n.match[t],"");break}}}}m||(m=h.getElementsByTagName("*"));return{set:m,expr:g}};k.filter=function(g,h,l,m){for(var q=g,p=[],v=h,t,y,S=h&&h[0]&&x(h[0]);g&&h.length;){for(var H in n.filter)if((t=n.leftMatch[H].exec(g))!=null&&t[2]){var M=n.filter[H],I,D;D=t[1];y=false;t.splice(1,1);if(D.substr(D.length-
1)!=="\\"){if(v===p)p=[];if(n.preFilter[H])if(t=n.preFilter[H](t,v,l,p,m,S)){if(t===true)continue}else y=I=true;if(t)for(var U=0;(D=v[U])!=null;U++)if(D){I=M(D,t,U,v);var Ha=m^!!I;if(l&&I!=null)if(Ha)y=true;else v[U]=false;else if(Ha){p.push(D);y=true}}if(I!==w){l||(v=p);g=g.replace(n.match[H],"");if(!y)return[];break}}}if(g===q)if(y==null)k.error(g);else break;q=g}return v};k.error=function(g){throw"Syntax error, unrecognized expression: "+g;};var n=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,
CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(g){return g.getAttribute("href")}},
relative:{"+":function(g,h){var l=typeof h==="string",m=l&&!/\W/.test(h);l=l&&!m;if(m)h=h.toLowerCase();m=0;for(var q=g.length,p;m<q;m++)if(p=g[m]){for(;(p=p.previousSibling)&&p.nodeType!==1;);g[m]=l||p&&p.nodeName.toLowerCase()===h?p||false:p===h}l&&k.filter(h,g,true)},">":function(g,h){var l=typeof h==="string";if(l&&!/\W/.test(h)){h=h.toLowerCase();for(var m=0,q=g.length;m<q;m++){var p=g[m];if(p){l=p.parentNode;g[m]=l.nodeName.toLowerCase()===h?l:false}}}else{m=0;for(q=g.length;m<q;m++)if(p=g[m])g[m]=
l?p.parentNode:p.parentNode===h;l&&k.filter(h,g,true)}},"":function(g,h,l){var m=e++,q=d;if(typeof h==="string"&&!/\W/.test(h)){var p=h=h.toLowerCase();q=b}q("parentNode",h,m,g,p,l)},"~":function(g,h,l){var m=e++,q=d;if(typeof h==="string"&&!/\W/.test(h)){var p=h=h.toLowerCase();q=b}q("previousSibling",h,m,g,p,l)}},find:{ID:function(g,h,l){if(typeof h.getElementById!=="undefined"&&!l)return(g=h.getElementById(g[1]))?[g]:[]},NAME:function(g,h){if(typeof h.getElementsByName!=="undefined"){var l=[];
h=h.getElementsByName(g[1]);for(var m=0,q=h.length;m<q;m++)h[m].getAttribute("name")===g[1]&&l.push(h[m]);return l.length===0?null:l}},TAG:function(g,h){return h.getElementsByTagName(g[1])}},preFilter:{CLASS:function(g,h,l,m,q,p){g=" "+g[1].replace(/\\/g,"")+" ";if(p)return g;p=0;for(var v;(v=h[p])!=null;p++)if(v)if(q^(v.className&&(" "+v.className+" ").replace(/[\t\n]/g," ").indexOf(g)>=0))l||m.push(v);else if(l)h[p]=false;return false},ID:function(g){return g[1].replace(/\\/g,"")},TAG:function(g){return g[1].toLowerCase()},
CHILD:function(g){if(g[1]==="nth"){var h=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(g[2]==="even"&&"2n"||g[2]==="odd"&&"2n+1"||!/\D/.test(g[2])&&"0n+"+g[2]||g[2]);g[2]=h[1]+(h[2]||1)-0;g[3]=h[3]-0}g[0]=e++;return g},ATTR:function(g,h,l,m,q,p){h=g[1].replace(/\\/g,"");if(!p&&n.attrMap[h])g[1]=n.attrMap[h];if(g[2]==="~=")g[4]=" "+g[4]+" ";return g},PSEUDO:function(g,h,l,m,q){if(g[1]==="not")if((f.exec(g[3])||"").length>1||/^\w/.test(g[3]))g[3]=k(g[3],null,null,h);else{g=k.filter(g[3],h,l,true^q);l||m.push.apply(m,
g);return false}else if(n.match.POS.test(g[0])||n.match.CHILD.test(g[0]))return true;return g},POS:function(g){g.unshift(true);return g}},filters:{enabled:function(g){return g.disabled===false&&g.type!=="hidden"},disabled:function(g){return g.disabled===true},checked:function(g){return g.checked===true},selected:function(g){return g.selected===true},parent:function(g){return!!g.firstChild},empty:function(g){return!g.firstChild},has:function(g,h,l){return!!k(l[3],g).length},header:function(g){return/h\d/i.test(g.nodeName)},
text:function(g){return"text"===g.type},radio:function(g){return"radio"===g.type},checkbox:function(g){return"checkbox"===g.type},file:function(g){return"file"===g.type},password:function(g){return"password"===g.type},submit:function(g){return"submit"===g.type},image:function(g){return"image"===g.type},reset:function(g){return"reset"===g.type},button:function(g){return"button"===g.type||g.nodeName.toLowerCase()==="button"},input:function(g){return/input|select|textarea|button/i.test(g.nodeName)}},
setFilters:{first:function(g,h){return h===0},last:function(g,h,l,m){return h===m.length-1},even:function(g,h){return h%2===0},odd:function(g,h){return h%2===1},lt:function(g,h,l){return h<l[3]-0},gt:function(g,h,l){return h>l[3]-0},nth:function(g,h,l){return l[3]-0===h},eq:function(g,h,l){return l[3]-0===h}},filter:{PSEUDO:function(g,h,l,m){var q=h[1],p=n.filters[q];if(p)return p(g,l,h,m);else if(q==="contains")return(g.textContent||g.innerText||a([g])||"").indexOf(h[3])>=0;else if(q==="not"){h=
h[3];l=0;for(m=h.length;l<m;l++)if(h[l]===g)return false;return true}else k.error("Syntax error, unrecognized expression: "+q)},CHILD:function(g,h){var l=h[1],m=g;switch(l){case "only":case "first":for(;m=m.previousSibling;)if(m.nodeType===1)return false;if(l==="first")return true;m=g;case "last":for(;m=m.nextSibling;)if(m.nodeType===1)return false;return true;case "nth":l=h[2];var q=h[3];if(l===1&&q===0)return true;h=h[0];var p=g.parentNode;if(p&&(p.sizcache!==h||!g.nodeIndex)){var v=0;for(m=p.firstChild;m;m=
m.nextSibling)if(m.nodeType===1)m.nodeIndex=++v;p.sizcache=h}g=g.nodeIndex-q;return l===0?g===0:g%l===0&&g/l>=0}},ID:function(g,h){return g.nodeType===1&&g.getAttribute("id")===h},TAG:function(g,h){return h==="*"&&g.nodeType===1||g.nodeName.toLowerCase()===h},CLASS:function(g,h){return(" "+(g.className||g.getAttribute("class"))+" ").indexOf(h)>-1},ATTR:function(g,h){var l=h[1];g=n.attrHandle[l]?n.attrHandle[l](g):g[l]!=null?g[l]:g.getAttribute(l);l=g+"";var m=h[2];h=h[4];return g==null?m==="!=":m===
"="?l===h:m==="*="?l.indexOf(h)>=0:m==="~="?(" "+l+" ").indexOf(h)>=0:!h?l&&g!==false:m==="!="?l!==h:m==="^="?l.indexOf(h)===0:m==="$="?l.substr(l.length-h.length)===h:m==="|="?l===h||l.substr(0,h.length+1)===h+"-":false},POS:function(g,h,l,m){var q=n.setFilters[h[2]];if(q)return q(g,l,h,m)}}},r=n.match.POS;for(var u in n.match){n.match[u]=new RegExp(n.match[u].source+/(?![^\[]*\])(?![^\(]*\))/.source);n.leftMatch[u]=new RegExp(/(^(?:.|\r|\n)*?)/.source+n.match[u].source.replace(/\\(\d+)/g,function(g,
h){return"\\"+(h-0+1)}))}var z=function(g,h){g=Array.prototype.slice.call(g,0);if(h){h.push.apply(h,g);return h}return g};try{Array.prototype.slice.call(s.documentElement.childNodes,0)}catch(C){z=function(g,h){h=h||[];if(j.call(g)==="[object Array]")Array.prototype.push.apply(h,g);else if(typeof g.length==="number")for(var l=0,m=g.length;l<m;l++)h.push(g[l]);else for(l=0;g[l];l++)h.push(g[l]);return h}}var B;if(s.documentElement.compareDocumentPosition)B=function(g,h){if(!g.compareDocumentPosition||
!h.compareDocumentPosition){if(g==h)i=true;return g.compareDocumentPosition?-1:1}g=g.compareDocumentPosition(h)&4?-1:g===h?0:1;if(g===0)i=true;return g};else if("sourceIndex"in s.documentElement)B=function(g,h){if(!g.sourceIndex||!h.sourceIndex){if(g==h)i=true;return g.sourceIndex?-1:1}g=g.sourceIndex-h.sourceIndex;if(g===0)i=true;return g};else if(s.createRange)B=function(g,h){if(!g.ownerDocument||!h.ownerDocument){if(g==h)i=true;return g.ownerDocument?-1:1}var l=g.ownerDocument.createRange(),m=
h.ownerDocument.createRange();l.setStart(g,0);l.setEnd(g,0);m.setStart(h,0);m.setEnd(h,0);g=l.compareBoundaryPoints(Range.START_TO_END,m);if(g===0)i=true;return g};(function(){var g=s.createElement("div"),h="script"+(new Date).getTime();g.innerHTML="<a name='"+h+"'/>";var l=s.documentElement;l.insertBefore(g,l.firstChild);if(s.getElementById(h)){n.find.ID=function(m,q,p){if(typeof q.getElementById!=="undefined"&&!p)return(q=q.getElementById(m[1]))?q.id===m[1]||typeof q.getAttributeNode!=="undefined"&&
q.getAttributeNode("id").nodeValue===m[1]?[q]:w:[]};n.filter.ID=function(m,q){var p=typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id");return m.nodeType===1&&p&&p.nodeValue===q}}l.removeChild(g);l=g=null})();(function(){var g=s.createElement("div");g.appendChild(s.createComment(""));if(g.getElementsByTagName("*").length>0)n.find.TAG=function(h,l){l=l.getElementsByTagName(h[1]);if(h[1]==="*"){h=[];for(var m=0;l[m];m++)l[m].nodeType===1&&h.push(l[m]);l=h}return l};g.innerHTML="<a href='#'></a>";
if(g.firstChild&&typeof g.firstChild.getAttribute!=="undefined"&&g.firstChild.getAttribute("href")!=="#")n.attrHandle.href=function(h){return h.getAttribute("href",2)};g=null})();s.querySelectorAll&&function(){var g=k,h=s.createElement("div");h.innerHTML="<p class='TEST'></p>";if(!(h.querySelectorAll&&h.querySelectorAll(".TEST").length===0)){k=function(m,q,p,v){q=q||s;if(!v&&q.nodeType===9&&!x(q))try{return z(q.querySelectorAll(m),p)}catch(t){}return g(m,q,p,v)};for(var l in g)k[l]=g[l];h=null}}();
(function(){var g=s.createElement("div");g.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!g.getElementsByClassName||g.getElementsByClassName("e").length===0)){g.lastChild.className="e";if(g.getElementsByClassName("e").length!==1){n.order.splice(1,0,"CLASS");n.find.CLASS=function(h,l,m){if(typeof l.getElementsByClassName!=="undefined"&&!m)return l.getElementsByClassName(h[1])};g=null}}})();var E=s.compareDocumentPosition?function(g,h){return!!(g.compareDocumentPosition(h)&16)}:
function(g,h){return g!==h&&(g.contains?g.contains(h):true)},x=function(g){return(g=(g?g.ownerDocument||g:0).documentElement)?g.nodeName!=="HTML":false},ga=function(g,h){var l=[],m="",q;for(h=h.nodeType?[h]:h;q=n.match.PSEUDO.exec(g);){m+=q[0];g=g.replace(n.match.PSEUDO,"")}g=n.relative[g]?g+"*":g;q=0;for(var p=h.length;q<p;q++)k(g,h[q],l);return k.filter(m,l)};c.find=k;c.expr=k.selectors;c.expr[":"]=c.expr.filters;c.unique=k.uniqueSort;c.text=a;c.isXMLDoc=x;c.contains=E})();var eb=/Until$/,fb=/^(?:parents|prevUntil|prevAll)/,
gb=/,/;R=Array.prototype.slice;var Ia=function(a,b,d){if(c.isFunction(b))return c.grep(a,function(e,j){return!!b.call(e,j,e)===d});else if(b.nodeType)return c.grep(a,function(e){return e===b===d});else if(typeof b==="string"){var f=c.grep(a,function(e){return e.nodeType===1});if(Ua.test(b))return c.filter(b,f,!d);else b=c.filter(b,f)}return c.grep(a,function(e){return c.inArray(e,b)>=0===d})};c.fn.extend({find:function(a){for(var b=this.pushStack("","find",a),d=0,f=0,e=this.length;f<e;f++){d=b.length;
c.find(a,this[f],b);if(f>0)for(var j=d;j<b.length;j++)for(var i=0;i<d;i++)if(b[i]===b[j]){b.splice(j--,1);break}}return b},has:function(a){var b=c(a);return this.filter(function(){for(var d=0,f=b.length;d<f;d++)if(c.contains(this,b[d]))return true})},not:function(a){return this.pushStack(Ia(this,a,false),"not",a)},filter:function(a){return this.pushStack(Ia(this,a,true),"filter",a)},is:function(a){return!!a&&c.filter(a,this).length>0},closest:function(a,b){if(c.isArray(a)){var d=[],f=this[0],e,j=
{},i;if(f&&a.length){e=0;for(var o=a.length;e<o;e++){i=a[e];j[i]||(j[i]=c.expr.match.POS.test(i)?c(i,b||this.context):i)}for(;f&&f.ownerDocument&&f!==b;){for(i in j){e=j[i];if(e.jquery?e.index(f)>-1:c(f).is(e)){d.push({selector:i,elem:f});delete j[i]}}f=f.parentNode}}return d}var k=c.expr.match.POS.test(a)?c(a,b||this.context):null;return this.map(function(n,r){for(;r&&r.ownerDocument&&r!==b;){if(k?k.index(r)>-1:c(r).is(a))return r;r=r.parentNode}return null})},index:function(a){if(!a||typeof a===
"string")return c.inArray(this[0],a?c(a):this.parent().children());return c.inArray(a.jquery?a[0]:a,this)},add:function(a,b){a=typeof a==="string"?c(a,b||this.context):c.makeArray(a);b=c.merge(this.get(),a);return this.pushStack(qa(a[0])||qa(b[0])?b:c.unique(b))},andSelf:function(){return this.add(this.prevObject)}});c.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return c.dir(a,"parentNode")},parentsUntil:function(a,b,d){return c.dir(a,"parentNode",
d)},next:function(a){return c.nth(a,2,"nextSibling")},prev:function(a){return c.nth(a,2,"previousSibling")},nextAll:function(a){return c.dir(a,"nextSibling")},prevAll:function(a){return c.dir(a,"previousSibling")},nextUntil:function(a,b,d){return c.dir(a,"nextSibling",d)},prevUntil:function(a,b,d){return c.dir(a,"previousSibling",d)},siblings:function(a){return c.sibling(a.parentNode.firstChild,a)},children:function(a){return c.sibling(a.firstChild)},contents:function(a){return c.nodeName(a,"iframe")?
a.contentDocument||a.contentWindow.document:c.makeArray(a.childNodes)}},function(a,b){c.fn[a]=function(d,f){var e=c.map(this,b,d);eb.test(a)||(f=d);if(f&&typeof f==="string")e=c.filter(f,e);e=this.length>1?c.unique(e):e;if((this.length>1||gb.test(f))&&fb.test(a))e=e.reverse();return this.pushStack(e,a,R.call(arguments).join(","))}});c.extend({filter:function(a,b,d){if(d)a=":not("+a+")";return c.find.matches(a,b)},dir:function(a,b,d){var f=[];for(a=a[b];a&&a.nodeType!==9&&(d===w||a.nodeType!==1||!c(a).is(d));){a.nodeType===
1&&f.push(a);a=a[b]}return f},nth:function(a,b,d){b=b||1;for(var f=0;a;a=a[d])if(a.nodeType===1&&++f===b)break;return a},sibling:function(a,b){for(var d=[];a;a=a.nextSibling)a.nodeType===1&&a!==b&&d.push(a);return d}});var Ja=/ jQuery\d+="(?:\d+|null)"/g,V=/^\s+/,Ka=/(<([\w:]+)[^>]*?)\/>/g,hb=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,La=/<([\w:]+)/,ib=/<tbody/i,jb=/<|&#?\w+;/,ta=/<script|<object|<embed|<option|<style/i,ua=/checked\s*(?:[^=]|=\s*.checked.)/i,Ma=function(a,b,d){return hb.test(d)?
a:b+"></"+d+">"},F={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};F.optgroup=F.option;F.tbody=F.tfoot=F.colgroup=F.caption=F.thead;F.th=F.td;if(!c.support.htmlSerialize)F._default=[1,"div<div>","</div>"];c.fn.extend({text:function(a){if(c.isFunction(a))return this.each(function(b){var d=
c(this);d.text(a.call(this,b,d.text()))});if(typeof a!=="object"&&a!==w)return this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(a));return c.text(this)},wrapAll:function(a){if(c.isFunction(a))return this.each(function(d){c(this).wrapAll(a.call(this,d))});if(this[0]){var b=c(a,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var d=this;d.firstChild&&d.firstChild.nodeType===1;)d=d.firstChild;return d}).append(this)}return this},
wrapInner:function(a){if(c.isFunction(a))return this.each(function(b){c(this).wrapInner(a.call(this,b))});return this.each(function(){var b=c(this),d=b.contents();d.length?d.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){c(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a)})},
prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this)});else if(arguments.length){var a=c(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,
this.nextSibling)});else if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,c(arguments[0]).toArray());return a}},remove:function(a,b){for(var d=0,f;(f=this[d])!=null;d++)if(!a||c.filter(a,[f]).length){if(!b&&f.nodeType===1){c.cleanData(f.getElementsByTagName("*"));c.cleanData([f])}f.parentNode&&f.parentNode.removeChild(f)}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++)for(b.nodeType===1&&c.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);
return this},clone:function(a){var b=this.map(function(){if(!c.support.noCloneEvent&&!c.isXMLDoc(this)){var d=this.outerHTML,f=this.ownerDocument;if(!d){d=f.createElement("div");d.appendChild(this.cloneNode(true));d=d.innerHTML}return c.clean([d.replace(Ja,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(V,"")],f)[0]}else return this.cloneNode(true)});if(a===true){ra(this,b);ra(this.find("*"),b.find("*"))}return b},html:function(a){if(a===w)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Ja,
""):null;else if(typeof a==="string"&&!ta.test(a)&&(c.support.leadingWhitespace||!V.test(a))&&!F[(La.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ka,Ma);try{for(var b=0,d=this.length;b<d;b++)if(this[b].nodeType===1){c.cleanData(this[b].getElementsByTagName("*"));this[b].innerHTML=a}}catch(f){this.empty().append(a)}}else c.isFunction(a)?this.each(function(e){var j=c(this),i=j.html();j.empty().append(function(){return a.call(this,e,i)})}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&
this[0].parentNode){if(c.isFunction(a))return this.each(function(b){var d=c(this),f=d.html();d.replaceWith(a.call(this,b,f))});if(typeof a!=="string")a=c(a).detach();return this.each(function(){var b=this.nextSibling,d=this.parentNode;c(this).remove();b?c(b).before(a):c(d).append(a)})}else return this.pushStack(c(c.isFunction(a)?a():a),"replaceWith",a)},detach:function(a){return this.remove(a,true)},domManip:function(a,b,d){function f(u){return c.nodeName(u,"table")?u.getElementsByTagName("tbody")[0]||
u.appendChild(u.ownerDocument.createElement("tbody")):u}var e,j,i=a[0],o=[],k;if(!c.support.checkClone&&arguments.length===3&&typeof i==="string"&&ua.test(i))return this.each(function(){c(this).domManip(a,b,d,true)});if(c.isFunction(i))return this.each(function(u){var z=c(this);a[0]=i.call(this,u,b?z.html():w);z.domManip(a,b,d)});if(this[0]){e=i&&i.parentNode;e=c.support.parentNode&&e&&e.nodeType===11&&e.childNodes.length===this.length?{fragment:e}:sa(a,this,o);k=e.fragment;if(j=k.childNodes.length===
1?(k=k.firstChild):k.firstChild){b=b&&c.nodeName(j,"tr");for(var n=0,r=this.length;n<r;n++)d.call(b?f(this[n],j):this[n],n>0||e.cacheable||this.length>1?k.cloneNode(true):k)}o.length&&c.each(o,Qa)}return this}});c.fragments={};c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){c.fn[a]=function(d){var f=[];d=c(d);var e=this.length===1&&this[0].parentNode;if(e&&e.nodeType===11&&e.childNodes.length===1&&d.length===1){d[b](this[0]);
return this}else{e=0;for(var j=d.length;e<j;e++){var i=(e>0?this.clone(true):this).get();c.fn[b].apply(c(d[e]),i);f=f.concat(i)}return this.pushStack(f,a,d.selector)}}});c.extend({clean:function(a,b,d,f){b=b||s;if(typeof b.createElement==="undefined")b=b.ownerDocument||b[0]&&b[0].ownerDocument||s;for(var e=[],j=0,i;(i=a[j])!=null;j++){if(typeof i==="number")i+="";if(i){if(typeof i==="string"&&!jb.test(i))i=b.createTextNode(i);else if(typeof i==="string"){i=i.replace(Ka,Ma);var o=(La.exec(i)||["",
""])[1].toLowerCase(),k=F[o]||F._default,n=k[0],r=b.createElement("div");for(r.innerHTML=k[1]+i+k[2];n--;)r=r.lastChild;if(!c.support.tbody){n=ib.test(i);o=o==="table"&&!n?r.firstChild&&r.firstChild.childNodes:k[1]==="<table>"&&!n?r.childNodes:[];for(k=o.length-1;k>=0;--k)c.nodeName(o[k],"tbody")&&!o[k].childNodes.length&&o[k].parentNode.removeChild(o[k])}!c.support.leadingWhitespace&&V.test(i)&&r.insertBefore(b.createTextNode(V.exec(i)[0]),r.firstChild);i=r.childNodes}if(i.nodeType)e.push(i);else e=
c.merge(e,i)}}if(d)for(j=0;e[j];j++)if(f&&c.nodeName(e[j],"script")&&(!e[j].type||e[j].type.toLowerCase()==="text/javascript"))f.push(e[j].parentNode?e[j].parentNode.removeChild(e[j]):e[j]);else{e[j].nodeType===1&&e.splice.apply(e,[j+1,0].concat(c.makeArray(e[j].getElementsByTagName("script"))));d.appendChild(e[j])}return e},cleanData:function(a){for(var b,d,f=c.cache,e=c.event.special,j=c.support.deleteExpando,i=0,o;(o=a[i])!=null;i++)if(d=o[c.expando]){b=f[d];if(b.events)for(var k in b.events)e[k]?
c.event.remove(o,k):Ca(o,k,b.handle);if(j)delete o[c.expando];else o.removeAttribute&&o.removeAttribute(c.expando);delete f[d]}}});var kb=/z-?index|font-?weight|opacity|zoom|line-?height/i,Na=/alpha\([^)]*\)/,Oa=/opacity=([^)]*)/,ha=/float/i,ia=/-([a-z])/ig,lb=/([A-Z])/g,mb=/^-?\d+(?:px)?$/i,nb=/^-?\d/,ob={position:"absolute",visibility:"hidden",display:"block"},pb=["Left","Right"],qb=["Top","Bottom"],rb=s.defaultView&&s.defaultView.getComputedStyle,Pa=c.support.cssFloat?"cssFloat":"styleFloat",ja=
function(a,b){return b.toUpperCase()};c.fn.css=function(a,b){return X(this,a,b,true,function(d,f,e){if(e===w)return c.curCSS(d,f);if(typeof e==="number"&&!kb.test(f))e+="px";c.style(d,f,e)})};c.extend({style:function(a,b,d){if(!a||a.nodeType===3||a.nodeType===8)return w;if((b==="width"||b==="height")&&parseFloat(d)<0)d=w;var f=a.style||a,e=d!==w;if(!c.support.opacity&&b==="opacity"){if(e){f.zoom=1;b=parseInt(d,10)+""==="NaN"?"":"alpha(opacity="+d*100+")";a=f.filter||c.curCSS(a,"filter")||"";f.filter=
Na.test(a)?a.replace(Na,b):b}return f.filter&&f.filter.indexOf("opacity=")>=0?parseFloat(Oa.exec(f.filter)[1])/100+"":""}if(ha.test(b))b=Pa;b=b.replace(ia,ja);if(e)f[b]=d;return f[b]},css:function(a,b,d,f){if(b==="width"||b==="height"){var e,j=b==="width"?pb:qb;function i(){e=b==="width"?a.offsetWidth:a.offsetHeight;f!=="border"&&c.each(j,function(){f||(e-=parseFloat(c.curCSS(a,"padding"+this,true))||0);if(f==="margin")e+=parseFloat(c.curCSS(a,"margin"+this,true))||0;else e-=parseFloat(c.curCSS(a,
"border"+this+"Width",true))||0})}a.offsetWidth!==0?i():c.swap(a,ob,i);return Math.max(0,Math.round(e))}return c.curCSS(a,b,d)},curCSS:function(a,b,d){var f,e=a.style;if(!c.support.opacity&&b==="opacity"&&a.currentStyle){f=Oa.test(a.currentStyle.filter||"")?parseFloat(RegExp.$1)/100+"":"";return f===""?"1":f}if(ha.test(b))b=Pa;if(!d&&e&&e[b])f=e[b];else if(rb){if(ha.test(b))b="float";b=b.replace(lb,"-$1").toLowerCase();e=a.ownerDocument.defaultView;if(!e)return null;if(a=e.getComputedStyle(a,null))f=
a.getPropertyValue(b);if(b==="opacity"&&f==="")f="1"}else if(a.currentStyle){d=b.replace(ia,ja);f=a.currentStyle[b]||a.currentStyle[d];if(!mb.test(f)&&nb.test(f)){b=e.left;var j=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;e.left=d==="fontSize"?"1em":f||0;f=e.pixelLeft+"px";e.left=b;a.runtimeStyle.left=j}}return f},swap:function(a,b,d){var f={};for(var e in b){f[e]=a.style[e];a.style[e]=b[e]}d.call(a);for(e in b)a.style[e]=f[e]}});if(c.expr&&c.expr.filters){c.expr.filters.hidden=function(a){var b=
a.offsetWidth,d=a.offsetHeight,f=a.nodeName.toLowerCase()==="tr";return b===0&&d===0&&!f?true:b>0&&d>0&&!f?false:c.curCSS(a,"display")==="none"};c.expr.filters.visible=function(a){return!c.expr.filters.hidden(a)}}var sb=J(),tb=/<script(.|\s)*?\/script>/gi,ub=/select|textarea/i,vb=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,N=/=\?(&|$)/,ka=/\?/,wb=/(\?|&)_=.*?(&|$)/,xb=/^(\w+:)?\/\/([^\/?#]+)/,yb=/%20/g,zb=c.fn.load;c.fn.extend({load:function(a,b,d){if(typeof a!==
"string")return zb.call(this,a);else if(!this.length)return this;var f=a.indexOf(" ");if(f>=0){var e=a.slice(f,a.length);a=a.slice(0,f)}f="GET";if(b)if(c.isFunction(b)){d=b;b=null}else if(typeof b==="object"){b=c.param(b,c.ajaxSettings.traditional);f="POST"}var j=this;c.ajax({url:a,type:f,dataType:"html",data:b,complete:function(i,o){if(o==="success"||o==="notmodified")j.html(e?c("<div />").append(i.responseText.replace(tb,"")).find(e):i.responseText);d&&j.each(d,[i.responseText,o,i])}});return this},
serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?c.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ub.test(this.nodeName)||vb.test(this.type))}).map(function(a,b){a=c(this).val();return a==null?null:c.isArray(a)?c.map(a,function(d){return{name:b.name,value:d}}):{name:b.name,value:a}}).get()}});c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
function(a,b){c.fn[b]=function(d){return this.bind(b,d)}});c.extend({get:function(a,b,d,f){if(c.isFunction(b)){f=f||d;d=b;b=null}return c.ajax({type:"GET",url:a,data:b,success:d,dataType:f})},getScript:function(a,b){return c.get(a,null,b,"script")},getJSON:function(a,b,d){return c.get(a,b,d,"json")},post:function(a,b,d,f){if(c.isFunction(b)){f=f||d;d=b;b={}}return c.ajax({type:"POST",url:a,data:b,success:d,dataType:f})},ajaxSetup:function(a){c.extend(c.ajaxSettings,a)},ajaxSettings:{url:location.href,
global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:A.XMLHttpRequest&&(A.location.protocol!=="file:"||!A.ActiveXObject)?function(){return new A.XMLHttpRequest}:function(){try{return new A.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(a){function b(){e.success&&
e.success.call(k,o,i,x);e.global&&f("ajaxSuccess",[x,e])}function d(){e.complete&&e.complete.call(k,x,i);e.global&&f("ajaxComplete",[x,e]);e.global&&!--c.active&&c.event.trigger("ajaxStop")}function f(q,p){(e.context?c(e.context):c.event).trigger(q,p)}var e=c.extend(true,{},c.ajaxSettings,a),j,i,o,k=a&&a.context||e,n=e.type.toUpperCase();if(e.data&&e.processData&&typeof e.data!=="string")e.data=c.param(e.data,e.traditional);if(e.dataType==="jsonp"){if(n==="GET")N.test(e.url)||(e.url+=(ka.test(e.url)?
"&":"?")+(e.jsonp||"callback")+"=?");else if(!e.data||!N.test(e.data))e.data=(e.data?e.data+"&":"")+(e.jsonp||"callback")+"=?";e.dataType="json"}if(e.dataType==="json"&&(e.data&&N.test(e.data)||N.test(e.url))){j=e.jsonpCallback||"jsonp"+sb++;if(e.data)e.data=(e.data+"").replace(N,"="+j+"$1");e.url=e.url.replace(N,"="+j+"$1");e.dataType="script";A[j]=A[j]||function(q){o=q;b();d();A[j]=w;try{delete A[j]}catch(p){}z&&z.removeChild(C)}}if(e.dataType==="script"&&e.cache===null)e.cache=false;if(e.cache===
false&&n==="GET"){var r=J(),u=e.url.replace(wb,"$1_="+r+"$2");e.url=u+(u===e.url?(ka.test(e.url)?"&":"?")+"_="+r:"")}if(e.data&&n==="GET")e.url+=(ka.test(e.url)?"&":"?")+e.data;e.global&&!c.active++&&c.event.trigger("ajaxStart");r=(r=xb.exec(e.url))&&(r[1]&&r[1]!==location.protocol||r[2]!==location.host);if(e.dataType==="script"&&n==="GET"&&r){var z=s.getElementsByTagName("head")[0]||s.documentElement,C=s.createElement("script");C.src=e.url;if(e.scriptCharset)C.charset=e.scriptCharset;if(!j){var B=
false;C.onload=C.onreadystatechange=function(){if(!B&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){B=true;b();d();C.onload=C.onreadystatechange=null;z&&C.parentNode&&z.removeChild(C)}}}z.insertBefore(C,z.firstChild);return w}var E=false,x=e.xhr();if(x){e.username?x.open(n,e.url,e.async,e.username,e.password):x.open(n,e.url,e.async);try{if(e.data||a&&a.contentType)x.setRequestHeader("Content-Type",e.contentType);if(e.ifModified){c.lastModified[e.url]&&x.setRequestHeader("If-Modified-Since",
c.lastModified[e.url]);c.etag[e.url]&&x.setRequestHeader("If-None-Match",c.etag[e.url])}r||x.setRequestHeader("X-Requested-With","XMLHttpRequest");x.setRequestHeader("Accept",e.dataType&&e.accepts[e.dataType]?e.accepts[e.dataType]+", */*":e.accepts._default)}catch(ga){}if(e.beforeSend&&e.beforeSend.call(k,x,e)===false){e.global&&!--c.active&&c.event.trigger("ajaxStop");x.abort();return false}e.global&&f("ajaxSend",[x,e]);var g=x.onreadystatechange=function(q){if(!x||x.readyState===0||q==="abort"){E||
d();E=true;if(x)x.onreadystatechange=c.noop}else if(!E&&x&&(x.readyState===4||q==="timeout")){E=true;x.onreadystatechange=c.noop;i=q==="timeout"?"timeout":!c.httpSuccess(x)?"error":e.ifModified&&c.httpNotModified(x,e.url)?"notmodified":"success";var p;if(i==="success")try{o=c.httpData(x,e.dataType,e)}catch(v){i="parsererror";p=v}if(i==="success"||i==="notmodified")j||b();else c.handleError(e,x,i,p);d();q==="timeout"&&x.abort();if(e.async)x=null}};try{var h=x.abort;x.abort=function(){x&&h.call(x);
g("abort")}}catch(l){}e.async&&e.timeout>0&&setTimeout(function(){x&&!E&&g("timeout")},e.timeout);try{x.send(n==="POST"||n==="PUT"||n==="DELETE"?e.data:null)}catch(m){c.handleError(e,x,null,m);d()}e.async||g();return x}},handleError:function(a,b,d,f){if(a.error)a.error.call(a.context||a,b,d,f);if(a.global)(a.context?c(a.context):c.event).trigger("ajaxError",[b,a,f])},active:0,httpSuccess:function(a){try{return!a.status&&location.protocol==="file:"||a.status>=200&&a.status<300||a.status===304||a.status===
1223||a.status===0}catch(b){}return false},httpNotModified:function(a,b){var d=a.getResponseHeader("Last-Modified"),f=a.getResponseHeader("Etag");if(d)c.lastModified[b]=d;if(f)c.etag[b]=f;return a.status===304||a.status===0},httpData:function(a,b,d){var f=a.getResponseHeader("content-type")||"",e=b==="xml"||!b&&f.indexOf("xml")>=0;a=e?a.responseXML:a.responseText;e&&a.documentElement.nodeName==="parsererror"&&c.error("parsererror");if(d&&d.dataFilter)a=d.dataFilter(a,b);if(typeof a==="string")if(b===
"json"||!b&&f.indexOf("json")>=0)a=c.parseJSON(a);else if(b==="script"||!b&&f.indexOf("javascript")>=0)c.globalEval(a);return a},param:function(a,b){function d(i,o){if(c.isArray(o))c.each(o,function(k,n){b||/\[\]$/.test(i)?f(i,n):d(i+"["+(typeof n==="object"||c.isArray(n)?k:"")+"]",n)});else!b&&o!=null&&typeof o==="object"?c.each(o,function(k,n){d(i+"["+k+"]",n)}):f(i,o)}function f(i,o){o=c.isFunction(o)?o():o;e[e.length]=encodeURIComponent(i)+"="+encodeURIComponent(o)}var e=[];if(b===w)b=c.ajaxSettings.traditional;
if(c.isArray(a)||a.jquery)c.each(a,function(){f(this.name,this.value)});else for(var j in a)d(j,a[j]);return e.join("&").replace(yb,"+")}});var la={},Ab=/toggle|show|hide/,Bb=/^([+-]=)?([\d+-.]+)(.*)$/,W,va=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];c.fn.extend({show:function(a,b){if(a||a===0)return this.animate(K("show",3),a,b);else{a=0;for(b=this.length;a<b;a++){var d=c.data(this[a],"olddisplay");
this[a].style.display=d||"";if(c.css(this[a],"display")==="none"){d=this[a].nodeName;var f;if(la[d])f=la[d];else{var e=c("<"+d+" />").appendTo("body");f=e.css("display");if(f==="none")f="block";e.remove();la[d]=f}c.data(this[a],"olddisplay",f)}}a=0;for(b=this.length;a<b;a++)this[a].style.display=c.data(this[a],"olddisplay")||"";return this}},hide:function(a,b){if(a||a===0)return this.animate(K("hide",3),a,b);else{a=0;for(b=this.length;a<b;a++){var d=c.data(this[a],"olddisplay");!d&&d!=="none"&&c.data(this[a],
"olddisplay",c.css(this[a],"display"))}a=0;for(b=this.length;a<b;a++)this[a].style.display="none";return this}},_toggle:c.fn.toggle,toggle:function(a,b){var d=typeof a==="boolean";if(c.isFunction(a)&&c.isFunction(b))this._toggle.apply(this,arguments);else a==null||d?this.each(function(){var f=d?a:c(this).is(":hidden");c(this)[f?"show":"hide"]()}):this.animate(K("toggle",3),a,b);return this},fadeTo:function(a,b,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,d)},
animate:function(a,b,d,f){var e=c.speed(b,d,f);if(c.isEmptyObject(a))return this.each(e.complete);return this[e.queue===false?"each":"queue"](function(){var j=c.extend({},e),i,o=this.nodeType===1&&c(this).is(":hidden"),k=this;for(i in a){var n=i.replace(ia,ja);if(i!==n){a[n]=a[i];delete a[i];i=n}if(a[i]==="hide"&&o||a[i]==="show"&&!o)return j.complete.call(this);if((i==="height"||i==="width")&&this.style){j.display=c.css(this,"display");j.overflow=this.style.overflow}if(c.isArray(a[i])){(j.specialEasing=
j.specialEasing||{})[i]=a[i][1];a[i]=a[i][0]}}if(j.overflow!=null)this.style.overflow="hidden";j.curAnim=c.extend({},a);c.each(a,function(r,u){var z=new c.fx(k,j,r);if(Ab.test(u))z[u==="toggle"?o?"show":"hide":u](a);else{var C=Bb.exec(u),B=z.cur(true)||0;if(C){u=parseFloat(C[2]);var E=C[3]||"px";if(E!=="px"){k.style[r]=(u||1)+E;B=(u||1)/z.cur(true)*B;k.style[r]=B+E}if(C[1])u=(C[1]==="-="?-1:1)*u+B;z.custom(B,u,E)}else z.custom(B,u,"")}});return true})},stop:function(a,b){var d=c.timers;a&&this.queue([]);
this.each(function(){for(var f=d.length-1;f>=0;f--)if(d[f].elem===this){b&&d[f](true);d.splice(f,1)}});b||this.dequeue();return this}});c.each({slideDown:K("show",1),slideUp:K("hide",1),slideToggle:K("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(a,b){c.fn[a]=function(d,f){return this.animate(b,d,f)}});c.extend({speed:function(a,b,d){var f=a&&typeof a==="object"?a:{complete:d||!d&&b||c.isFunction(a)&&a,duration:a,easing:d&&b||b&&!c.isFunction(b)&&b};f.duration=c.fx.off?0:typeof f.duration===
"number"?f.duration:c.fx.speeds[f.duration]||c.fx.speeds._default;f.old=f.complete;f.complete=function(){f.queue!==false&&c(this).dequeue();c.isFunction(f.old)&&f.old.call(this)};return f},easing:{linear:function(a,b,d,f){return d+f*a},swing:function(a,b,d,f){return(-Math.cos(a*Math.PI)/2+0.5)*f+d}},timers:[],fx:function(a,b,d){this.options=b;this.elem=a;this.prop=d;if(!b.orig)b.orig={}}});c.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(c.fx.step[this.prop]||
c.fx.step._default)(this);if((this.prop==="height"||this.prop==="width")&&this.elem.style)this.elem.style.display="block"},cur:function(a){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];return(a=parseFloat(c.css(this.elem,this.prop,a)))&&a>-10000?a:parseFloat(c.curCSS(this.elem,this.prop))||0},custom:function(a,b,d){function f(j){return e.step(j)}this.startTime=J();this.start=a;this.end=b;this.unit=d||this.unit||"px";this.now=this.start;
this.pos=this.state=0;var e=this;f.elem=this.elem;if(f()&&c.timers.push(f)&&!W)W=setInterval(c.fx.tick,13)},show:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());c(this.elem).show()},hide:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(a){var b=J(),d=true;if(a||b>=this.options.duration+this.startTime){this.now=
this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var f in this.options.curAnim)if(this.options.curAnim[f]!==true)d=false;if(d){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;a=c.data(this.elem,"olddisplay");this.elem.style.display=a?a:this.options.display;if(c.css(this.elem,"display")==="none")this.elem.style.display="block"}this.options.hide&&c(this.elem).hide();if(this.options.hide||this.options.show)for(var e in this.options.curAnim)c.style(this.elem,
e,this.options.orig[e]);this.options.complete.call(this.elem)}return false}else{e=b-this.startTime;this.state=e/this.options.duration;a=this.options.easing||(c.easing.swing?"swing":"linear");this.pos=c.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||a](this.state,e,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};c.extend(c.fx,{tick:function(){for(var a=c.timers,b=0;b<a.length;b++)a[b]()||a.splice(b--,1);a.length||
c.fx.stop()},stop:function(){clearInterval(W);W=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){c.style(a.elem,"opacity",a.now)},_default:function(a){if(a.elem.style&&a.elem.style[a.prop]!=null)a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit;else a.elem[a.prop]=a.now}}});if(c.expr&&c.expr.filters)c.expr.filters.animated=function(a){return c.grep(c.timers,function(b){return a===b.elem}).length};c.fn.offset="getBoundingClientRect"in s.documentElement?
function(a){var b=this[0];if(a)return this.each(function(e){c.offset.setOffset(this,a,e)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);var d=b.getBoundingClientRect(),f=b.ownerDocument;b=f.body;f=f.documentElement;return{top:d.top+(self.pageYOffset||c.support.boxModel&&f.scrollTop||b.scrollTop)-(f.clientTop||b.clientTop||0),left:d.left+(self.pageXOffset||c.support.boxModel&&f.scrollLeft||b.scrollLeft)-(f.clientLeft||b.clientLeft||0)}}:function(a){var b=
this[0];if(a)return this.each(function(r){c.offset.setOffset(this,a,r)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);c.offset.initialize();var d=b.offsetParent,f=b,e=b.ownerDocument,j,i=e.documentElement,o=e.body;f=(e=e.defaultView)?e.getComputedStyle(b,null):b.currentStyle;for(var k=b.offsetTop,n=b.offsetLeft;(b=b.parentNode)&&b!==o&&b!==i;){if(c.offset.supportsFixedPosition&&f.position==="fixed")break;j=e?e.getComputedStyle(b,null):b.currentStyle;
k-=b.scrollTop;n-=b.scrollLeft;if(b===d){k+=b.offsetTop;n+=b.offsetLeft;if(c.offset.doesNotAddBorder&&!(c.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(b.nodeName))){k+=parseFloat(j.borderTopWidth)||0;n+=parseFloat(j.borderLeftWidth)||0}f=d;d=b.offsetParent}if(c.offset.subtractsBorderForOverflowNotVisible&&j.overflow!=="visible"){k+=parseFloat(j.borderTopWidth)||0;n+=parseFloat(j.borderLeftWidth)||0}f=j}if(f.position==="relative"||f.position==="static"){k+=o.offsetTop;n+=o.offsetLeft}if(c.offset.supportsFixedPosition&&
f.position==="fixed"){k+=Math.max(i.scrollTop,o.scrollTop);n+=Math.max(i.scrollLeft,o.scrollLeft)}return{top:k,left:n}};c.offset={initialize:function(){var a=s.body,b=s.createElement("div"),d,f,e,j=parseFloat(c.curCSS(a,"marginTop",true))||0;c.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});b.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
a.insertBefore(b,a.firstChild);d=b.firstChild;f=d.firstChild;e=d.nextSibling.firstChild.firstChild;this.doesNotAddBorder=f.offsetTop!==5;this.doesAddBorderForTableAndCells=e.offsetTop===5;f.style.position="fixed";f.style.top="20px";this.supportsFixedPosition=f.offsetTop===20||f.offsetTop===15;f.style.position=f.style.top="";d.style.overflow="hidden";d.style.position="relative";this.subtractsBorderForOverflowNotVisible=f.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==j;a.removeChild(b);
c.offset.initialize=c.noop},bodyOffset:function(a){var b=a.offsetTop,d=a.offsetLeft;c.offset.initialize();if(c.offset.doesNotIncludeMarginInBodyOffset){b+=parseFloat(c.curCSS(a,"marginTop",true))||0;d+=parseFloat(c.curCSS(a,"marginLeft",true))||0}return{top:b,left:d}},setOffset:function(a,b,d){if(/static/.test(c.curCSS(a,"position")))a.style.position="relative";var f=c(a),e=f.offset(),j=parseInt(c.curCSS(a,"top",true),10)||0,i=parseInt(c.curCSS(a,"left",true),10)||0;if(c.isFunction(b))b=b.call(a,
d,e);d={top:b.top-e.top+j,left:b.left-e.left+i};"using"in b?b.using.call(a,d):f.css(d)}};c.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),d=this.offset(),f=/^body|html$/i.test(b[0].nodeName)?{top:0,left:0}:b.offset();d.top-=parseFloat(c.curCSS(a,"marginTop",true))||0;d.left-=parseFloat(c.curCSS(a,"marginLeft",true))||0;f.top+=parseFloat(c.curCSS(b[0],"borderTopWidth",true))||0;f.left+=parseFloat(c.curCSS(b[0],"borderLeftWidth",true))||0;return{top:d.top-
f.top,left:d.left-f.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||s.body;a&&!/^body|html$/i.test(a.nodeName)&&c.css(a,"position")==="static";)a=a.offsetParent;return a})}});c.each(["Left","Top"],function(a,b){var d="scroll"+b;c.fn[d]=function(f){var e=this[0],j;if(!e)return null;if(f!==w)return this.each(function(){if(j=wa(this))j.scrollTo(!a?f:c(j).scrollLeft(),a?f:c(j).scrollTop());else this[d]=f});else return(j=wa(e))?"pageXOffset"in j?j[a?"pageYOffset":
"pageXOffset"]:c.support.boxModel&&j.document.documentElement[d]||j.document.body[d]:e[d]}});c.each(["Height","Width"],function(a,b){var d=b.toLowerCase();c.fn["inner"+b]=function(){return this[0]?c.css(this[0],d,false,"padding"):null};c.fn["outer"+b]=function(f){return this[0]?c.css(this[0],d,false,f?"margin":"border"):null};c.fn[d]=function(f){var e=this[0];if(!e)return f==null?null:this;if(c.isFunction(f))return this.each(function(j){var i=c(this);i[d](f.call(this,j,i[d]()))});return"scrollTo"in
e&&e.document?e.document.compatMode==="CSS1Compat"&&e.document.documentElement["client"+b]||e.document.body["client"+b]:e.nodeType===9?Math.max(e.documentElement["client"+b],e.body["scroll"+b],e.documentElement["scroll"+b],e.body["offset"+b],e.documentElement["offset"+b]):f===w?c.css(e,d):this.css(d,typeof f==="string"?f:f+"px")}});A.jQuery=A.$=c})(window);

/*
 * jQuery Cycle Plugin (with Transition Definitions)
 * Examples and documentation at: http://jquery.malsup.com/cycle/
 * Copyright (c) 2007-2009 M. Alsup
 * Version: 2.73 (04-NOV-2009)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 * Requires: jQuery v1.2.6 or later
 *
 * Originally based on the work of:
 *	1) Matt Oakes
 *	2) Torsten Baldes (http://medienfreunde.com/lab/innerfade/)
 *	3) Benjamin Sterling (http://www.benjaminsterling.com/experiments/jqShuffle/)
 */
(function(i){var l="2.73";if(i.support==undefined){i.support={opacity:!(i.browser.msie)}}function a(q){if(i.fn.cycle.debug){f(q)}}function f(){if(window.console&&window.console.log){window.console.log("[cycle] "+Array.prototype.join.call(arguments," "))}}i.fn.cycle=function(r,q){var s={s:this.selector,c:this.context};if(this.length===0&&r!="stop"){if(!i.isReady&&s.s){f("DOM not ready, queuing slideshow");i(function(){i(s.s,s.c).cycle(r,q)});return this}f("terminating; zero elements found by selector"+(i.isReady?"":" (DOM not ready)"));return this}return this.each(function(){var w=m(this,r,q);if(w===false){return}if(this.cycleTimeout){clearTimeout(this.cycleTimeout)}this.cycleTimeout=this.cyclePause=0;var x=i(this);var y=w.slideExpr?i(w.slideExpr,this):x.children();var u=y.get();if(u.length<2){f("terminating; too few slides: "+u.length);return}var t=k(x,y,u,w,s);if(t===false){return}var v=t.continuous?10:h(t.currSlide,t.nextSlide,t,!t.rev);if(v){v+=(t.delay||0);if(v<10){v=10}a("first timeout: "+v);this.cycleTimeout=setTimeout(function(){e(u,t,0,!t.rev)},v)}})};function m(q,t,r){if(q.cycleStop==undefined){q.cycleStop=0}if(t===undefined||t===null){t={}}if(t.constructor==String){switch(t){case"stop":q.cycleStop++;if(q.cycleTimeout){clearTimeout(q.cycleTimeout)}q.cycleTimeout=0;i(q).removeData("cycle.opts");return false;case"pause":q.cyclePause=1;return false;case"resume":q.cyclePause=0;if(r===true){t=i(q).data("cycle.opts");if(!t){f("options not found, can not resume");return false}if(q.cycleTimeout){clearTimeout(q.cycleTimeout);q.cycleTimeout=0}e(t.elements,t,1,1)}return false;case"prev":case"next":var u=i(q).data("cycle.opts");if(!u){f('options not found, "prev/next" ignored');return false}i.fn.cycle[t](u);return false;default:t={fx:t}}return t}else{if(t.constructor==Number){var s=t;t=i(q).data("cycle.opts");if(!t){f("options not found, can not advance slide");return false}if(s<0||s>=t.elements.length){f("invalid slide index: "+s);return false}t.nextSlide=s;if(q.cycleTimeout){clearTimeout(q.cycleTimeout);q.cycleTimeout=0}if(typeof r=="string"){t.oneTimeFx=r}e(t.elements,t,1,s>=t.currSlide);return false}}return t}function b(q,r){if(!i.support.opacity&&r.cleartype&&q.style.filter){try{q.style.removeAttribute("filter")}catch(s){}}}function k(y,J,u,t,E){var C=i.extend({},i.fn.cycle.defaults,t||{},i.metadata?y.metadata():i.meta?y.data():{});if(C.autostop){C.countdown=C.autostopCount||u.length}var r=y[0];y.data("cycle.opts",C);C.$cont=y;C.stopCount=r.cycleStop;C.elements=u;C.before=C.before?[C.before]:[];C.after=C.after?[C.after]:[];C.after.unshift(function(){C.busy=0});if(!i.support.opacity&&C.cleartype){C.after.push(function(){b(this,C)})}if(C.continuous){C.after.push(function(){e(u,C,0,!C.rev)})}n(C);if(!i.support.opacity&&C.cleartype&&!C.cleartypeNoBg){g(J)}if(y.css("position")=="static"){y.css("position","relative")}if(C.width){y.width(C.width)}if(C.height&&C.height!="auto"){y.height(C.height)}if(C.startingSlide){C.startingSlide=parseInt(C.startingSlide)}if(C.random){C.randomMap=[];for(var H=0;H<u.length;H++){C.randomMap.push(H)}C.randomMap.sort(function(L,w){return Math.random()-0.5});C.randomIndex=0;C.startingSlide=C.randomMap[0]}else{if(C.startingSlide>=u.length){C.startingSlide=0}}C.currSlide=C.startingSlide=C.startingSlide||0;var x=C.startingSlide;J.css({position:"absolute",top:0,left:0}).hide().each(function(w){var L=x?w>=x?u.length-(w-x):x-w:u.length-w;i(this).css("z-index",L)});i(u[x]).css("opacity",1).show();b(u[x],C);if(C.fit&&C.width){J.width(C.width)}if(C.fit&&C.height&&C.height!="auto"){J.height(C.height)}var D=C.containerResize&&!y.innerHeight();if(D){var v=0,B=0;for(var F=0;F<u.length;F++){var q=i(u[F]),K=q[0],A=q.outerWidth(),I=q.outerHeight();if(!A){A=K.offsetWidth}if(!I){I=K.offsetHeight}v=A>v?A:v;B=I>B?I:B}if(v>0&&B>0){y.css({width:v+"px",height:B+"px"})}}if(C.pause){y.hover(function(){this.cyclePause++},function(){this.cyclePause--})}if(c(C)===false){return false}var s=false;t.requeueAttempts=t.requeueAttempts||0;J.each(function(){var N=i(this);this.cycleH=(C.fit&&C.height)?C.height:N.height();this.cycleW=(C.fit&&C.width)?C.width:N.width();if(N.is("img")){var L=(i.browser.msie&&this.cycleW==28&&this.cycleH==30&&!this.complete);var O=(i.browser.mozilla&&this.cycleW==34&&this.cycleH==19&&!this.complete);var M=(i.browser.opera&&((this.cycleW==42&&this.cycleH==19)||(this.cycleW==37&&this.cycleH==17))&&!this.complete);var w=(this.cycleH==0&&this.cycleW==0&&!this.complete);if(L||O||M||w){if(E.s&&C.requeueOnImageNotLoaded&&++t.requeueAttempts<100){f(t.requeueAttempts," - img slide not loaded, requeuing slideshow: ",this.src,this.cycleW,this.cycleH);setTimeout(function(){i(E.s,E.c).cycle(t)},C.requeueTimeout);s=true;return false}else{f("could not determine size of image: "+this.src,this.cycleW,this.cycleH)}}}return true});if(s){return false}C.cssBefore=C.cssBefore||{};C.animIn=C.animIn||{};C.animOut=C.animOut||{};J.not(":eq("+x+")").css(C.cssBefore);if(C.cssFirst){i(J[x]).css(C.cssFirst)}if(C.timeout){C.timeout=parseInt(C.timeout);if(C.speed.constructor==String){C.speed=i.fx.speeds[C.speed]||parseInt(C.speed)}if(!C.sync){C.speed=C.speed/2}while((C.timeout-C.speed)<250){C.timeout+=C.speed}}if(C.easing){C.easeIn=C.easeOut=C.easing}if(!C.speedIn){C.speedIn=C.speed}if(!C.speedOut){C.speedOut=C.speed}C.slideCount=u.length;C.currSlide=C.lastSlide=x;if(C.random){C.nextSlide=C.currSlide;if(++C.randomIndex==u.length){C.randomIndex=0}C.nextSlide=C.randomMap[C.randomIndex]}else{C.nextSlide=C.startingSlide>=(u.length-1)?0:C.startingSlide+1}if(!C.multiFx){var G=i.fn.cycle.transitions[C.fx];if(i.isFunction(G)){G(y,J,C)}else{if(C.fx!="custom"&&!C.multiFx){f("unknown transition: "+C.fx,"; slideshow terminating");return false}}}var z=J[x];if(C.before.length){C.before[0].apply(z,[z,z,C,true])}if(C.after.length>1){C.after[1].apply(z,[z,z,C,true])}if(C.next){i(C.next).bind(C.prevNextEvent,function(){return o(C,C.rev?-1:1)})}if(C.prev){i(C.prev).bind(C.prevNextEvent,function(){return o(C,C.rev?1:-1)})}if(C.pager){d(u,C)}j(C,u);return C}function n(q){q.original={before:[],after:[]};q.original.cssBefore=i.extend({},q.cssBefore);q.original.cssAfter=i.extend({},q.cssAfter);q.original.animIn=i.extend({},q.animIn);q.original.animOut=i.extend({},q.animOut);i.each(q.before,function(){q.original.before.push(this)});i.each(q.after,function(){q.original.after.push(this)})}function c(w){var u,s,r=i.fn.cycle.transitions;if(w.fx.indexOf(",")>0){w.multiFx=true;w.fxs=w.fx.replace(/\s*/g,"").split(",");for(u=0;u<w.fxs.length;u++){var v=w.fxs[u];s=r[v];if(!s||!r.hasOwnProperty(v)||!i.isFunction(s)){f("discarding unknown transition: ",v);w.fxs.splice(u,1);u--}}if(!w.fxs.length){f("No valid transitions named; slideshow terminating.");return false}}else{if(w.fx=="all"){w.multiFx=true;w.fxs=[];for(p in r){s=r[p];if(r.hasOwnProperty(p)&&i.isFunction(s)){w.fxs.push(p)}}}}if(w.multiFx&&w.randomizeEffects){var t=Math.floor(Math.random()*20)+30;for(u=0;u<t;u++){var q=Math.floor(Math.random()*w.fxs.length);w.fxs.push(w.fxs.splice(q,1)[0])}a("randomized fx sequence: ",w.fxs)}return true}function j(r,q){r.addSlide=function(u,v){var t=i(u),w=t[0];if(!r.autostopCount){r.countdown++}q[v?"unshift":"push"](w);if(r.els){r.els[v?"unshift":"push"](w)}r.slideCount=q.length;t.css("position","absolute");t[v?"prependTo":"appendTo"](r.$cont);if(v){r.currSlide++;r.nextSlide++}if(!i.support.opacity&&r.cleartype&&!r.cleartypeNoBg){g(t)}if(r.fit&&r.width){t.width(r.width)}if(r.fit&&r.height&&r.height!="auto"){$slides.height(r.height)}w.cycleH=(r.fit&&r.height)?r.height:t.height();w.cycleW=(r.fit&&r.width)?r.width:t.width();t.css(r.cssBefore);if(r.pager){i.fn.cycle.createPagerAnchor(q.length-1,w,i(r.pager),q,r)}if(i.isFunction(r.onAddSlide)){r.onAddSlide(t)}else{t.hide()}}}i.fn.cycle.resetState=function(r,q){q=q||r.fx;r.before=[];r.after=[];r.cssBefore=i.extend({},r.original.cssBefore);r.cssAfter=i.extend({},r.original.cssAfter);r.animIn=i.extend({},r.original.animIn);r.animOut=i.extend({},r.original.animOut);r.fxFn=null;i.each(r.original.before,function(){r.before.push(this)});i.each(r.original.after,function(){r.after.push(this)});var s=i.fn.cycle.transitions[q];if(i.isFunction(s)){s(r.$cont,i(r.elements),r)}};function e(x,q,w,y){if(w&&q.busy&&q.manualTrump){i(x).stop(true,true);q.busy=false}if(q.busy){return}var u=q.$cont[0],A=x[q.currSlide],z=x[q.nextSlide];if(u.cycleStop!=q.stopCount||u.cycleTimeout===0&&!w){return}if(!w&&!u.cyclePause&&((q.autostop&&(--q.countdown<=0))||(q.nowrap&&!q.random&&q.nextSlide<q.currSlide))){if(q.end){q.end(q)}return}if(w||!u.cyclePause){var v=q.fx;A.cycleH=A.cycleH||i(A).height();A.cycleW=A.cycleW||i(A).width();z.cycleH=z.cycleH||i(z).height();z.cycleW=z.cycleW||i(z).width();if(q.multiFx){if(q.lastFx==undefined||++q.lastFx>=q.fxs.length){q.lastFx=0}v=q.fxs[q.lastFx];q.currFx=v}if(q.oneTimeFx){v=q.oneTimeFx;q.oneTimeFx=null}i.fn.cycle.resetState(q,v);if(q.before.length){i.each(q.before,function(B,C){if(u.cycleStop!=q.stopCount){return}C.apply(z,[A,z,q,y])})}var s=function(){i.each(q.after,function(B,C){if(u.cycleStop!=q.stopCount){return}C.apply(z,[A,z,q,y])})};if(q.nextSlide!=q.currSlide){q.busy=1;if(q.fxFn){q.fxFn(A,z,q,s,y)}else{if(i.isFunction(i.fn.cycle[q.fx])){i.fn.cycle[q.fx](A,z,q,s)}else{i.fn.cycle.custom(A,z,q,s,w&&q.fastOnEvent)}}}q.lastSlide=q.currSlide;if(q.random){q.currSlide=q.nextSlide;if(++q.randomIndex==x.length){q.randomIndex=0}q.nextSlide=q.randomMap[q.randomIndex]}else{var t=(q.nextSlide+1)==x.length;q.nextSlide=t?0:q.nextSlide+1;q.currSlide=t?x.length-1:q.nextSlide-1}if(q.pager){i.fn.cycle.updateActivePagerLink(q.pager,q.currSlide)}}var r=0;if(q.timeout&&!q.continuous){r=h(A,z,q,y)}else{if(q.continuous&&u.cyclePause){r=10}}if(r>0){u.cycleTimeout=setTimeout(function(){e(x,q,0,!q.rev)},r)}}i.fn.cycle.updateActivePagerLink=function(q,r){i(q).each(function(){i(this).find("a").removeClass("activeSlide").filter("a:eq("+r+")").addClass("activeSlide")})};function h(v,s,u,r){if(u.timeoutFn){var q=u.timeoutFn(v,s,u,r);while((q-u.speed)<250){q+=u.speed}a("calculated timeout: "+q+"; speed: "+u.speed);if(q!==false){return q}}return u.timeout}i.fn.cycle.next=function(q){o(q,q.rev?-1:1)};i.fn.cycle.prev=function(q){o(q,q.rev?1:-1)};function o(r,u){var q=r.elements;var t=r.$cont[0],s=t.cycleTimeout;if(s){clearTimeout(s);t.cycleTimeout=0}if(r.random&&u<0){r.randomIndex--;if(--r.randomIndex==-2){r.randomIndex=q.length-2}else{if(r.randomIndex==-1){r.randomIndex=q.length-1}}r.nextSlide=r.randomMap[r.randomIndex]}else{if(r.random){if(++r.randomIndex==q.length){r.randomIndex=0}r.nextSlide=r.randomMap[r.randomIndex]}else{r.nextSlide=r.currSlide+u;if(r.nextSlide<0){if(r.nowrap){return false}r.nextSlide=q.length-1}else{if(r.nextSlide>=q.length){if(r.nowrap){return false}r.nextSlide=0}}}}if(i.isFunction(r.prevNextClick)){r.prevNextClick(u>0,r.nextSlide,q[r.nextSlide])}e(q,r,1,u>=0);return false}function d(r,s){var q=i(s.pager);i.each(r,function(t,u){i.fn.cycle.createPagerAnchor(t,u,q,r,s)});i.fn.cycle.updateActivePagerLink(s.pager,s.startingSlide)}i.fn.cycle.createPagerAnchor=function(u,v,s,t,w){var r;if(i.isFunction(w.pagerAnchorBuilder)){r=w.pagerAnchorBuilder(u,v)}else{r='<a href="#">'+(u+1)+"</a>"}if(!r){return}var x=i(r);if(x.parents("body").length===0){var q=[];if(s.length>1){s.each(function(){var y=x.clone(true);i(this).append(y);q.push(y[0])});x=i(q)}else{x.appendTo(s)}}x.bind(w.pagerEvent,function(A){A.preventDefault();w.nextSlide=u;var z=w.$cont[0],y=z.cycleTimeout;if(y){clearTimeout(y);z.cycleTimeout=0}if(i.isFunction(w.pagerClick)){w.pagerClick(w.nextSlide,t[w.nextSlide])}e(t,w,1,w.currSlide<u);return false});if(w.pagerEvent!="click"){x.click(function(){return false})}if(w.pauseOnPagerHover){x.hover(function(){w.$cont[0].cyclePause++},function(){w.$cont[0].cyclePause--})}};i.fn.cycle.hopsFromLast=function(t,s){var r,q=t.lastSlide,u=t.currSlide;if(s){r=u>q?u-q:t.slideCount-q}else{r=u<q?q-u:q+t.slideCount-u}return r};function g(s){function r(t){t=parseInt(t).toString(16);return t.length<2?"0"+t:t}function q(w){for(;w&&w.nodeName.toLowerCase()!="html";w=w.parentNode){var t=i.css(w,"background-color");if(t.indexOf("rgb")>=0){var u=t.match(/\d+/g);return"#"+r(u[0])+r(u[1])+r(u[2])}if(t&&t!="transparent"){return t}}return"#ffffff"}s.each(function(){i(this).css("background-color",q(this))})}i.fn.cycle.commonReset=function(v,t,u,r,s,q){i(u.elements).not(v).hide();u.cssBefore.opacity=1;u.cssBefore.display="block";if(r!==false&&t.cycleW>0){u.cssBefore.width=t.cycleW}if(s!==false&&t.cycleH>0){u.cssBefore.height=t.cycleH}u.cssAfter=u.cssAfter||{};u.cssAfter.display="none";i(v).css("zIndex",u.slideCount+(q===true?1:0));i(t).css("zIndex",u.slideCount+(q===true?0:1))};i.fn.cycle.custom=function(B,v,q,s,r){var A=i(B),w=i(v);var t=q.speedIn,z=q.speedOut,u=q.easeIn,y=q.easeOut;w.css(q.cssBefore);if(r){if(typeof r=="number"){t=z=r}else{t=z=1}u=y=null}var x=function(){w.animate(q.animIn,t,u,s)};A.animate(q.animOut,z,y,function(){if(q.cssAfter){A.css(q.cssAfter)}if(!q.sync){x()}});if(q.sync){x()}};i.fn.cycle.transitions={fade:function(r,s,q){s.not(":eq("+q.currSlide+")").css("opacity",0);q.before.push(function(v,t,u){i.fn.cycle.commonReset(v,t,u);u.cssBefore.opacity=0});q.animIn={opacity:1};q.animOut={opacity:0};q.cssBefore={top:0,left:0}}};i.fn.cycle.ver=function(){return l};i.fn.cycle.defaults={fx:"fade",timeout:4000,timeoutFn:null,continuous:0,speed:1000,speedIn:null,speedOut:null,next:null,prev:null,prevNextClick:null,prevNextEvent:"click",pager:null,pagerClick:null,pagerEvent:"click",pagerAnchorBuilder:null,before:null,after:null,end:null,easing:null,easeIn:null,easeOut:null,shuffle:null,animIn:null,animOut:null,cssBefore:null,cssAfter:null,fxFn:null,height:"auto",startingSlide:0,sync:1,random:0,fit:0,containerResize:1,pause:0,pauseOnPagerHover:0,autostop:0,autostopCount:0,delay:0,slideExpr:null,cleartype:!i.support.opacity,cleartypeNoBg:false,nowrap:0,fastOnEvent:0,randomizeEffects:1,rev:0,manualTrump:true,requeueOnImageNotLoaded:true,requeueTimeout:250}})(jQuery);
/*
 * jQuery jclock - Clock plugin - v 1.2.0
 * http://plugins.jquery.com/project/jclock
 *
 * Copyright (c) 2007-2008 Doug Sparling <http://www.dougsparling.com>
 * Licensed under the MIT License:
 *   http://www.opensource.org/licenses/mit-license.php
 */
(function($) {

  $.fn.jclock = function(options) {
    var version = '1.2.0';

    // options
    var opts = $.extend({}, $.fn.jclock.defaults, options);
         
    return this.each(function() {
      $this = $(this);
      $this.timerID = null;
      $this.running = false;

      var o = $.meta ? $.extend({}, opts, $this.data()) : opts;

      $this.timeNotation = o.timeNotation;
      $this.am_pm = o.am_pm;
      $this.utc = o.utc;
      $this.utc_offset = o.utc_offset;

      $this.css({
        fontFamily: o.fontFamily,
        fontSize: o.fontSize,
        backgroundColor: o.background,
        color: o.foreground
      });

      $.fn.jclock.startClock($this);

    });
  };
       
  $.fn.jclock.startClock = function(el) {
    $.fn.jclock.stopClock(el);
    $.fn.jclock.displayTime(el);
  }
  $.fn.jclock.stopClock = function(el) {
    if(el.running) {
      clearTimeout(el.timerID);
    }
    el.running = false;
  }
  $.fn.jclock.displayTime = function(el) {
    var time = $.fn.jclock.getTime(el);
    el.html(time);
    el.timerID = setTimeout(function(){$.fn.jclock.displayTime(el)},1000);
  }
  $.fn.jclock.getTime = function(el) {
    var now = new Date();
    var hours, minutes, seconds;

    if(el.utc == true) {
      var localTime = now.getTime();
      var localOffset = now.getTimezoneOffset() * 60000;
      var utc = localTime + localOffset;
      var utcTime = utc + (3600000 * el.utc_offset);
      now = new Date(utcTime);
    }
    hours = now.getHours();
    minutes = now.getMinutes();
    seconds = now.getSeconds();

    var am_pm_text = '';
    (hours >= 12) ? am_pm_text = " P.M." : am_pm_text = " A.M.";

    if (el.timeNotation == '12h') {
      hours = ((hours > 12) ? hours - 12 : hours);
    } else if (el.timeNotation == '12hh') {
      hours = ((hours > 12) ? hours - 12 : hours);
      hours   = ((hours <  10) ? "0" : "") + hours;
    } else {
      hours   = ((hours <  10) ? "0" : "") + hours;
    }

    minutes = ((minutes <  10) ? "0" : "") + minutes;
    seconds = ((seconds <  10) ? "0" : "") + seconds;

    var timeNow = hours + ":" + minutes + ":" + seconds;
    if ( (el.timeNotation == '12h' || el.timeNotation == '12hh') && (el.am_pm == true) ) {
     timeNow += am_pm_text;
    }

    return timeNow;
  };
       
  // plugin defaults
  $.fn.jclock.defaults = {
    timeNotation: '24h',
    am_pm: false,
    utc: false,
    fontFamily: '',
    fontSize: '',
    foreground: '',
    background: '',
    utc_offset: 0
  };

})(jQuery);
/*
 * Shadowbox.js, version 3.0.3
 * http://shadowbox-js.com/
 *
 * Copyright 2007-2010, Michael J. I. Jackson
 * Date: 2011-05-14 20:50:20 +0000
 */
(function(window,undefined){var S={version:"3.0.3"};var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("windows")>-1||ua.indexOf("win32")>-1){S.isWindows=true}else{if(ua.indexOf("macintosh")>-1||ua.indexOf("mac os x")>-1){S.isMac=true}else{if(ua.indexOf("linux")>-1){S.isLinux=true}}}S.isIE=ua.indexOf("msie")>-1;S.isIE6=ua.indexOf("msie 6")>-1;S.isIE7=ua.indexOf("msie 7")>-1;S.isGecko=ua.indexOf("gecko")>-1&&ua.indexOf("safari")==-1;S.isWebKit=ua.indexOf("applewebkit/")>-1;var inlineId=/#(.+)$/,galleryName=/^(light|shadow)box\[(.*?)\]/i,inlineParam=/\s*([a-z_]*?)\s*=\s*(.+)\s*/,fileExtension=/[0-9a-z]+$/i,scriptPath=/(.+\/)shadowbox\.js/i;var open=false,initialized=false,lastOptions={},slideDelay=0,slideStart,slideTimer;S.current=-1;S.dimensions=null;S.ease=function(state){return 1+Math.pow(state-1,3)};S.errorInfo={fla:{name:"Flash",url:"http://www.adobe.com/products/flashplayer/"},qt:{name:"QuickTime",url:"http://www.apple.com/quicktime/download/"},wmp:{name:"Windows Media Player",url:"http://www.microsoft.com/windows/windowsmedia/"},f4m:{name:"Flip4Mac",url:"http://www.flip4mac.com/wmv_download.htm"}};S.gallery=[];S.onReady=noop;S.path=null;S.player=null;S.playerId="sb-player";S.options={animate:true,animateFade:true,autoplayMovies:true,continuous:false,enableKeys:true,flashParams:{bgcolor:"#000000",allowfullscreen:true},flashVars:{},flashVersion:"9.0.115",handleOversize:"resize",handleUnsupported:"link",onChange:noop,onClose:noop,onFinish:noop,onOpen:noop,showMovieControls:true,skipSetup:false,slideshowDelay:0,viewportPadding:20};S.getCurrent=function(){return S.current>-1?S.gallery[S.current]:null};S.hasNext=function(){return S.gallery.length>1&&(S.current!=S.gallery.length-1||S.options.continuous)};S.isOpen=function(){return open};S.isPaused=function(){return slideTimer=="pause"};S.applyOptions=function(options){lastOptions=apply({},S.options);apply(S.options,options)};S.revertOptions=function(){apply(S.options,lastOptions)};S.init=function(options,callback){if(initialized){return}initialized=true;if(S.skin.options){apply(S.options,S.skin.options)}if(options){apply(S.options,options)}if(!S.path){var path,scripts=document.getElementsByTagName("script");for(var i=0,len=scripts.length;i<len;++i){path=scriptPath.exec(scripts[i].src);if(path){S.path=path[1];break}}}if(callback){S.onReady=callback}bindLoad()};S.open=function(obj){if(open){return}var gc=S.makeGallery(obj);S.gallery=gc[0];S.current=gc[1];obj=S.getCurrent();if(obj==null){return}S.applyOptions(obj.options||{});filterGallery();if(S.gallery.length){obj=S.getCurrent();if(S.options.onOpen(obj)===false){return}open=true;S.skin.onOpen(obj,load)}};S.close=function(){if(!open){return}open=false;if(S.player){S.player.remove();S.player=null}if(typeof slideTimer=="number"){clearTimeout(slideTimer);slideTimer=null}slideDelay=0;listenKeys(false);S.options.onClose(S.getCurrent());S.skin.onClose();S.revertOptions()};S.play=function(){if(!S.hasNext()){return}if(!slideDelay){slideDelay=S.options.slideshowDelay*1000}if(slideDelay){slideStart=now();slideTimer=setTimeout(function(){slideDelay=slideStart=0;S.next()},slideDelay);if(S.skin.onPlay){S.skin.onPlay()}}};S.pause=function(){if(typeof slideTimer!="number"){return}slideDelay=Math.max(0,slideDelay-(now()-slideStart));if(slideDelay){clearTimeout(slideTimer);slideTimer="pause";if(S.skin.onPause){S.skin.onPause()}}};S.change=function(index){if(!(index in S.gallery)){if(S.options.continuous){index=(index<0?S.gallery.length+index:0);if(!(index in S.gallery)){return}}else{return}}S.current=index;if(typeof slideTimer=="number"){clearTimeout(slideTimer);slideTimer=null;slideDelay=slideStart=0}S.options.onChange(S.getCurrent());load(true)};S.next=function(){S.change(S.current+1)};S.previous=function(){S.change(S.current-1)};S.setDimensions=function(height,width,maxHeight,maxWidth,topBottom,leftRight,padding,preserveAspect){var originalHeight=height,originalWidth=width;var extraHeight=2*padding+topBottom;if(height+extraHeight>maxHeight){height=maxHeight-extraHeight}var extraWidth=2*padding+leftRight;if(width+extraWidth>maxWidth){width=maxWidth-extraWidth}var changeHeight=(originalHeight-height)/originalHeight,changeWidth=(originalWidth-width)/originalWidth,oversized=(changeHeight>0||changeWidth>0);if(preserveAspect&&oversized){if(changeHeight>changeWidth){width=Math.round((originalWidth/originalHeight)*height)}else{if(changeWidth>changeHeight){height=Math.round((originalHeight/originalWidth)*width)}}}S.dimensions={height:height+topBottom,width:width+leftRight,innerHeight:height,innerWidth:width,top:Math.floor((maxHeight-(height+extraHeight))/2+padding),left:Math.floor((maxWidth-(width+extraWidth))/2+padding),oversized:oversized};return S.dimensions};S.makeGallery=function(obj){var gallery=[],current=-1;if(typeof obj=="string"){obj=[obj]}if(typeof obj.length=="number"){each(obj,function(i,o){if(o.content){gallery[i]=o}else{gallery[i]={content:o}}});current=0}else{if(obj.tagName){var cacheObj=S.getCache(obj);obj=cacheObj?cacheObj:S.makeObject(obj)}if(obj.gallery){gallery=[];var o;for(var key in S.cache){o=S.cache[key];if(o.gallery&&o.gallery==obj.gallery){if(current==-1&&o.content==obj.content){current=gallery.length}gallery.push(o)}}if(current==-1){gallery.unshift(obj);current=0}}else{gallery=[obj];current=0}}each(gallery,function(i,o){gallery[i]=apply({},o)});return[gallery,current]};S.makeObject=function(link,options){var obj={content:link.href,title:link.getAttribute("title")||"",link:link};if(options){options=apply({},options);each(["player","title","height","width","gallery"],function(i,o){if(typeof options[o]!="undefined"){obj[o]=options[o];delete options[o]}});obj.options=options}else{obj.options={}}if(!obj.player){obj.player=S.getPlayer(obj.content)}var rel=link.getAttribute("rel");if(rel){var match=rel.match(galleryName);if(match){obj.gallery=escape(match[2])}each(rel.split(";"),function(i,p){match=p.match(inlineParam);if(match){obj[match[1]]=match[2]}})}return obj};S.getPlayer=function(content){if(content.indexOf("#")>-1&&content.indexOf(document.location.href)==0){return"inline"}var q=content.indexOf("?");if(q>-1){content=content.substring(0,q)}var ext,m=content.match(fileExtension);if(m){ext=m[0].toLowerCase()}if(ext){if(S.img&&S.img.ext.indexOf(ext)>-1){return"img"}if(S.swf&&S.swf.ext.indexOf(ext)>-1){return"swf"}if(S.flv&&S.flv.ext.indexOf(ext)>-1){return"flv"}if(S.qt&&S.qt.ext.indexOf(ext)>-1){if(S.wmp&&S.wmp.ext.indexOf(ext)>-1){return"qtwmp"}else{return"qt"}}if(S.wmp&&S.wmp.ext.indexOf(ext)>-1){return"wmp"}}return"iframe"};function filterGallery(){var err=S.errorInfo,plugins=S.plugins,obj,remove,needed,m,format,replace,inlineEl,flashVersion;for(var i=0;i<S.gallery.length;++i){obj=S.gallery[i];remove=false;needed=null;switch(obj.player){case"flv":case"swf":if(!plugins.fla){needed="fla"}break;case"qt":if(!plugins.qt){needed="qt"}break;case"wmp":if(S.isMac){if(plugins.qt&&plugins.f4m){obj.player="qt"}else{needed="qtf4m"}}else{if(!plugins.wmp){needed="wmp"}}break;case"qtwmp":if(plugins.qt){obj.player="qt"}else{if(plugins.wmp){obj.player="wmp"}else{needed="qtwmp"}}break}if(needed){if(S.options.handleUnsupported=="link"){switch(needed){case"qtf4m":format="shared";replace=[err.qt.url,err.qt.name,err.f4m.url,err.f4m.name];break;case"qtwmp":format="either";replace=[err.qt.url,err.qt.name,err.wmp.url,err.wmp.name];break;default:format="single";replace=[err[needed].url,err[needed].name]}obj.player="html";obj.content='<div class="sb-message">'+sprintf(S.lang.errors[format],replace)+"</div>"}else{remove=true}}else{if(obj.player=="inline"){m=inlineId.exec(obj.content);if(m){inlineEl=get(m[1]);if(inlineEl){obj.content=inlineEl.innerHTML}else{remove=true}}else{remove=true}}else{if(obj.player=="swf"||obj.player=="flv"){flashVersion=(obj.options&&obj.options.flashVersion)||S.options.flashVersion;if(S.flash&&!S.flash.hasFlashPlayerVersion(flashVersion)){obj.width=310;obj.height=177}}}}if(remove){S.gallery.splice(i,1);if(i<S.current){--S.current}else{if(i==S.current){S.current=i>0?i-1:i}}--i}}}function listenKeys(on){if(!S.options.enableKeys){return}(on?addEvent:removeEvent)(document,"keydown",handleKey)}function handleKey(e){if(e.metaKey||e.shiftKey||e.altKey||e.ctrlKey){return}var code=keyCode(e),handler;switch(code){case 81:case 88:case 27:handler=S.close;break;case 37:handler=S.previous;break;case 39:handler=S.next;break;case 32:handler=typeof slideTimer=="number"?S.pause:S.play;break}if(handler){preventDefault(e);handler()}}function load(changing){listenKeys(false);var obj=S.getCurrent();var player=(obj.player=="inline"?"html":obj.player);if(typeof S[player]!="function"){throw"unknown player "+player}if(changing){S.player.remove();S.revertOptions();S.applyOptions(obj.options||{})}S.player=new S[player](obj,S.playerId);if(S.gallery.length>1){var next=S.gallery[S.current+1]||S.gallery[0];if(next.player=="img"){var a=new Image();a.src=next.content}var prev=S.gallery[S.current-1]||S.gallery[S.gallery.length-1];if(prev.player=="img"){var b=new Image();b.src=prev.content}}S.skin.onLoad(changing,waitReady)}function waitReady(){if(!open){return}if(typeof S.player.ready!="undefined"){var timer=setInterval(function(){if(open){if(S.player.ready){clearInterval(timer);timer=null;S.skin.onReady(show)}}else{clearInterval(timer);timer=null}},10)}else{S.skin.onReady(show)}}function show(){if(!open){return}S.player.append(S.skin.body,S.dimensions);S.skin.onShow(finish)}function finish(){if(!open){return}if(S.player.onLoad){S.player.onLoad()}S.options.onFinish(S.getCurrent());if(!S.isPaused()){S.play()}listenKeys(true)}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(obj,from){var len=this.length>>>0;from=from||0;if(from<0){from+=len}for(;from<len;++from){if(from in this&&this[from]===obj){return from}}return -1}}function now(){return(new Date).getTime()}function apply(original,extension){for(var property in extension){original[property]=extension[property]}return original}function each(obj,callback){var i=0,len=obj.length;for(var value=obj[0];i<len&&callback.call(value,i,value)!==false;value=obj[++i]){}}function sprintf(str,replace){return str.replace(/\{(\w+?)\}/g,function(match,i){return replace[i]})}function noop(){}function get(id){return document.getElementById(id)}function remove(el){el.parentNode.removeChild(el)}var supportsOpacity=true,supportsFixed=true;function checkSupport(){var body=document.body,div=document.createElement("div");supportsOpacity=typeof div.style.opacity==="string";div.style.position="fixed";div.style.margin=0;div.style.top="20px";body.appendChild(div,body.firstChild);supportsFixed=div.offsetTop==20;body.removeChild(div)}S.getStyle=(function(){var opacity=/opacity=([^)]*)/,getComputedStyle=document.defaultView&&document.defaultView.getComputedStyle;return function(el,style){var ret;if(!supportsOpacity&&style=="opacity"&&el.currentStyle){ret=opacity.test(el.currentStyle.filter||"")?(parseFloat(RegExp.$1)/100)+"":"";return ret===""?"1":ret}if(getComputedStyle){var computedStyle=getComputedStyle(el,null);if(computedStyle){ret=computedStyle[style]}if(style=="opacity"&&ret==""){ret="1"}}else{ret=el.currentStyle[style]}return ret}})();S.appendHTML=function(el,html){if(el.insertAdjacentHTML){el.insertAdjacentHTML("BeforeEnd",html)}else{if(el.lastChild){var range=el.ownerDocument.createRange();range.setStartAfter(el.lastChild);var frag=range.createContextualFragment(html);el.appendChild(frag)}else{el.innerHTML=html}}};S.getWindowSize=function(dimension){if(document.compatMode==="CSS1Compat"){return document.documentElement["client"+dimension]}return document.body["client"+dimension]};S.setOpacity=function(el,opacity){var style=el.style;if(supportsOpacity){style.opacity=(opacity==1?"":opacity)}else{style.zoom=1;if(opacity==1){if(typeof style.filter=="string"&&(/alpha/i).test(style.filter)){style.filter=style.filter.replace(/\s*[\w\.]*alpha\([^\)]*\);?/gi,"")}}else{style.filter=(style.filter||"").replace(/\s*[\w\.]*alpha\([^\)]*\)/gi,"")+" alpha(opacity="+(opacity*100)+")"}}};S.clearOpacity=function(el){S.setOpacity(el,1)};function getTarget(e){var target=e.target?e.target:e.srcElement;return target.nodeType==3?target.parentNode:target}function getPageXY(e){var x=e.pageX||(e.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)),y=e.pageY||(e.clientY+(document.documentElement.scrollTop||document.body.scrollTop));return[x,y]}function preventDefault(e){e.preventDefault()}function keyCode(e){return e.which?e.which:e.keyCode}function addEvent(el,type,handler){if(el.addEventListener){el.addEventListener(type,handler,false)}else{if(el.nodeType===3||el.nodeType===8){return}if(el.setInterval&&(el!==window&&!el.frameElement)){el=window}if(!handler.__guid){handler.__guid=addEvent.guid++}if(!el.events){el.events={}}var handlers=el.events[type];if(!handlers){handlers=el.events[type]={};if(el["on"+type]){handlers[0]=el["on"+type]}}handlers[handler.__guid]=handler;el["on"+type]=addEvent.handleEvent}}addEvent.guid=1;addEvent.handleEvent=function(event){var result=true;event=event||addEvent.fixEvent(((this.ownerDocument||this.document||this).parentWindow||window).event);var handlers=this.events[event.type];for(var i in handlers){this.__handleEvent=handlers[i];if(this.__handleEvent(event)===false){result=false}}return result};addEvent.preventDefault=function(){this.returnValue=false};addEvent.stopPropagation=function(){this.cancelBubble=true};addEvent.fixEvent=function(e){e.preventDefault=addEvent.preventDefault;e.stopPropagation=addEvent.stopPropagation;return e};function removeEvent(el,type,handler){if(el.removeEventListener){el.removeEventListener(type,handler,false)}else{if(el.events&&el.events[type]){delete el.events[type][handler.__guid]}}}var loaded=false,DOMContentLoaded;if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);S.load()}}else{if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);S.load()}}}}function doScrollCheck(){if(loaded){return}try{document.documentElement.doScroll("left")}catch(e){setTimeout(doScrollCheck,1);return}S.load()}function bindLoad(){if(document.readyState==="complete"){return S.load()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",S.load,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",S.load);var topLevel=false;try{topLevel=window.frameElement===null}catch(e){}if(document.documentElement.doScroll&&topLevel){doScrollCheck()}}}}S.load=function(){if(loaded){return}if(!document.body){return setTimeout(S.load,13)}loaded=true;checkSupport();S.onReady();if(!S.options.skipSetup){S.setup()}S.skin.init()};S.plugins={};if(navigator.plugins&&navigator.plugins.length){var names=[];each(navigator.plugins,function(i,p){names.push(p.name)});names=names.join(",");var f4m=names.indexOf("Flip4Mac")>-1;S.plugins={fla:names.indexOf("Shockwave Flash")>-1,qt:names.indexOf("QuickTime")>-1,wmp:!f4m&&names.indexOf("Windows Media")>-1,f4m:f4m}}else{var detectPlugin=function(name){var axo;try{axo=new ActiveXObject(name)}catch(e){}return !!axo};S.plugins={fla:detectPlugin("ShockwaveFlash.ShockwaveFlash"),qt:detectPlugin("QuickTime.QuickTime"),wmp:detectPlugin("wmplayer.ocx"),f4m:false}}var relAttr=/^(light|shadow)box/i,expando="shadowboxCacheKey",cacheKey=1;S.cache={};S.select=function(selector){var links=[];if(!selector){var rel;each(document.getElementsByTagName("a"),function(i,el){rel=el.getAttribute("rel");if(rel&&relAttr.test(rel)){links.push(el)}})}else{var length=selector.length;if(length){if(typeof selector=="string"){if(S.find){links=S.find(selector)}}else{if(length==2&&typeof selector[0]=="string"&&selector[1].nodeType){if(S.find){links=S.find(selector[0],selector[1])}}else{for(var i=0;i<length;++i){links[i]=selector[i]}}}}else{links.push(selector)}}return links};S.setup=function(selector,options){each(S.select(selector),function(i,link){S.addCache(link,options)})};S.teardown=function(selector){each(S.select(selector),function(i,link){S.removeCache(link)})};S.addCache=function(link,options){var key=link[expando];if(key==undefined){key=cacheKey++;link[expando]=key;addEvent(link,"click",handleClick)}S.cache[key]=S.makeObject(link,options)};S.removeCache=function(link){removeEvent(link,"click",handleClick);delete S.cache[link[expando]];link[expando]=null};S.getCache=function(link){var key=link[expando];return(key in S.cache&&S.cache[key])};S.clearCache=function(){for(var key in S.cache){S.removeCache(S.cache[key].link)}S.cache={}};function handleClick(e){S.open(this);if(S.gallery.length){preventDefault(e)}}
/*
 * Sizzle CSS Selector Engine - v1.0
 *  Copyright 2009, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 *
 * Modified for inclusion in Shadowbox.js
 */
S.find=(function(){var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,done=0,toString=Object.prototype.toString,hasDuplicate=false,baseHasDuplicate=true;[0,0].sort(function(){baseHasDuplicate=false;return 0});var Sizzle=function(selector,context,results,seed){results=results||[];var origContext=context=context||document;if(context.nodeType!==1&&context.nodeType!==9){return[]}if(!selector||typeof selector!=="string"){return results}var parts=[],m,set,checkSet,extra,prune=true,contextXML=isXML(context),soFar=selector;while((chunker.exec(""),m=chunker.exec(soFar))!==null){soFar=m[3];parts.push(m[1]);if(m[2]){extra=m[3];break}}if(parts.length>1&&origPOS.exec(selector)){if(parts.length===2&&Expr.relative[parts[0]]){set=posProcess(parts[0]+parts[1],context)}else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);while(parts.length){selector=parts.shift();if(Expr.relative[selector]){selector+=parts.shift()}set=posProcess(selector,set)}}}else{if(!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])){var ret=Sizzle.find(parts.shift(),context,contextXML);context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0]}if(context){var ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),parts.length===1&&(parts[0]==="~"||parts[0]==="+")&&context.parentNode?context.parentNode:context,contextXML);set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set;if(parts.length>0){checkSet=makeArray(set)}else{prune=false}while(parts.length){var cur=parts.pop(),pop=cur;if(!Expr.relative[cur]){cur=""}else{pop=parts.pop()}if(pop==null){pop=context}Expr.relative[cur](checkSet,pop,contextXML)}}else{checkSet=parts=[]}}if(!checkSet){checkSet=set}if(!checkSet){throw"Syntax error, unrecognized expression: "+(cur||selector)}if(toString.call(checkSet)==="[object Array]"){if(!prune){results.push.apply(results,checkSet)}else{if(context&&context.nodeType===1){for(var i=0;checkSet[i]!=null;i++){if(checkSet[i]&&(checkSet[i]===true||checkSet[i].nodeType===1&&contains(context,checkSet[i]))){results.push(set[i])}}}else{for(var i=0;checkSet[i]!=null;i++){if(checkSet[i]&&checkSet[i].nodeType===1){results.push(set[i])}}}}}else{makeArray(checkSet,results)}if(extra){Sizzle(extra,origContext,results,seed);Sizzle.uniqueSort(results)}return results};Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(var i=1;i<results.length;i++){if(results[i]===results[i-1]){results.splice(i--,1)}}}}return results};Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set)};Sizzle.find=function(expr,context,isXML){var set,match;if(!expr){return[]}for(var i=0,l=Expr.order.length;i<l;i++){var type=Expr.order[i],match;if((match=Expr.leftMatch[type].exec(expr))){var left=match[1];match.splice(1,1);if(left.substr(left.length-1)!=="\\"){match[1]=(match[1]||"").replace(/\\/g,"");set=Expr.find[type](match,context,isXML);if(set!=null){expr=expr.replace(Expr.match[type],"");break}}}}if(!set){set=context.getElementsByTagName("*")}return{set:set,expr:expr}};Sizzle.filter=function(expr,set,inplace,not){var old=expr,result=[],curLoop=set,match,anyFound,isXMLFilter=set&&set[0]&&isXML(set[0]);while(expr&&set.length){for(var type in Expr.filter){if((match=Expr.match[type].exec(expr))!=null){var filter=Expr.filter[type],found,item;anyFound=false;if(curLoop===result){result=[]}if(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match){anyFound=found=true}else{if(match===true){continue}}}if(match){for(var i=0;(item=curLoop[i])!=null;i++){if(item){found=filter(item,match,i,curLoop);var pass=not^!!found;if(inplace&&found!=null){if(pass){anyFound=true}else{curLoop[i]=false}}else{if(pass){result.push(item);anyFound=true}}}}}if(found!==undefined){if(!inplace){curLoop=result}expr=expr.replace(Expr.match[type],"");if(!anyFound){return[]}break}}}if(expr===old){if(anyFound==null){throw"Syntax error, unrecognized expression: "+expr}else{break}}old=expr}return curLoop};var Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href")}},relative:{"+":function(checkSet,part){var isPartStr=typeof part==="string",isTag=isPartStr&&!/\W/.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag){part=part.toLowerCase()}for(var i=0,l=checkSet.length,elem;i<l;i++){if((elem=checkSet[i])){while((elem=elem.previousSibling)&&elem.nodeType!==1){}checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||false:elem===part}}if(isPartStrNotTag){Sizzle.filter(part,checkSet,true)}},">":function(checkSet,part){var isPartStr=typeof part==="string";if(isPartStr&&!/\W/.test(part)){part=part.toLowerCase();for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:false}}}else{for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part}}if(isPartStr){Sizzle.filter(part,checkSet,true)}}},"":function(checkSet,part,isXML){var doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!/\W/.test(part)){var nodeCheck=part=part.toLowerCase();checkFn=dirNodeCheck}checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML)},"~":function(checkSet,part,isXML){var doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!/\W/.test(part)){var nodeCheck=part=part.toLowerCase();checkFn=dirNodeCheck}checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML)}},find:{ID:function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?[m]:[]}},NAME:function(match,context){if(typeof context.getElementsByName!=="undefined"){var ret=[],results=context.getElementsByName(match[1]);for(var i=0,l=results.length;i<l;i++){if(results[i].getAttribute("name")===match[1]){ret.push(results[i])}}return ret.length===0?null:ret}},TAG:function(match,context){return context.getElementsByTagName(match[1])}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){match=" "+match[1].replace(/\\/g,"")+" ";if(isXML){return match}for(var i=0,elem;(elem=curLoop[i])!=null;i++){if(elem){if(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n]/g," ").indexOf(match)>=0)){if(!inplace){result.push(elem)}}else{if(inplace){curLoop[i]=false}}}}return false},ID:function(match){return match[1].replace(/\\/g,"")},TAG:function(match,curLoop){return match[1].toLowerCase()},CHILD:function(match){if(match[1]==="nth"){var test=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(match[2]==="even"&&"2n"||match[2]==="odd"&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=(test[1]+(test[2]||1))-0;match[3]=test[3]-0}match[0]=done++;return match},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1].replace(/\\/g,"");if(!isXML&&Expr.attrMap[name]){match[1]=Expr.attrMap[name]}if(match[2]==="~="){match[4]=" "+match[4]+" "}return match},PSEUDO:function(match,curLoop,inplace,result,not){if(match[1]==="not"){if((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3])){match[3]=Sizzle(match[3],null,null,curLoop)}else{var ret=Sizzle.filter(match[3],curLoop,inplace,true^not);if(!inplace){result.push.apply(result,ret)}return false}}else{if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0])){return true}}return match},POS:function(match){match.unshift(true);return match}},filters:{enabled:function(elem){return elem.disabled===false&&elem.type!=="hidden"},disabled:function(elem){return elem.disabled===true},checked:function(elem){return elem.checked===true},selected:function(elem){elem.parentNode.selectedIndex;return elem.selected===true},parent:function(elem){return !!elem.firstChild},empty:function(elem){return !elem.firstChild},has:function(elem,i,match){return !!Sizzle(match[3],elem).length},header:function(elem){return/h\d/i.test(elem.nodeName)},text:function(elem){return"text"===elem.type},radio:function(elem){return"radio"===elem.type},checkbox:function(elem){return"checkbox"===elem.type},file:function(elem){return"file"===elem.type},password:function(elem){return"password"===elem.type},submit:function(elem){return"submit"===elem.type},image:function(elem){return"image"===elem.type},reset:function(elem){return"reset"===elem.type},button:function(elem){return"button"===elem.type||elem.nodeName.toLowerCase()==="button"},input:function(elem){return/input|select|textarea|button/i.test(elem.nodeName)}},setFilters:{first:function(elem,i){return i===0},last:function(elem,i,match,array){return i===array.length-1},even:function(elem,i){return i%2===0},odd:function(elem,i){return i%2===1},lt:function(elem,i,match){return i<match[3]-0},gt:function(elem,i,match){return i>match[3]-0},nth:function(elem,i,match){return match[3]-0===i},eq:function(elem,i,match){return match[3]-0===i}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter){return filter(elem,i,match,array)}else{if(name==="contains"){return(elem.textContent||elem.innerText||getText([elem])||"").indexOf(match[3])>=0}else{if(name==="not"){var not=match[3];for(var i=0,l=not.length;i<l;i++){if(not[i]===elem){return false}}return true}else{throw"Syntax error, unrecognized expression: "+name}}}},CHILD:function(elem,match){var type=match[1],node=elem;switch(type){case"only":case"first":while((node=node.previousSibling)){if(node.nodeType===1){return false}}if(type==="first"){return true}node=elem;case"last":while((node=node.nextSibling)){if(node.nodeType===1){return false}}return true;case"nth":var first=match[2],last=match[3];if(first===1&&last===0){return true}var doneName=match[0],parent=elem.parentNode;if(parent&&(parent.sizcache!==doneName||!elem.nodeIndex)){var count=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.nodeIndex=++count}}parent.sizcache=doneName}var diff=elem.nodeIndex-last;if(first===0){return diff===0}else{return(diff%first===0&&diff/first>=0)}}},ID:function(elem,match){return elem.nodeType===1&&elem.getAttribute("id")===match},TAG:function(elem,match){return(match==="*"&&elem.nodeType===1)||elem.nodeName.toLowerCase()===match},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1},ATTR:function(elem,match){var name=match[1],result=Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return result==null?type==="!=":type==="="?value===check:type==="*="?value.indexOf(check)>=0:type==="~="?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==false:type==="!="?value!==check:type==="^="?value.indexOf(check)===0:type==="$="?value.substr(value.length-check.length)===check:type==="|="?value===check||value.substr(0,check.length+1)===check+"-":false},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter){return filter(elem,i,match,array)}}}};var origPOS=Expr.match.POS;for(var type in Expr.match){Expr.match[type]=new RegExp(Expr.match[type].source+/(?![^\[]*\])(?![^\(]*\))/.source);Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source)}var makeArray=function(array,results){array=Array.prototype.slice.call(array,0);if(results){results.push.apply(results,array);return results}return array};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(e){makeArray=function(array,results){var ret=results||[];if(toString.call(array)==="[object Array]"){Array.prototype.push.apply(ret,array)}else{if(typeof array.length==="number"){for(var i=0,l=array.length;i<l;i++){ret.push(array[i])}}else{for(var i=0;array[i];i++){ret.push(array[i])}}}return ret}}var sortOrder;if(document.documentElement.compareDocumentPosition){sortOrder=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition){if(a==b){hasDuplicate=true}return a.compareDocumentPosition?-1:1}var ret=a.compareDocumentPosition(b)&4?-1:a===b?0:1;if(ret===0){hasDuplicate=true}return ret}}else{if("sourceIndex" in document.documentElement){sortOrder=function(a,b){if(!a.sourceIndex||!b.sourceIndex){if(a==b){hasDuplicate=true}return a.sourceIndex?-1:1}var ret=a.sourceIndex-b.sourceIndex;if(ret===0){hasDuplicate=true}return ret}}else{if(document.createRange){sortOrder=function(a,b){if(!a.ownerDocument||!b.ownerDocument){if(a==b){hasDuplicate=true}return a.ownerDocument?-1:1}var aRange=a.ownerDocument.createRange(),bRange=b.ownerDocument.createRange();aRange.setStart(a,0);aRange.setEnd(a,0);bRange.setStart(b,0);bRange.setEnd(b,0);var ret=aRange.compareBoundaryPoints(Range.START_TO_END,bRange);if(ret===0){hasDuplicate=true}return ret}}}}function getText(elems){var ret="",elem;for(var i=0;elems[i];i++){elem=elems[i];if(elem.nodeType===3||elem.nodeType===4){ret+=elem.nodeValue}else{if(elem.nodeType!==8){ret+=getText(elem.childNodes)}}}return ret}(function(){var form=document.createElement("div"),id="script"+(new Date).getTime();form.innerHTML="<a name='"+id+"'/>";var root=document.documentElement;root.insertBefore(form,root.firstChild);if(document.getElementById(id)){Expr.find.ID=function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[]}};Expr.filter.ID=function(elem,match){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return elem.nodeType===1&&node&&node.nodeValue===match}}root.removeChild(form);root=form=null})();(function(){var div=document.createElement("div");div.appendChild(document.createComment(""));if(div.getElementsByTagName("*").length>0){Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]==="*"){var tmp=[];for(var i=0;results[i];i++){if(results[i].nodeType===1){tmp.push(results[i])}}results=tmp}return results}}div.innerHTML="<a href='#'></a>";if(div.firstChild&&typeof div.firstChild.getAttribute!=="undefined"&&div.firstChild.getAttribute("href")!=="#"){Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2)}}div=null})();if(document.querySelectorAll){(function(){var oldSizzle=Sizzle,div=document.createElement("div");div.innerHTML="<p class='TEST'></p>";if(div.querySelectorAll&&div.querySelectorAll(".TEST").length===0){return}Sizzle=function(query,context,extra,seed){context=context||document;if(!seed&&context.nodeType===9&&!isXML(context)){try{return makeArray(context.querySelectorAll(query),extra)}catch(e){}}return oldSizzle(query,context,extra,seed)};for(var prop in oldSizzle){Sizzle[prop]=oldSizzle[prop]}div=null})()}(function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0){return}div.lastChild.className="e";if(div.getElementsByClassName("e").length===1){return}Expr.order.splice(1,0,"CLASS");Expr.find.CLASS=function(match,context,isXML){if(typeof context.getElementsByClassName!=="undefined"&&!isXML){return context.getElementsByClassName(match[1])}};div=null})();function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){elem=elem[dir];var match=false;while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===1&&!isXML){elem.sizcache=doneName;elem.sizset=i}if(elem.nodeName.toLowerCase()===cur){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){elem=elem[dir];var match=false;while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===1){if(!isXML){elem.sizcache=doneName;elem.sizset=i}if(typeof cur!=="string"){if(elem===cur){match=true;break}}else{if(Sizzle.filter(cur,[elem]).length>0){match=elem;break}}}elem=elem[dir]}checkSet[i]=match}}}var contains=document.compareDocumentPosition?function(a,b){return a.compareDocumentPosition(b)&16}:function(a,b){return a!==b&&(a.contains?a.contains(b):true)};var isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};var posProcess=function(selector,context){var tmpSet=[],later="",match,root=context.nodeType?[context]:context;while((match=Expr.match.PSEUDO.exec(selector))){later+=match[0];selector=selector.replace(Expr.match.PSEUDO,"")}selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++){Sizzle(selector,root[i],tmpSet)}return Sizzle.filter(later,tmpSet)};return Sizzle})();
/*
 * SWFObject v2.1 <http://code.google.com/p/swfobject/>
 * Copyright (c) 2007-2008 Geoff Stearns, Michael Williams, and Bobby van der Sluis
 * This software is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 *
 * Modified for inclusion in Shadowbox.js
 */
S.flash=(function(){var swfobject=function(){var UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",win=window,doc=document,nav=navigator,domLoadFnArr=[],regObjArr=[],objIdArr=[],listenersArr=[],script,timer=null,storedAltContent=null,storedAltContentId=null,isDomLoaded=false,isExpressInstallActive=false;var ua=function(){var w3cdom=typeof doc.getElementById!=UNDEF&&typeof doc.getElementsByTagName!=UNDEF&&typeof doc.createElement!=UNDEF,playerVersion=[0,0,0],d=null;if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==OBJECT){d=nav.plugins[SHOCKWAVE_FLASH].description;if(d&&!(typeof nav.mimeTypes!=UNDEF&&nav.mimeTypes[FLASH_MIME_TYPE]&&!nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin)){d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1");playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10);playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10);playerVersion[2]=/r/.test(d)?parseInt(d.replace(/^.*r(.*)$/,"$1"),10):0}}else{if(typeof win.ActiveXObject!=UNDEF){var a=null,fp6Crash=false;try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX+".7")}catch(e){try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX+".6");playerVersion=[6,0,21];a.AllowScriptAccess="always"}catch(e){if(playerVersion[0]==6){fp6Crash=true}}if(!fp6Crash){try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX)}catch(e){}}}if(!fp6Crash&&a){try{d=a.GetVariable("$version");if(d){d=d.split(" ")[1].split(",");playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}catch(e){}}}}var u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ie=false,windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u);
/*@cc_on
			ie = true;
			@if (@_win32)
				windows = true;
			@elif (@_mac)
				mac = true;
			@end
		@*/
return{w3cdom:w3cdom,pv:playerVersion,webkit:webkit,ie:ie,win:windows,mac:mac}}();var onDomLoad=function(){if(!ua.w3cdom){return}addDomLoadEvent(main);if(ua.ie&&ua.win){try{doc.write("<script id=__ie_ondomload defer=true src=//:><\/script>");script=getElementById("__ie_ondomload");if(script){addListener(script,"onreadystatechange",checkReadyState)}}catch(e){}}if(ua.webkit&&typeof doc.readyState!=UNDEF){timer=setInterval(function(){if(/loaded|complete/.test(doc.readyState)){callDomLoadFunctions()}},10)}if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("DOMContentLoaded",callDomLoadFunctions,null)}addLoadEvent(callDomLoadFunctions)}();function checkReadyState(){if(script.readyState=="complete"){script.parentNode.removeChild(script);callDomLoadFunctions()}}function callDomLoadFunctions(){if(isDomLoaded){return}if(ua.ie&&ua.win){var s=createElement("span");try{var t=doc.getElementsByTagName("body")[0].appendChild(s);t.parentNode.removeChild(t)}catch(e){return}}isDomLoaded=true;if(timer){clearInterval(timer);timer=null}var dl=domLoadFnArr.length;for(var i=0;i<dl;i++){domLoadFnArr[i]()}}function addDomLoadEvent(fn){if(isDomLoaded){fn()}else{domLoadFnArr[domLoadFnArr.length]=fn}}function addLoadEvent(fn){if(typeof win.addEventListener!=UNDEF){win.addEventListener("load",fn,false)}else{if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("load",fn,false)}else{if(typeof win.attachEvent!=UNDEF){addListener(win,"onload",fn)}else{if(typeof win.onload=="function"){var fnOld=win.onload;win.onload=function(){fnOld();fn()}}else{win.onload=fn}}}}}function main(){var rl=regObjArr.length;for(var i=0;i<rl;i++){var id=regObjArr[i].id;if(ua.pv[0]>0){var obj=getElementById(id);if(obj){regObjArr[i].width=obj.getAttribute("width")?obj.getAttribute("width"):"0";regObjArr[i].height=obj.getAttribute("height")?obj.getAttribute("height"):"0";if(hasPlayerVersion(regObjArr[i].swfVersion)){if(ua.webkit&&ua.webkit<312){fixParams(obj)}setVisibility(id,true)}else{if(regObjArr[i].expressInstall&&!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)){showExpressInstall(regObjArr[i])}else{displayAltContent(obj)}}}}else{setVisibility(id,true)}}}function fixParams(obj){var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var e=createElement("embed"),a=nestedObj.attributes;if(a){var al=a.length;for(var i=0;i<al;i++){if(a[i].nodeName=="DATA"){e.setAttribute("src",a[i].nodeValue)}else{e.setAttribute(a[i].nodeName,a[i].nodeValue)}}}var c=nestedObj.childNodes;if(c){var cl=c.length;for(var j=0;j<cl;j++){if(c[j].nodeType==1&&c[j].nodeName=="PARAM"){e.setAttribute(c[j].getAttribute("name"),c[j].getAttribute("value"))}}}obj.parentNode.replaceChild(e,obj)}}function showExpressInstall(regObj){isExpressInstallActive=true;var obj=getElementById(regObj.id);if(obj){if(regObj.altContentId){var ac=getElementById(regObj.altContentId);if(ac){storedAltContent=ac;storedAltContentId=regObj.altContentId}}else{storedAltContent=abstractAltContent(obj)}if(!(/%$/.test(regObj.width))&&parseInt(regObj.width,10)<310){regObj.width="310"}if(!(/%$/.test(regObj.height))&&parseInt(regObj.height,10)<137){regObj.height="137"}doc.title=doc.title.slice(0,47)+" - Flash Player Installation";var pt=ua.ie&&ua.win?"ActiveX":"PlugIn",dt=doc.title,fv="MMredirectURL="+win.location+"&MMplayerType="+pt+"&MMdoctitle="+dt,replaceId=regObj.id;if(ua.ie&&ua.win&&obj.readyState!=4){var newObj=createElement("div");replaceId+="SWFObjectNew";newObj.setAttribute("id",replaceId);obj.parentNode.insertBefore(newObj,obj);obj.style.display="none";var fn=function(){obj.parentNode.removeChild(obj)};addListener(win,"onload",fn)}createSWF({data:regObj.expressInstall,id:EXPRESS_INSTALL_ID,width:regObj.width,height:regObj.height},{flashvars:fv},replaceId)}}function displayAltContent(obj){if(ua.ie&&ua.win&&obj.readyState!=4){var el=createElement("div");obj.parentNode.insertBefore(el,obj);el.parentNode.replaceChild(abstractAltContent(obj),el);obj.style.display="none";var fn=function(){obj.parentNode.removeChild(obj)};addListener(win,"onload",fn)}else{obj.parentNode.replaceChild(abstractAltContent(obj),obj)}}function abstractAltContent(obj){var ac=createElement("div");if(ua.win&&ua.ie){ac.innerHTML=obj.innerHTML}else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var c=nestedObj.childNodes;if(c){var cl=c.length;for(var i=0;i<cl;i++){if(!(c[i].nodeType==1&&c[i].nodeName=="PARAM")&&!(c[i].nodeType==8)){ac.appendChild(c[i].cloneNode(true))}}}}}return ac}function createSWF(attObj,parObj,id){var r,el=getElementById(id);if(el){if(typeof attObj.id==UNDEF){attObj.id=id}if(ua.ie&&ua.win){var att="";for(var i in attObj){if(attObj[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){parObj.movie=attObj[i]}else{if(i.toLowerCase()=="styleclass"){att+=' class="'+attObj[i]+'"'}else{if(i.toLowerCase()!="classid"){att+=" "+i+'="'+attObj[i]+'"'}}}}}var par="";for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par+='<param name="'+j+'" value="'+parObj[j]+'" />'}}el.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+att+">"+par+"</object>";objIdArr[objIdArr.length]=attObj.id;r=getElementById(attObj.id)}else{if(ua.webkit&&ua.webkit<312){var e=createElement("embed");e.setAttribute("type",FLASH_MIME_TYPE);for(var k in attObj){if(attObj[k]!=Object.prototype[k]){if(k.toLowerCase()=="data"){e.setAttribute("src",attObj[k])}else{if(k.toLowerCase()=="styleclass"){e.setAttribute("class",attObj[k])}else{if(k.toLowerCase()!="classid"){e.setAttribute(k,attObj[k])}}}}}for(var l in parObj){if(parObj[l]!=Object.prototype[l]){if(l.toLowerCase()!="movie"){e.setAttribute(l,parObj[l])}}}el.parentNode.replaceChild(e,el);r=e}else{var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);for(var m in attObj){if(attObj[m]!=Object.prototype[m]){if(m.toLowerCase()=="styleclass"){o.setAttribute("class",attObj[m])}else{if(m.toLowerCase()!="classid"){o.setAttribute(m,attObj[m])}}}}for(var n in parObj){if(parObj[n]!=Object.prototype[n]&&n.toLowerCase()!="movie"){createObjParam(o,n,parObj[n])}}el.parentNode.replaceChild(o,el);r=o}}}return r}function createObjParam(el,pName,pValue){var p=createElement("param");p.setAttribute("name",pName);p.setAttribute("value",pValue);el.appendChild(p)}function removeSWF(id){var obj=getElementById(id);if(obj&&(obj.nodeName=="OBJECT"||obj.nodeName=="EMBED")){if(ua.ie&&ua.win){if(obj.readyState==4){removeObjectInIE(id)}else{win.attachEvent("onload",function(){removeObjectInIE(id)})}}else{obj.parentNode.removeChild(obj)}}}function removeObjectInIE(id){var obj=getElementById(id);if(obj){for(var i in obj){if(typeof obj[i]=="function"){obj[i]=null}}obj.parentNode.removeChild(obj)}}function getElementById(id){var el=null;try{el=doc.getElementById(id)}catch(e){}return el}function createElement(el){return doc.createElement(el)}function addListener(target,eventType,fn){target.attachEvent(eventType,fn);listenersArr[listenersArr.length]=[target,eventType,fn]}function hasPlayerVersion(rv){var pv=ua.pv,v=rv.split(".");v[0]=parseInt(v[0],10);v[1]=parseInt(v[1],10)||0;v[2]=parseInt(v[2],10)||0;return(pv[0]>v[0]||(pv[0]==v[0]&&pv[1]>v[1])||(pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]))?true:false}function createCSS(sel,decl){if(ua.ie&&ua.mac){return}var h=doc.getElementsByTagName("head")[0],s=createElement("style");s.setAttribute("type","text/css");s.setAttribute("media","screen");if(!(ua.ie&&ua.win)&&typeof doc.createTextNode!=UNDEF){s.appendChild(doc.createTextNode(sel+" {"+decl+"}"))}h.appendChild(s);if(ua.ie&&ua.win&&typeof doc.styleSheets!=UNDEF&&doc.styleSheets.length>0){var ls=doc.styleSheets[doc.styleSheets.length-1];if(typeof ls.addRule==OBJECT){ls.addRule(sel,decl)}}}function setVisibility(id,isVisible){var v=isVisible?"visible":"hidden";if(isDomLoaded&&getElementById(id)){getElementById(id).style.visibility=v}else{createCSS("#"+id,"visibility:"+v)}}function urlEncodeIfNecessary(s){var regex=/[\\\"<>\.;]/;var hasBadChars=regex.exec(s)!=null;return hasBadChars?encodeURIComponent(s):s}var cleanup=function(){if(ua.ie&&ua.win){window.attachEvent("onunload",function(){var ll=listenersArr.length;for(var i=0;i<ll;i++){listenersArr[i][0].detachEvent(listenersArr[i][1],listenersArr[i][2])}var il=objIdArr.length;for(var j=0;j<il;j++){removeSWF(objIdArr[j])}for(var k in ua){ua[k]=null}ua=null;for(var l in swfobject){swfobject[l]=null}swfobject=null})}}();return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr){if(!ua.w3cdom||!objectIdStr||!swfVersionStr){return}var regObj={};regObj.id=objectIdStr;regObj.swfVersion=swfVersionStr;regObj.expressInstall=xiSwfUrlStr?xiSwfUrlStr:false;regObjArr[regObjArr.length]=regObj;setVisibility(objectIdStr,false)},getObjectById:function(objectIdStr){var r=null;if(ua.w3cdom){var o=getElementById(objectIdStr);if(o){var n=o.getElementsByTagName(OBJECT)[0];if(!n||(n&&typeof o.SetVariable!=UNDEF)){r=o}else{if(typeof n.SetVariable!=UNDEF){r=n}}}}return r},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj){if(!ua.w3cdom||!swfUrlStr||!replaceElemIdStr||!widthStr||!heightStr||!swfVersionStr){return}widthStr+="";heightStr+="";if(hasPlayerVersion(swfVersionStr)){setVisibility(replaceElemIdStr,false);var att={};if(attObj&&typeof attObj===OBJECT){for(var i in attObj){if(attObj[i]!=Object.prototype[i]){att[i]=attObj[i]}}}att.data=swfUrlStr;att.width=widthStr;att.height=heightStr;var par={};if(parObj&&typeof parObj===OBJECT){for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par[j]=parObj[j]}}}if(flashvarsObj&&typeof flashvarsObj===OBJECT){for(var k in flashvarsObj){if(flashvarsObj[k]!=Object.prototype[k]){if(typeof par.flashvars!=UNDEF){par.flashvars+="&"+k+"="+flashvarsObj[k]}else{par.flashvars=k+"="+flashvarsObj[k]}}}}addDomLoadEvent(function(){createSWF(att,par,replaceElemIdStr);if(att.id==replaceElemIdStr){setVisibility(replaceElemIdStr,true)}})}else{if(xiSwfUrlStr&&!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)){isExpressInstallActive=true;setVisibility(replaceElemIdStr,false);addDomLoadEvent(function(){var regObj={};regObj.id=regObj.altContentId=replaceElemIdStr;regObj.width=widthStr;regObj.height=heightStr;regObj.expressInstall=xiSwfUrlStr;showExpressInstall(regObj)})}}},getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}},hasFlashPlayerVersion:hasPlayerVersion,createSWF:function(attObj,parObj,replaceElemIdStr){if(ua.w3cdom){return createSWF(attObj,parObj,replaceElemIdStr)}else{return undefined}},removeSWF:function(objElemIdStr){if(ua.w3cdom){removeSWF(objElemIdStr)}},createCSS:function(sel,decl){if(ua.w3cdom){createCSS(sel,decl)}},addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;if(param==null){return urlEncodeIfNecessary(q)}if(q){var pairs=q.substring(1).split("&");for(var i=0;i<pairs.length;i++){if(pairs[i].substring(0,pairs[i].indexOf("="))==param){return urlEncodeIfNecessary(pairs[i].substring((pairs[i].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(isExpressInstallActive&&storedAltContent){var obj=getElementById(EXPRESS_INSTALL_ID);if(obj){obj.parentNode.replaceChild(storedAltContent,obj);if(storedAltContentId){setVisibility(storedAltContentId,true);if(ua.ie&&ua.win){storedAltContent.style.display="block"}}storedAltContent=null;storedAltContentId=null;isExpressInstallActive=false}}}}}();return swfobject})();S.lang={code:"en",of:"of",loading:"loading",cancel:"Cancel",next:"Next",previous:"Previous",play:"Play",pause:"Pause",close:"Close",errors:{single:'You must install the <a href="{0}">{1}</a> browser plugin to view this content.',shared:'You must install both the <a href="{0}">{1}</a> and <a href="{2}">{3}</a> browser plugins to view this content.',either:'You must install either the <a href="{0}">{1}</a> or the <a href="{2}">{3}</a> browser plugin to view this content.'}};var pre,proxyId="sb-drag-proxy",dragData,dragProxy,dragTarget;function resetDrag(){dragData={x:0,y:0,startX:null,startY:null}}function updateProxy(){var dims=S.dimensions;apply(dragProxy.style,{height:dims.innerHeight+"px",width:dims.innerWidth+"px"})}function enableDrag(){resetDrag();var style=["position:absolute","cursor:"+(S.isGecko?"-moz-grab":"move"),"background-color:"+(S.isIE?"#fff;filter:alpha(opacity=0)":"transparent")].join(";");S.appendHTML(S.skin.body,'<div id="'+proxyId+'" style="'+style+'"></div>');dragProxy=get(proxyId);updateProxy();addEvent(dragProxy,"mousedown",startDrag)}function disableDrag(){if(dragProxy){removeEvent(dragProxy,"mousedown",startDrag);remove(dragProxy);dragProxy=null}dragTarget=null}function startDrag(e){preventDefault(e);var xy=getPageXY(e);dragData.startX=xy[0];dragData.startY=xy[1];dragTarget=get(S.player.id);addEvent(document,"mousemove",positionDrag);addEvent(document,"mouseup",endDrag);if(S.isGecko){dragProxy.style.cursor="-moz-grabbing"}}function positionDrag(e){var player=S.player,dims=S.dimensions,xy=getPageXY(e);var moveX=xy[0]-dragData.startX;dragData.startX+=moveX;dragData.x=Math.max(Math.min(0,dragData.x+moveX),dims.innerWidth-player.width);var moveY=xy[1]-dragData.startY;dragData.startY+=moveY;dragData.y=Math.max(Math.min(0,dragData.y+moveY),dims.innerHeight-player.height);apply(dragTarget.style,{left:dragData.x+"px",top:dragData.y+"px"})}function endDrag(){removeEvent(document,"mousemove",positionDrag);removeEvent(document,"mouseup",endDrag);if(S.isGecko){dragProxy.style.cursor="-moz-grab"}}S.img=function(obj,id){this.obj=obj;this.id=id;this.ready=false;var self=this;pre=new Image();pre.onload=function(){self.height=obj.height?parseInt(obj.height,10):pre.height;self.width=obj.width?parseInt(obj.width,10):pre.width;self.ready=true;pre.onload=null;pre=null};pre.src=obj.content};S.img.ext=["bmp","gif","jpg","jpeg","png"];S.img.prototype={append:function(body,dims){var img=document.createElement("img");img.id=this.id;img.src=this.obj.content;img.style.position="absolute";var height,width;if(dims.oversized&&S.options.handleOversize=="resize"){height=dims.innerHeight;width=dims.innerWidth}else{height=this.height;width=this.width}img.setAttribute("height",height);img.setAttribute("width",width);body.appendChild(img)},remove:function(){var el=get(this.id);if(el){remove(el)}disableDrag();if(pre){pre.onload=null;pre=null}},onLoad:function(){var dims=S.dimensions;if(dims.oversized&&S.options.handleOversize=="drag"){enableDrag()}},onWindowResize:function(){var dims=S.dimensions;switch(S.options.handleOversize){case"resize":var el=get(this.id);el.height=dims.innerHeight;el.width=dims.innerWidth;break;case"drag":if(dragTarget){var top=parseInt(S.getStyle(dragTarget,"top")),left=parseInt(S.getStyle(dragTarget,"left"));if(top+this.height<dims.innerHeight){dragTarget.style.top=dims.innerHeight-this.height+"px"}if(left+this.width<dims.innerWidth){dragTarget.style.left=dims.innerWidth-this.width+"px"}updateProxy()}break}}};S.iframe=function(obj,id){this.obj=obj;this.id=id;var overlay=get("sb-overlay");this.height=obj.height?parseInt(obj.height,10):overlay.offsetHeight;this.width=obj.width?parseInt(obj.width,10):overlay.offsetWidth};S.iframe.prototype={append:function(body,dims){var html='<iframe id="'+this.id+'" name="'+this.id+'" height="100%" width="100%" frameborder="0" marginwidth="0" marginheight="0" style="visibility:hidden" onload="this.style.visibility=\'visible\'" scrolling="auto"';if(S.isIE){html+=' allowtransparency="true"';if(S.isIE6){html+=" src=\"javascript:false;document.write('');\""}}html+="></iframe>";body.innerHTML=html},remove:function(){var el=get(this.id);if(el){remove(el);if(S.isGecko){delete window.frames[this.id]}}},onLoad:function(){var win=S.isIE?get(this.id).contentWindow:window.frames[this.id];win.location.href=this.obj.content}};S.html=function(obj,id){this.obj=obj;this.id=id;this.height=obj.height?parseInt(obj.height,10):300;this.width=obj.width?parseInt(obj.width,10):500};S.html.prototype={append:function(body,dims){var div=document.createElement("div");div.id=this.id;div.className="html";div.innerHTML=this.obj.content;body.appendChild(div)},remove:function(){var el=get(this.id);if(el){remove(el)}}};var jwControllerHeight=20;S.flv=function(obj,id){this.obj=obj;this.id=id;this.height=obj.height?parseInt(obj.height,10):300;if(S.options.showMovieControls){this.height+=jwControllerHeight}this.width=obj.width?parseInt(obj.width,10):300};S.flv.ext=["flv","m4v"];S.flv.prototype={append:function(body,dims){var tmp=document.createElement("div");tmp.id=this.id;body.appendChild(tmp);var height=dims.innerHeight,width=dims.innerWidth,swf=S.path+"player.swf",version=S.options.flashVersion,express=S.path+"expressInstall.swf",flashvars=apply({file:this.obj.content,height:height,width:width,autostart:(S.options.autoplayMovies?"true":"false"),controlbar:(S.options.showMovieControls?"bottom":"none"),backcolor:"0x000000",frontcolor:"0xCCCCCC",lightcolor:"0x557722"},S.options.flashVars),params=S.options.flashParams;S.flash.embedSWF(swf,this.id,width,height,version,express,flashvars,params)},remove:function(){S.flash.expressInstallCallback();S.flash.removeSWF(this.id)},onWindowResize:function(){var dims=S.dimensions,el=get(this.id);el.height=dims.innerHeight;el.width=dims.innerWidth}};var overlayOn=false,visibilityCache=[],pngIds=["sb-nav-close","sb-nav-next","sb-nav-play","sb-nav-pause","sb-nav-previous"],container,overlay,wrapper,doWindowResize=true;function animate(el,property,to,duration,callback){var isOpacity=(property=="opacity"),anim=isOpacity?S.setOpacity:function(el,value){el.style[property]=""+value+"px"};if(duration==0||(!isOpacity&&!S.options.animate)||(isOpacity&&!S.options.animateFade)){anim(el,to);if(callback){callback()}return}var from=parseFloat(S.getStyle(el,property))||0;var delta=to-from;if(delta==0){if(callback){callback()}return}duration*=1000;var begin=now(),ease=S.ease,end=begin+duration,time;var interval=setInterval(function(){time=now();if(time>=end){clearInterval(interval);interval=null;anim(el,to);if(callback){callback()}}else{anim(el,from+ease((time-begin)/duration)*delta)}},10)}function setSize(){container.style.height=S.getWindowSize("Height")+"px";container.style.width=S.getWindowSize("Width")+"px"}function setPosition(){container.style.top=document.documentElement.scrollTop+"px";container.style.left=document.documentElement.scrollLeft+"px"}function toggleTroubleElements(on){if(on){each(visibilityCache,function(i,el){el[0].style.visibility=el[1]||""})}else{visibilityCache=[];each(S.options.troubleElements,function(i,tag){each(document.getElementsByTagName(tag),function(j,el){visibilityCache.push([el,el.style.visibility]);el.style.visibility="hidden"})})}}function toggleNav(id,on){var el=get("sb-nav-"+id);if(el){el.style.display=on?"":"none"}}function toggleLoading(on,callback){var loading=get("sb-loading"),playerName=S.getCurrent().player,anim=(playerName=="img"||playerName=="html");if(on){S.setOpacity(loading,0);loading.style.display="block";var wrapped=function(){S.clearOpacity(loading);if(callback){callback()}};if(anim){animate(loading,"opacity",1,S.options.fadeDuration,wrapped)}else{wrapped()}}else{var wrapped=function(){loading.style.display="none";S.clearOpacity(loading);if(callback){callback()}};if(anim){animate(loading,"opacity",0,S.options.fadeDuration,wrapped)}else{wrapped()}}}function buildBars(callback){var obj=S.getCurrent();get("sb-title-inner").innerHTML=obj.title||"";var close,next,play,pause,previous;if(S.options.displayNav){close=true;var len=S.gallery.length;if(len>1){if(S.options.continuous){next=previous=true}else{next=(len-1)>S.current;previous=S.current>0}}if(S.options.slideshowDelay>0&&S.hasNext()){pause=!S.isPaused();play=!pause}}else{close=next=play=pause=previous=false}toggleNav("close",close);toggleNav("next",next);toggleNav("play",play);toggleNav("pause",pause);toggleNav("previous",previous);var counter="";if(S.options.displayCounter&&S.gallery.length>1){var len=S.gallery.length;if(S.options.counterType=="skip"){var i=0,end=len,limit=parseInt(S.options.counterLimit)||0;if(limit<len&&limit>2){var h=Math.floor(limit/2);i=S.current-h;if(i<0){i+=len}end=S.current+(limit-h);if(end>len){end-=len}}while(i!=end){if(i==len){i=0}counter+='<a onclick="Shadowbox.change('+i+');"';if(i==S.current){counter+=' class="sb-counter-current"'}counter+=">"+(++i)+"</a>"}}else{counter=[S.current+1,S.lang.of,len].join(" ")}}get("sb-counter").innerHTML=counter;callback()}function showBars(callback){var titleInner=get("sb-title-inner"),infoInner=get("sb-info-inner"),duration=0.35;titleInner.style.visibility=infoInner.style.visibility="";if(titleInner.innerHTML!=""){animate(titleInner,"marginTop",0,duration)}animate(infoInner,"marginTop",0,duration,callback)}function hideBars(anim,callback){var title=get("sb-title"),info=get("sb-info"),titleHeight=title.offsetHeight,infoHeight=info.offsetHeight,titleInner=get("sb-title-inner"),infoInner=get("sb-info-inner"),duration=(anim?0.35:0);animate(titleInner,"marginTop",titleHeight,duration);animate(infoInner,"marginTop",infoHeight*-1,duration,function(){titleInner.style.visibility=infoInner.style.visibility="hidden";callback()})}function adjustHeight(height,top,anim,callback){var wrapperInner=get("sb-wrapper-inner"),duration=(anim?S.options.resizeDuration:0);animate(wrapper,"top",top,duration);animate(wrapperInner,"height",height,duration,callback)}function adjustWidth(width,left,anim,callback){var duration=(anim?S.options.resizeDuration:0);animate(wrapper,"left",left,duration);animate(wrapper,"width",width,duration,callback)}function setDimensions(height,width){var bodyInner=get("sb-body-inner"),height=parseInt(height),width=parseInt(width),topBottom=wrapper.offsetHeight-bodyInner.offsetHeight,leftRight=wrapper.offsetWidth-bodyInner.offsetWidth,maxHeight=overlay.offsetHeight,maxWidth=overlay.offsetWidth,padding=parseInt(S.options.viewportPadding)||20,preserveAspect=(S.player&&S.options.handleOversize!="drag");return S.setDimensions(height,width,maxHeight,maxWidth,topBottom,leftRight,padding,preserveAspect)}var K={};K.markup='<div id="sb-container"><div id="sb-overlay"></div><div id="sb-wrapper"><div id="sb-title"><div id="sb-title-inner"></div></div><div id="sb-wrapper-inner"><div id="sb-body"><div id="sb-body-inner"></div><div id="sb-loading"><div id="sb-loading-inner"><span>{loading}</span></div></div></div></div><div id="sb-info"><div id="sb-info-inner"><div id="sb-counter"></div><div id="sb-nav"><a id="sb-nav-close" title="{close}" onclick="Shadowbox.close()"></a><a id="sb-nav-next" title="{next}" onclick="Shadowbox.next()"></a><a id="sb-nav-play" title="{play}" onclick="Shadowbox.play()"></a><a id="sb-nav-pause" title="{pause}" onclick="Shadowbox.pause()"></a><a id="sb-nav-previous" title="{previous}" onclick="Shadowbox.previous()"></a></div></div></div></div></div>';K.options={animSequence:"sync",counterLimit:10,counterType:"default",displayCounter:true,displayNav:true,fadeDuration:0.35,initialHeight:160,initialWidth:320,modal:false,overlayColor:"#000",overlayOpacity:0.5,resizeDuration:0.35,showOverlay:true,troubleElements:["select","object","embed","canvas"]};K.init=function(){S.appendHTML(document.body,sprintf(K.markup,S.lang));K.body=get("sb-body-inner");container=get("sb-container");overlay=get("sb-overlay");wrapper=get("sb-wrapper");if(!supportsFixed){container.style.position="absolute"}if(!supportsOpacity){var el,m,re=/url\("(.*\.png)"\)/;each(pngIds,function(i,id){el=get(id);if(el){m=S.getStyle(el,"backgroundImage").match(re);if(m){el.style.backgroundImage="none";el.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,src="+m[1]+",sizingMethod=scale);"}}})}var timer;addEvent(window,"resize",function(){if(timer){clearTimeout(timer);timer=null}if(open){timer=setTimeout(K.onWindowResize,10)}})};K.onOpen=function(obj,callback){doWindowResize=false;container.style.display="block";setSize();var dims=setDimensions(S.options.initialHeight,S.options.initialWidth);adjustHeight(dims.innerHeight,dims.top);adjustWidth(dims.width,dims.left);if(S.options.showOverlay){overlay.style.backgroundColor=S.options.overlayColor;S.setOpacity(overlay,0);if(!S.options.modal){addEvent(overlay,"click",S.close)}overlayOn=true}if(!supportsFixed){setPosition();addEvent(window,"scroll",setPosition)}toggleTroubleElements();container.style.visibility="visible";if(overlayOn){animate(overlay,"opacity",S.options.overlayOpacity,S.options.fadeDuration,callback)}else{callback()}};K.onLoad=function(changing,callback){toggleLoading(true);while(K.body.firstChild){remove(K.body.firstChild)}hideBars(changing,function(){if(!open){return}if(!changing){wrapper.style.visibility="visible"}buildBars(callback)})};K.onReady=function(callback){if(!open){return}var player=S.player,dims=setDimensions(player.height,player.width);var wrapped=function(){showBars(callback)};switch(S.options.animSequence){case"hw":adjustHeight(dims.innerHeight,dims.top,true,function(){adjustWidth(dims.width,dims.left,true,wrapped)});break;case"wh":adjustWidth(dims.width,dims.left,true,function(){adjustHeight(dims.innerHeight,dims.top,true,wrapped)});break;default:adjustWidth(dims.width,dims.left,true);adjustHeight(dims.innerHeight,dims.top,true,wrapped)}};K.onShow=function(callback){toggleLoading(false,callback);doWindowResize=true};K.onClose=function(){if(!supportsFixed){removeEvent(window,"scroll",setPosition)}removeEvent(overlay,"click",S.close);wrapper.style.visibility="hidden";var callback=function(){container.style.visibility="hidden";container.style.display="none";toggleTroubleElements(true)};if(overlayOn){animate(overlay,"opacity",0,S.options.fadeDuration,callback)}else{callback()}};K.onPlay=function(){toggleNav("play",false);toggleNav("pause",true)};K.onPause=function(){toggleNav("pause",false);toggleNav("play",true)};K.onWindowResize=function(){if(!doWindowResize){return}setSize();var player=S.player,dims=setDimensions(player.height,player.width);adjustWidth(dims.width,dims.left);adjustHeight(dims.innerHeight,dims.top);if(player.onWindowResize){player.onWindowResize()}};S.skin=K;window.Shadowbox=S})(window);
/* 
 * shadowbox js 
 * 
 * Usage:
 * <script type="text/javascript">var MEDIA_URL = "{{MEDIA_URL}}"</script>
 * <script type="text/javascript" src="{{MEDIA_URL}}djangoplicity/shadowbox3/shadowbox.js"></script>
 * <script type="text/javascript" src="{{MEDIA_URL}}djangoplicity/js/shadowbox_conf.js"></script>
 */
$(document).ready( function(){
	var options = {
		assetURL: MEDIA_URL + "djangoplicity/shadowbox/",
		handleLgImages: "resize",
		players : ["img","html","flv","qt","wmp"],
		onOpen: function() {
			$('#bmwrapper').hide();
		},
		onClose: function() {
			$('#bmwrapper').show();
		}
    };
    Shadowbox.init(options);	    
});

/*
 Zoomify Image Viewer Express v2.8, Copyright Zoomify, Inc., 1999-2014. All rights reserved.
You may use this file on private and public websites, for personal and commercial purposes, with
or without modifications, so long as this notice is included. Redistribution via other means is not
permitted without prior permission. Additional terms apply. For complete license terms please see
the Zoomify License Agreement in this product and on the Zoomify website at www.zoomify.com.
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
*/
(function(){(function(){return this}).call().Z={}})();
Z.showImage=function(a,b,c){Z.showImage.done?(Z.Utils.declareGlobals(),Z.pageContainerID=a,Z.imagePath="undefined"!==typeof b&&null!==b?Z.Utils.stringRemoveTrailingSlashCharacters(b):null,"undefined"!==typeof c&&(Z.parameters=Z.Utils.parseParameters(c)),Z.initialize()):(Z.showImage.done=!0,Z.Utils.addCrossBrowserMethods(),Z.Utils.addCrossBrowserEvents(),Z.Utils.declareGlobals(),Z.pageContainerID=a,Z.setCallback=function(a,b){var c=Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",a,
null,"callbackFunction",b);-1==c&&(c=Z.callbacks.length);Z.callbacks[c]={callbackEvent:a,callbackFunction:b}},Z.setEditPermissionFunction=function(a){Z.externalEditPermissionFunction=a},Z.clearCallback=function(a,b){var c=Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",a,null,"callbackFunction",b);-1!=c&&(Z.callbacks=Z.Utils.arraySplice(Z.callbacks,c,1))},Z.imagePath="undefined"!==typeof b&&null!==b?Z.Utils.stringRemoveTrailingSlashCharacters(b):null,"undefined"!==typeof c&&("string"===
typeof c?(a=unescape(c),a=Z.Utils.stringUnescapeAmpersandCharacters(a),Z.parameters=Z.Utils.parseParameters(a)):Z.parameters=Z.Utils.parseParameters(c)),"complete"!=document.readyState?(Z.Utils.addEventListener(document,"DOMContentLoaded",Z.initialize),Z.Utils.addEventListener(window,"load",Z.initialize)):Z.initialize())};
Z.initialize=function(){Z.Utils.removeEventListener(document,"DOMContentLoaded",Z.initialize);Z.Utils.removeEventListener(window,"load",Z.initialize);Z.Utils.detectBrowserFeatures();Z.Utils.setParameters(Z.parameters);Z.Viewer=new Z.ZoomifyImageViewer;Z.Viewer.configureViewer()};
Z.ZoomifyImageViewer=function(){function a(){document.getElementsByTagName("body")?document.getElementsByTagName("body")[0].onorientationchange=b:window.setTimeout(a,100)}function b(a){!Z.interactivityOff&&Z.fullView&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),Z.Toolbar&&Z.annotations&&1<Z.annotationPanelVisible&&Z.Toolbar.setVisibilityAnnotationPanel(!1),Z.Viewport&&(Z.Viewport.toggleFullViewMode(!1),Z.Viewport.toggleFullViewMode(!0)),
Z.Toolbar&&Z.annotations&&1<Z.annotationPanelVisible&&Z.Toolbar.setVisibilityAnnotationPanel(!0),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0),Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!0))}function c(a){if(!Z.interactivityOff&&Z.keys&&"INPUT"!=document.activeElement.tagName&&"TEXTAREA"!=document.activeElement.tagName&&(a=Z.Utils.event(a),18==a.keyCode||a.altKey||(Z.viewportCurrent.zoomAndPanAllStop(!0,!0),Z.maskingSelection&&Z.viewportCurrent.clearLabelMask()),
a)){var b=a.type;a=a.keyCode;if("keydown"==b)switch(a){case 90:Z.viewportCurrent.zoom("out");break;case 17:Z.viewportCurrent.zoom("out");break;case 65:Z.viewportCurrent.zoom("in");break;case 16:Z.viewportCurrent.zoom("in");break;case 37:Z.viewportCurrent.pan("left");break;case 38:Z.viewportCurrent.pan("up");break;case 40:Z.viewportCurrent.pan("down");break;case 39:Z.viewportCurrent.pan("right");break;case 27:Z.fullView?Z.viewportCurrent.toggleFullViewMode(!1):Z.viewportCurrent.reset();break;case 190:Z.rotationVisible&&
Z.viewportCurrent.rotateClockwise();break;case 188:Z.rotationVisible&&Z.viewportCurrent.rotateCounterwise();break;case 33:h.viewportNext();break;case 34:h.viewportPrior()}else"keyup"==b&&(90==a||17==a||65==a||16==a?Z.viewportCurrent.zoom("stop"):37==a||39==a?Z.viewportCurrent.pan("horizontalStop"):38!=a&&40!=a||Z.viewportCurrent.pan("verticalStop"))}}function d(a){a=Z.Utils.event(a);var b=a.type;if(a&&b){var c=Z.Utils.isRightMouseButton(a),d=a.altKey;if(!("mouseover"!=b&&"mouseout"!=b&&Z.interactivityOff||
"mousedown"==b&&(Z.interactivityOff||Z.coordinatesVisible&&d)||c)){Z.touchSupport&&!Z.clickZoomAndPanBlock&&"touchmove"!=b&&"gesturechange"!=b&&a.preventDefault();switch(b){case "mouseover":Z.fullView||"TEXTAREA"==document.activeElement.tagName||Z.Viewer.initializeViewerKeyDefaultListeners(!0);break;case "mouseout":Z.Viewer.initializeViewerKeyDefaultListeners(!1)}var h;h=Z.Utils.event(a);var f=h.type;if(h&&f)switch(a=Z.Utils.target(h),c=Z.Utils.relatedTarget(h),d=Z.Utils.getMousePosition(h),"DOMMouseScroll"==
f&&(f="mousewheel"),f){case "mouseover":h=Z.Utils.nodeIsInViewer(a);f=Z.Utils.nodeIsInViewer(c);h&&f||(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!0),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0),Z.mouseOutDownPoint=null);break;case "mouseout":h=Z.Utils.nodeIsInViewer(a);f=Z.Utils.nodeIsInViewer(c);h&&f||"[object HTMLSelectElement]"==a||"[object HTMLOptionElement]"==a||"[object HTMLSelectElement]"==c||"[object HTMLOptionElement]"==c||(Z.mouseIsDown?Z.mouseOutDownPoint=
new Z.Utils.Point(d.x,d.y):(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1)));break;case "mousewheel":l||(l=window.setTimeout(e,m)),a=Math.max(-1,Math.min(1,h.wheelDelta||-h.detail)),Z.viewportCurrent.mouseWheelHandler(a)}if("mousedown"==b||"mousemove"==b)return!1}}}function e(a){l&&(window.clearTimeout(l),l=null,Z.zooming="stop",Z.viewportCurrent.updateView())}var h=this;Z.ViewerDisplay=Z.Utils.createContainerElement("div",
"ViewerDisplay","inline-block","relative","hidden","100%","100%","0px","0px","none","0px","transparent none","0px","0px","normal","pointer");Z.pageContainer=document.getElementById(Z.pageContainerID);var f=Z.Utils.getElementStyle(Z.pageContainer);Z.ViewerDisplay.style["-webkit-touch-callout"]="none";Z.ViewerDisplay.style["-moz-user-select"]="none";Z.ViewerDisplay.style["-khtml-user-select"]="none";Z.ViewerDisplay.style["-webkit-user-select"]="none";Z.ViewerDisplay.style["-ms-user-select"]="none";
Z.ViewerDisplay.style["-o-user-select"]="none";Z.ViewerDisplay.style["user-select"]="none";Z.viewerW=parseFloat(f.width);Z.viewerH=parseFloat(f.height);-1!=f.width.indexOf("%")&&(Z.viewerW=parseFloat(Z.Utils.getElementStyleProperty(Z.pageContainer,"width")));-1!=f.height.indexOf("%")&&(Z.viewerH=parseFloat(Z.Utils.getElementStyleProperty(Z.pageContainer,"height")));isNaN(Z.viewerW)&&(Z.viewerW=Z.ViewerDisplay.clientWidth);isNaN(Z.viewerH)&&(Z.viewerH=Z.ViewerDisplay.clientHeight);if(0==Z.viewerW||
0==Z.viewerH)winDimensions=Z.Utils.getWindowSize(),0==Z.viewerW&&(Z.pageContainer.parentNode.style.width=winDimensions.x+"px",Z.viewerW=Z.pageContainer.clientWidth),0==Z.viewerH&&(Z.pageContainer.parentNode.style.height=winDimensions.y+"px",Z.viewerH=Z.pageContainer.clientHeight);Z.pageContainer.innerHTML="";Z.pageContainer.appendChild(Z.ViewerDisplay);var m=parseInt(Z.Utils.getResource("z165"),10),l;this.configureViewer=function(){function b(){Z.clearCallback("viewportInitialized",b);h.initializeViewerKeyEventListeners(!0);
Z.Utils.addEventListener(Z.ViewerDisplay,"mouseover",d);Z.Utils.addEventListener(Z.ViewerDisplay,"mouseout",d);Z.Utils.addEventListener(Z.ViewerDisplay,"mousemove",Z.Utils.preventDefault);Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",d);Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",Z.Utils.preventDefault);a();Z.Viewport&&Z.Viewport.getInitialized()&&Z.Toolbar&&Z.Toolbar.getInitialized()&&Z.Navigator&&Z.Navigator.getInitialized()&&Z.Utils.validateCallback("viewerInitialized");h.configureComponents(Z.viewportCurrent)}
Z.setCallback("viewportInitialized",b);Z.Viewport=new Z.ZoomifyViewport;Z.viewportCurrent=Z.Viewport};this.configureComponents=function(a){0<Z.toolbarVisible&&!Z.Toolbar&&(Z.Toolbar=new Z.ZoomifyToolbar(a));0<Z.navigatorVisible&&!Z.Navigator&&(Z.Navigator=new Z.ZoomifyNavigator(a),Z.Navigator&&Z.Navigator.z682())};this.setSizeAndPosition=function(a,b,c,d,e){Z.viewerW=a;Z.viewerH=b;Z.ViewerDisplay.style.width=a+"px";Z.ViewerDisplay.style.height=b+"px";Z.Viewport&&Z.Viewport.getInitialized()&&Z.Viewport.setSizeAndPosition(a,
b,c,d);b=1==Z.toolbarPosition?b-Z.toolbarH:0;Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&(Z.Toolbar.setSizeAndPosition(a,null,null,b),Z.toolbarAutoShowHide&&Z.Toolbar.show(!0));Z.NavigatorDisplay&&Z.Navigator.getInitialized()&&(Z.Navigator.setSizeAndPosition(null,null,c,d,Z.navigatorFit),1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0));e&&Z.Viewport.updateView(!0)};this.initializeViewerKeyEventListeners=function(a){a?(Z.Utils.addEventListener(document,"keydown",c),Z.Utils.addEventListener(document,
"keyup",c)):(Z.Utils.removeEventListener(document,"keydown",c),Z.Utils.removeEventListener(document,"keyup",c))};this.initializeViewerKeyDefaultListeners=function(a){a?(Z.Utils.addEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.addEventListener(document,"keyup",Z.Utils.preventDefault)):(Z.Utils.removeEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.removeEventListener(document,"keyup",Z.Utils.preventDefault))}};
Z.ZoomifyViewport=function(a,b,c){function d(a,b,c,p,d,g,e,h,f,t,ka){Z.imageW=a;Z.imageH=b;Z.imageCenterX=Z.imageW/2;Z.imageCenterY=Z.imageH/2;Rb=d;Ia=c;Ja=p;null!==f&&null!==t&&null!==ka&&(Z.sourceMagnification=f,Z.focal=t,Z.quality=ka);if("ZoomifyImageFile"==Z.tileSource)for(a=ta-1;0<=a;a--)la[a]=Math.ceil(ra[a]/Ia),Ba[a]=Math.ceil(Ca[a]/Ja),Da[a]=la[a]*Ba[a];else{a=Z.imageW;for(b=Z.imageH;a>Ia||b>Ja;)a/=2,b/=2,ta++;a=Z.imageW;b=Z.imageH;c=0;for(p=ta-1;0<=p;p--)ra[p]=a,Ca[p]=b,la[p]=Math.ceil(ra[p]/
Ia),Ba[p]=Math.ceil(Ca[p]/Ja),Da[p]=la[p]*Ba[p],a/=2,b/=2,c+=Da[p];if(c!=Rb&&("ZoomifyImageFolder"==Z.tileSource||"ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)){ra=[];Ca=[];la=[];Ba=[];ta=1;a=Z.imageW;b=Z.imageH;for(c=2;a>Ia||b>Ja;)a=Math.floor(Z.imageW/c),b=Math.floor(Z.imageH/c),c*=2,a%2&&a++,b%2&&b++,ta++;a=Z.imageW;b=Z.imageH;c=2;tileCounter=0;for(p=ta-1;0<=p;p--)la[p]=Math.floor(a/Ia),a%Ia&&la[p]++,Ba[p]=Math.floor(b/Ja),b%Ja&&Ba[p]++,Da[p]=la[p]*Ba[p],tileCounter+=Da[p],
ra[p]=a,Ca[p]=b,a=Math.floor(Z.imageW/c),b=Math.floor(Z.imageH/c),c*=2,a%2&&a++,b%2&&b++;a=tileCounter;a!=Rb&&Z.Utils.showMessage(Z.Utils.getResource("z254"))}}n.validateXYZDefaults();ta>kc?(ua=L(Ea,Z.initialZ),F&&oCtx.scale(ua,ua)):F=Pa=oCtx=null;Qa=L(ea,Z.initialZ);Za=P=L(I,Z.initialZ);Z.useCanvas&&ma.scale(P,P);l(Ib);lc=!0;ta>mc&&(l(Jb),nc=!0,ta>oc&&(l(Ab),pc=!0));va.sort();va=Z.Utils.arrayUnique(va);y(va,H,"simple","image-backfill");q(Z.initialX,Z.initialY,Z.initialZ,Z.initialR,null,!0);Z.initialFullPage&&
n.toggleFullViewMode(!0);Z.Utils.addEventListener(T,"mousedown",k);Z.Utils.addEventListener(T,"mousemove",Z.Utils.preventDefault);Z.Utils.addEventListener(T,"touchstart",k);Z.Utils.addEventListener(T,"touchmove",k);Z.Utils.addEventListener(T,"touchend",k);Z.Utils.addEventListener(T,"touchcancel",k);Z.Utils.addEventListener(T,"gesturestart",k);Z.Utils.addEventListener(T,"gesturechange",k);Z.Utils.addEventListener(T,"gestureend",k);Z.Utils.addEventListener(V,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener($,
"contextmenu",Z.Utils.preventDefault);Sb=!0;Z.Utils.validateCallback("viewportInitialized");Z.Viewport&&Z.Viewport.getInitialized()&&Z.Toolbar&&Z.Toolbar.getInitialized()&&Z.Navigator&&Z.Navigator.getInitialized()&&Z.Utils.validateCallback("viewerInitialized");n.syncViewportRelated()}function e(){ta=1;ea=I=0;aa=!1;"undefined"!==typeof ra&&Z.Utils.arrayClear(ra);"undefined"!==typeof Ca&&Z.Utils.arrayClear(Ca);"undefined"!==typeof la&&Z.Utils.arrayClear(la);"undefined"!==typeof Ba&&Z.Utils.arrayClear(Ba);
"undefined"!==typeof Da&&Z.Utils.arrayClear(Da);"undefined"!==typeof ob&&Z.Utils.arrayClear(ob);"undefined"!==typeof tierTileOffsetsCount&&Z.Utils.arrayClear(tierTileOffsetsCount);"undefined"!==typeof tierTileOffsetChunks&&Z.Utils.arrayClear(tierTileOffsetChunks);"undefined"!==typeof tierTileOffsetLast&&Z.Utils.arrayClear(tierTileOffsetLast);"undefined"!==typeof db&&Z.Utils.arrayClear(db);"undefined"!==typeof tierTileByteCountsCount&&Z.Utils.arrayClear(tierTileByteCountsCount);"undefined"!==typeof tierTileByteCountChunks&&
Z.Utils.arrayClear(tierTileByteCountChunks);"undefined"!==typeof tierTileByteCountLast&&Z.Utils.arrayClear(tierTileByteCountLast)}function h(a,b,c,p){if("undefined"===typeof c||null===c)c=0;if("undefined"===typeof p||null===p)p=0;Z.viewerW=fa=a;Z.viewerH=ba=b;na=fa*qc;oa=ba*qc;Ra=na/2;Sa=oa/2;ia=-((na-fa)/2)+c;ja=-((oa-ba)/2)+p;F&&(F.width=fa,F.height=ba,Pa.width=fa+"px",Pa.height=ba+"px",Pa.left="0px",Pa.top="0px");T.width=na;T.height=oa;u.width=na+"px";u.height=oa+"px";u.left=ia+"px";u.top=ja+"px";
$.width=na;$.height=oa;pa.width=na+"px";pa.height=oa+"px";Z.useCanvas&&(F&&(oCtx.translate(fa/2,ba/2),oCtx.save()),ma.translate(Ra,Sa),ma.save())}function f(a,b,c){if("ZoomifyImageFile"==Z.tileSource){c=parseFloat(Z.Utils.getResource("z125"));var p=parseFloat(Z.Utils.getResource("z124"));b.loadByteRange(a,c,p,"header")}else"ZoomifyImageFolder"==Z.tileSource&&(a=Z.Utils.cacheProofPath(a+"/ImageProperties.xml"),b.loadXML(a,c))}function m(a,b){e();if("undefined"===typeof n.getInitialized)window.setTimeout(function(){m(a,
b)},100);else{var c=null,p=null,g=null,cb=null,k=null,q=null;"ZoomifyImageFolder"==Z.tileSource&&(c=parseInt(a.documentElement.getAttribute("WIDTH"),10),p=parseInt(a.documentElement.getAttribute("HEIGHT"),10),k=parseInt(a.documentElement.getAttribute("NUMTILES"),10),parseInt(a.documentElement.getAttribute("NUMIMAGES"),10),q=parseInt(a.documentElement.getAttribute("VERSION"),10),g=cb=parseInt(a.documentElement.getAttribute("TILESIZE"),10));null!==Z.tileW&&(g=Z.tileW);null!==Z.tileH&&(cb=Z.tileH);if("ZoomifyImageFolder"==
Z.tileSource||"ImageServer"==Z.tileSource){if(null===g||isNaN(g))g=Ia;if(null===cb||isNaN(cb))cb=Ja;if(null===k||isNaN(k))k=1}!isNaN(c)&&0<c&&!isNaN(p)&&0<p&&!isNaN(g)&&0<g&&!isNaN(cb)&&0<cb&&0<k?d(c,p,g,cb,k,q,null,null,null,null,null,b):"ZoomifyImageFolder"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z252")):Z.Utils.showMessage(Z.Utils.getResource("z250"))}}function l(a){for(var b=la[a]-1,c=Ba[a]-1,p=0;p<=b;p++)for(var d=0;d<=c;d++)va[va.length]=a+"-"+p+"-"+d}function s(a){if(a){a=n.z542(ea);
Z.Utils.arrayClear(va);b=a.l;for(c=a.r;b<=c;b++)for(p=a.t,d=a.b;p<=d;p++)va[va.length]=ea+"-"+b+"-"+p;n.validateView("tilesToLoad-backfill",null,null,va);y(va,H,"simple","image-backfill")}else{Z.Utils.arrayClear(eb);Z.Utils.arrayClear(pb);Z.Utils.arrayClear($a);Z.Utils.arrayClear(W);a=n.z542();for(var b=a.l,c=a.r;b<=c;b++)for(var p=a.t,d=a.b;p<=d;p++){var g=I+"-"+b+"-"+p;eb[eb.length]=g;W[W.length]=g}if(n.getInitialized()&&0<sa.length&&(I==Ib||I==Jb||I==Ab))for(b=0,c=sa.length;b<c;b++)(p=sa[b])&&
p.t==I&&p.c>=a.l&&p.c<=a.r&&p.r>=a.t&&p.r<=a.b&&($a[$a.length]=p.name,pb[pb.length]=p,d=Z.Utils.arrayIndexOf(W,p.name),-1!=d&&(W=Z.Utils.arraySplice(W,d,1)));b=0;for(c=wa.length;b<c;b++)(p=wa[b])&&p.t==I&&p.c>=a.l&&p.c<=a.r&&p.r>=a.t&&p.r<=a.b&&(d=Z.Utils.arrayIndexOf($a,p.name),-1==d&&($a[$a.length]=p.name,pb[pb.length]=p),p=Z.Utils.arrayIndexOf(W,p.name),-1!=p&&(W=Z.Utils.arraySplice(W,p,1)));if(0!=Kb){b=0;for(c=Ka.length;b<c;b++)p=Ka[b],p.alpha=1;Z.Utils.arrayClear(Ka);Z.Utils.arrayClear(fb)}if(0==
Z.debug||1==Z.debug)n.validateView("tilesToDisplay",null,eb.length),n.validateView("tilesInCache",null,$a.length),n.validateView("tilesToLoad",null,W.length);else if(2==Z.debug||3==Z.debug)n.validateView("tilesToDisplay",null,eb.length,eb),n.validateView("tilesInCache",null,$a.length,$a),n.validateView("tilesToLoad",null,W.length,W)}}function w(a,b,c,p,d,g){d||Z.Utils.clearDisplay(a);if("canvasCopy"==p)Z.Utils.clearDisplay($),ma.restore(),ma.save(),ma.scale(1,1),ma.drawImage(Ta,-Ra,-Sa),ma.restore(),
ma.save(),ma.scale(P,P);else{d=n.z542(b);g=[];if(null===c)for(var e=0,k=pb.length;e<k;e++)g[e]=pb[e];else if(0<c.length)for(e=0,k=c.length;e<k;e++){var q=c[e];q&&q.t==b&&(b==ea&&!aa||q.c>=d.l&&q.c<=d.r&&q.r>=d.t&&q.r<=d.b)&&(g[g.length]=c[e])}if(0<g.length)if(n.validateView("z622-"+a.id,null,null,g),"centerOut"==p)for(e=Math.floor(g.length/2),k=g.length;e<k;e++)M(a,b,g[e]),g.length-e-1!=e&&M(a,b,g[g.length-e-1]);else for(e=0,k=g.length;e<k;e++)M(a,b,g[e]);else n.validateView("No cached tiles in view");
n.validateView("blankLine")}}function x(a,b){var c=n.z542();syncTransitionCanvas();for(var p=0,d=b.length;p<d;p++){var g=b[p];g&&g.t==a&&(a==ea||g.c>=c.l&&g.c<=c.r&&g.r>=c.t&&g.r<=c.b)&&M(Ta,a,g)}}function y(a,b,c,p){var d="undefined"!==typeof p&&null!==p?"-"+p:"";if(0<a.length){n.validateView("z577"+d,null,null,a);d=(new Date).getTime();if("centerOut"==c){c=Math.floor(a.length/2);for(var g=a.length;c<g;c++){var e=a[c];e&&(e=new G(e,p),ga(e,d,b));a.length-c-1!=c&&(e=a[a.length-c-1])&&(e=new G(e,p),
ga(e,d,b))}}else for(c=0,g=a.length;c<g;c++)if(e=a[c])e=new G(e,p),ga(e,d,b);n.validateView("blankLine")}else n.validateView("z577"+d,"No new tiles requested")}function G(a,b){this.name=a;var c=new R(a);this.t=c.t;this.c=c.c;this.r=c.r;this.x=Math.floor(this.c*Ia);this.y=Math.floor(this.r*Ja);this.image=null;this.alpha=0;this.url=n.formatTilePath(this.t,this.c,this.r,b);this.style=this.elmt=this.loadTime=null}function R(a){this.t=parseInt(a.substring(0,a.indexOf("-")),10);this.c=parseInt(a.substring(a.indexOf("-")+
1,a.lastIndexOf("-")),10);this.r=parseInt(a.substring(a.lastIndexOf("-")+1),10)}function ha(a,b,c){c=b+c*la[a];b=8*c+ob[a];c=Math.floor(c/gb);var p=c*gb,p=p+gb>Da[a]?8*(Da[a]-p):rc;this.chunkStart=ob[a]+c*rc;this.chunkEnd=this.chunkStart+p;this.offsetStartInChunk=b-this.chunkStart;this.chunkID=a.toString()+"-"+c.toString()}function Q(a,b,c){c=b+c*la[a];b=4*c+db[a];c=Math.floor(c/gb);var p=c*gb,p=p+gb>Da[a]?4*(Da[a]-p):sc;this.chunkStart=db[a]+c*sc;this.chunkEnd=this.chunkStart+p;this.bcStartInChunk=
b-this.chunkStart;this.chunkID=a.toString()+"-"+c.toString()}function A(a,b){for(var c=0,p=qa.length;c<p;c++){var d=qa[c].split(",");d[0]==a&&d[5]==b&&(void 0!==d[4]&&"image-display"==d[4]?La[La.length]=d[1]+"-"+d[2]+"-"+d[3]:"image-backfill"==d[4]&&(Ua[Ua.length]=d[1]+"-"+d[2]+"-"+d[3]),qa=Z.Utils.arraySplice(qa,c,1),c--,p--)}0<La.length&&(La.sort(),La=Z.Utils.arrayUnique(La),n.validateView("z637",La),X(La,r,"simple","image-display"));0<Ua.length&&(Ua.sort(),Ua=Z.Utils.arrayUnique(Ua),X(Ua,H,"simple",
"image-backfill"))}function X(a,b,c,d){c=(new Date).getTime();for(var g=0,e=a.length;g<e;g++){var k=null;if(k=a[g])if(a=Z.Utils.arraySplice(a,g,1),g--,e--,index=Z.Utils.arrayIndexOfObjectValue(qb,"name",k),-1!=index?(k=qb[index],qb=Z.Utils.arraySplice(qb,index,1),k.url=n.formatTilePath(k.t,k.c,k.r,d)):k=new G(k,d),null!=k&&-1==k.url.indexOf("NaN"))n.validateView("z577Retry",k.name+"  "+k.url),ga(k,c,b);else if(-1==k.url.indexOf("NaN")){var q=parseInt(Z.Utils.getResource("z268MEDIUM"),10);Z.Utils.showMessage(Z.Utils.getResource("z280-ZIF")+
k.name+".jpg",!1,q,"center",!1)}}}function ga(a,b,c){var d=a.name;if("z647"==a.url.substr(0,8)){g(a);b=a.name;c=Z.Utils.arrayIndexOf(W,b);-1!=c&&(W=Z.Utils.arraySplice(W,c,1));if("ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)c=Z.Utils.arrayIndexOf(La,b),-1!=c&&(La=Z.Utils.arraySplice(La,c,1));Ka[Ka.length]=a;fb[fb.length]=b}else if("offsetLoading"==a.url)-1==Z.Utils.arrayIndexOfObjectValue(qb,"name",d)&&(qb[qb.length]=a),n.validateView("z581DelayForOffset",d);else if("offsetLoading"!=
a.url){var e=c==r?"image-display":"image-backfill",k=a.t==Ib&&lc||a.t==Jb&&nc||a.t==Ab&&pc;"image-display"==e&&k||(a.loadTime=b,n.validateView("z581-"+e,d),Dc.loadImage(a.url,Z.Utils.createCallback(null,c,a),e,a))}}function r(a,b){if(a&&b){a.image=b;var c=a.name,d=Z.Utils.arrayIndexOf(W,c);if(-1!=d){W=Z.Utils.arraySplice(W,d,1);g(a);-1==Z.Utils.arrayIndexOf(fb,c)&&(fb[fb.length]=c,Ka[Ka.length]=a);Lb||(Lb=window.setInterval(ca,50));Kb=W.length;if(0==Kb){Z.useCanvas&&0<D&&(Tb?(x(I,wa),w($,I,wa,"canvasCopy",
!1,"4. Updating view: all new tiles loaded"),window.setTimeout(function(){Z.Utils.clearDisplay(Ta)},200),Tb=!1):w($,I,wa,"centerOut",!1,"4. Updating view: all new tiles loaded"));for(;hb.length>D&&wa.length>D;)hb=Z.Utils.arraySplice(hb,0,1),wa=Z.Utils.arraySplice(wa,0,1);tc=0}n.validateView("onTileLoad",a.name,a.loadTime);n.updateProgress(tc,Kb)}}else"undefined"!==typeof b&&null!==b||console.log(Z.Utils.getResource("z280")+a.name+".jpg")}function H(a,b){if(a&&b){a.image=b;var c=a.name;sa[sa.length]=
a;var d=Z.Utils.arrayIndexOf(va,c);-1!=d&&(va=Z.Utils.arraySplice(va,d,1));if("ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)c=Z.Utils.arrayIndexOf(Ua,c),-1!=c&&(Ua=Z.Utils.arraySplice(Ua,c,1));a.alpha=1;a.t==ea&&M(V,ea,a);n.validateView("z599",a.name);a.t==I&&r(a,b)}else if("undefined"===typeof b||null===b)Z.mobileDevice?console.log(Z.Utils.getResource("z280")+a.name+".jpg"):Z.Utils.showMessage(Z.Utils.getResource("z280")+a.name+".jpg")}function ca(a){for(var b=a=0,c=Ka.length;b<
c;b++){var d=Ka[b];d.t==I?(0!=Ub&&1>d.alpha+Ub?d.alpha+=Ub:(d.alpha=1,a++),M($,I,d),a>=c&&(window.clearInterval(Lb),Lb=null,b=c)):(Ka=Z.Utils.arraySplice(Ka,b,1),fb=Z.Utils.arraySplice(fb,b,1),d=Z.Utils.arrayIndexOf(W,d.name),-1!=d&&(W=Z.Utils.arraySplice(W,d,1)),c--)}}function M(a,b,c){if("z647"!=c.url.substr(0,8)&&0!=c.image.width&&0!=c.image.height){n.validateView("z507",c.name);var d=c.x,g=c.y;b=S(b,1);ua=L(Ea,n.getZoom());var e=8<ua;Z.useCanvas?(a==$||a==Ta||a==V&&aa?(d-=Z.imageX*b,g-=Z.imageY*
b):a==F&&(aa||e)&&(e=n.calculateCurrentCenterCoordinates(),d-=e.x*b,g-=e.y*b),b=a.getContext("2d"),Z.alphaSupported&&1>c.alpha&&"transitionCanvas"!=a.id&&-1==a.id.indexOf("oversizeDisplay")&&(b.globalAlpha=c.alpha),b.drawImage(c.image,d,g),Z.alphaSupported&&1>c.alpha&&"transitionCanvas"!=a.id&&"oversizeDisplay"!=a.id&&(b.globalAlpha=1),2==Z.debug&&z521(a,c.name,d,g,P)):(a==$?(d-=Z.imageX*b-Ra/P,g-=Z.imageY*b-Sa/P,b=P):b=Qa,c.elmt||(c.elmt=Z.Utils.createContainerElement("img"),c.elmt.onmousedown=Z.Utils.preventDefault,
Z.Utils.addEventListener(c.elmt,"contextmenu",Z.Utils.preventDefault),c.elmt.src=c.url,c.style=c.elmt.style,c.style.position="absolute",Z.Utils.renderQuality(c,Z.renderQuality),Z.cssTransformsSupported&&(c.style[Z.cssTransformProperty+"Origin"]="0px 0px")),c.elmt.parentNode!=a&&a.appendChild(c.elmt),a=c.style,a.display="none",Z.cssTransformsSupported?a[Z.cssTransformProperty]=["matrix(",(c.image.width/c.elmt.width*b).toFixed(8),",0,0,",(c.image.height/c.elmt.height*b).toFixed(8),",",(d*b).toFixed(8),
Z.cssTransformNoUnits?",":"px,",(g*b).toFixed(8),Z.cssTransformNoUnits?")":"px)"].join(""):(a.width=c.image.width*b+"px",a.height=c.image.height*b+"px",a.left=d*b+"px",a.top=g*b+"px"),a.display="inline-block",Z.Utils.setOpacity(c,c.alpha))}}function N(a,b){var c=S(b,1),d=Math.floor(a.l*c/Ia),g=Math.floor(a.r*c/Ia),e=Math.floor(a.t*c/Ja),c=Math.floor(a.b*c/Ja);0>d&&(d=0);g>la[b]-1&&(g=la[b]-1);0>e&&(e=0);c>Ba[b]-1&&(c=Ba[b]-1);this.l=d;this.r=g;this.t=e;this.b=c}function C(a,b,c,d,g,e,k){this.l=a+
c/k;this.r=a+d/k;this.t=b+g/k;this.b=b+e/k}function O(a,b){var c=a-Z.Utils.getElementPosition(Z.ViewerDisplay).x,d=b-Z.Utils.getElementPosition(Z.ViewerDisplay).y;return new Z.Utils.Point(c,d)}function da(a,b,c,d){if("undefined"===typeof c||null===c)c=Z.imageZ;if("undefined"===typeof d||null===d)d=Z.imageR;0>d&&(d+=360);var g=parseFloat(u.left)+Ra,e=parseFloat(u.top)+Sa;a-=g;b-=e;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(a,b,d),a=viewportClickPt.x,b=viewportClickPt.y);return new Z.Utils.Point(Z.imageX+
a/c,Z.imageY+b/c)}function xa(a,b,c,d){if("undefined"===typeof c||null===c)c=Z.imageZ;if("undefined"===typeof d||null===d)d=Z.imageR;0>d&&(d+=360);a=(Z.imageX-a)*c;b=(Z.imageY-b)*c;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(a,b,-d),a=viewportClickPt.x,b=viewportClickPt.y);return new Z.Utils.Point(ia+a,ja+b)}function S(a,b){return ra[a]/Z.imageW*b}function L(a,b){return b/(ra[a]/Z.imageW)}function B(a,b,c,d,g){if(Z.constrainPan){d=Math.round(d);var e=a,k=b;c="undefined"!==typeof c&&null!==c?
c:Z.imageZ;d="undefined"!==typeof d&&null!==d?d:Z.imageR;0>d&&(d+=360);var q=Z.Utils.getDisplayPositionRotated(u,d),h=Z.imageW,f=Z.imageH,n=fa,t=ba,l=Math.round(h*c),ka=Math.round(f*c);if("container"==g){var m=c,E=d;if("undefined"===typeof m||null===m)m=Z.imageZ;if("undefined"===typeof E||null===E)E=Z.imageR;0>E&&(E+=360);a=(ia-a)/m;b=(ja-b)/m;var Xa,x;switch(E){case 0:Xa=Z.imageX+a;x=Z.imageY+b;break;case 90:Xa=Z.imageX+b;x=Z.imageY-a;break;case 180:Xa=Z.imageX-a;x=Z.imageY-b;break;case 270:Xa=Z.imageX-
b,x=Z.imageY+a}b=new Z.Utils.Point(Xa,x);a=b.x;b=b.y}E=Z.constrainPanStrict?0:n/2/c;x=Z.constrainPanStrict?0:t/2/c;Xa=(n+q.y)/2/c-E;E=h-(n+q.y)/2/c+E;m=(t+q.x)/2/c-x;q=f-(t+q.x)/2/c+x;a=(0==d||180==d)&&l>n||(90==d||270==d)&&l>t||!Z.constrainPanStrict?a<=Xa?Xa:a>=E?E:a:h/2;b=(0==d||180==d)&&ka>t||(90==d||270==d)&&ka>n||!Z.constrainPanStrict?b<=m?m:b>=q?q:b:f/2;if("container"==g){var y;g=c;c=d;if("undefined"===typeof g||null===g)g=Z.imageZ;if("undefined"===typeof c||null===c)c=Z.imageR;0>c&&(c+=360);
var G;switch(c){case 0:y=a-Z.imageX;G=b-Z.imageY;break;case 90:y=Z.imageY-b;G=a-Z.imageX;break;case 180:y=Z.imageX-a;G=Z.imageY-b;break;case 270:y=b-Z.imageY,G=Z.imageX-a}y=new Z.Utils.Point(ia-y*g,ja-G*g);a=y.x;b=y.y}a==e&&b==k||Z.Utils.validateCallback("panConstrained")}return new Z.Utils.Point(a,b)}function J(a){a>Z.maxZ?(a=Z.maxZ,Z.Utils.validateCallback("zoomConstrainedMax")):a<Z.minZ&&(a=Z.minZ,Z.Utils.validateCallback("zoomConstrainedMin"));return a}function g(a){if(0<D){var b=Z.Utils.arrayIndexOf(hb,
a.name);-1!=b&&(hb=Z.Utils.arraySplice(hb,b,1),wa=Z.Utils.arraySplice(wa,b,1));hb[hb.length]=a.name;wa[wa.length]=a}}function E(){window.clearTimeout(wb);wb=null;Bb=((new Date).getTime()-tilesTimeStart)/1E3;var a=Vb*Bb,a=Cb&&xb<a,b=Cb&&xb>=Mb;0<Cb?Nb<Ec?a||b?(Nb+=1,n.updateView(!0)):wb=window.setTimeout(E,uc):console.log(Z.Utils.getResource("ERROR_VALIDATEVIEW")):(Nb=0,Z.Utils.validateCallback("viewUpdateComplete"),Z.Utils.validateCallback("viewUpdateCompleteGetLabelIDs"))}function ka(a){Z.preventDupCall||
(Z.priorX=Z.imageX,Z.priorY=Z.imageY,Z.priorZ=Z.imageZ,Z.priorR=Math.round(Z.imageR));Z.preventDupCall="undefined"!==typeof a&&null!==a}function q(a,b,c,d,g,e){e||n.zoomAndPanAllStop();Z.maskingSelection&&Z.maskClearOnUserAction&&n.clearMask();if("undefined"===typeof a||null===a)a=Z.imageW/2;if("undefined"===typeof b||null===b)b=Z.imageH/2;"undefined"===typeof c||null===c?c=Z.fitZ:1<c&&(c/=100);if("undefined"===typeof d||null===d)d=Z.imageR;c=J(c);d=90*Math.round(Math.abs(d)/90)*Z.Utils.getSign(d);
-360>=d?d+=360:360<=d&&(d-=360);a=B(a,b,c,d,"image");Z.imageX=a.x;Z.imageY=a.y;Z.imageZ=c;d!=Z.imageR&&Z.Utils.rotateElement(u,d);Z.imageR=d;n.updateView(!0);"function"===typeof g&&g()}function Ma(){if(ab&&(0!=ya||0!=za||0!=Fa)){var a=ya,b=za,c=Fa,d=n.getZoom();0!=c&&(d=S(I,P*(1+c)),d=J(d),d!=Z.imageZ&&rb(d));if(0!=a||0!=b)a=parseFloat(u.left)+a,b=parseFloat(u.top)+b,d=B(a,b,d,Z.imageR,"container"),u.left=Math.round(d.x)+"px",u.top=Math.round(d.y)+"px",b=d.x-ia,d=d.y-ja,F&&aa&&(Z.mobileDevice||Math.abs(b)>
fa/2||Math.abs(d)>ba/2)&&w(F,Ea,sa,"simple",!1,"Updating backfill oversize display");0==Wb%2&&n.syncViewportRelated();Wb++;ab=window.setTimeout(Ma,Xb)}}function sb(a,b,c,d,g,e,k){Db++;var q=g/e,h=Db*q,f=Z.Utils.easing(Z.imageX,a,h,g),t=Z.Utils.easing(Z.imageY,b,h,g),l=Z.Utils.easing(Z.imageZ,c,h,g),h=Z.Utils.easing(Z.imageR,d,h,g),t=xa(f,t,l),f=t.x,t=t.y,ka=!1,m=syncOversize=!1;if(parseFloat(u.left)!=f||parseFloat(u.top)!=t)u.left=f+"px",u.top=t+"px",m=!0,F&&aa&&(syncOversize=!0);l!=Z.imageZ&&(rb(l,
!1),ka=m=!0,F&&aa&&(oCtx.restore(),oCtx.save(),oCtx.scale(ua,ua),syncOversize=!0));h!=Z.imageR&&(Z.Utils.rotateElement(u,h),F&&aa&&(oCtx.rotate((h-Z.imageR)*Math.PI/180),syncOversize=!0),Z.imageR=h,m=!0);syncOversize&&w(F,Ea,sa,"simple",!1,"Updating backfill oversize display");0==Db%2&&n.syncViewportRelated(!1,!1,ka,m,ka);l=Z.tour&&Z.tourStop&&0==Math.round(Z.imageR%90);Db<e+1&&!l?ib=window.setTimeout(function(){sb(a,b,c,d,g,e,k)},q):(Z.interactivityOff=!1,ib&&(window.clearTimeout(ib),ib=null),n.updateView(),
"function"===typeof k&&k())}function tb(){Wb=Fa=za=ya=0;ab&&(window.clearTimeout(ab),ab=null)}function rb(a,b){var c=!1,d=L(I,a);if(d!=P){P=d;var c=d/Za,g=na*c,e=oa*c,k=(na-g)/2,q=(oa-e)/2;d<Za&&(d=B(parseFloat(u.left),parseFloat(u.top),a,Z.imageR,"container"),u.left=d.x+"px",u.top=d.y+"px");if(Z.useCanvas)if(pa.width=g+"px",pa.height=e+"px",pa.left=k+"px",pa.top=q+"px",ua=L(Ea,n.getZoom()),d=8<ua,aa||d){if(null!==oCtx&&"undefined"===typeof b||null===b||b&&F&&("in"!=Z.zooming||g>Z.scaleThreshold||
e>Z.scaleThreshold))oCtx.restore(),oCtx.save(),oCtx.scale(ua,ua),oCtx.rotate(Z.imageR*Math.PI/180),w(F,Ea,sa,"simple",!1,"Updating backfill oversize display");Qa=c=L(ea,a);g=c/tierBackfillScalePrior;c=Va*g;g*=Wa;e=Ga+(Va-c)/2;d=Ha+(Wa-g)/2;K.width=c+"px";K.height=g+"px";K.left=e+"px";K.top=d+"px"}else F&&Z.Utils.clearDisplay(F),g=Va*c,e=Wa*c,k=Ga+Z.imageX*(1-c)*Z.imageZ,q=Ha+Z.imageY*(1-c)*Z.imageZ,K.width=g+"px",K.height=e+"px",K.left=k+"px",K.top=q+"px";else w($,I,wa,"centerOut",!1,"Scaling: non-canvas zoom"),
aa?(c=vc,Va=na*c,Wa=oa*c,Ga=-(na/c),Ha=-(oa/c),Yb=Ra*c,Zb=Sa*c,V.width=Va,V.height=Wa,K.width=V.width+"px",K.height=V.height+"px"):(c=Ca[ea],V.width=ra[ea],V.height=c,c=Z.imageY*a,Ga=Ra-Z.imageX*a,Ha=Sa-c),K.left=Ga+"px",K.top=Ha+"px",w(V,ea,sa,"simple",!1,"Scaling: non-canvas zoom - backfill");c=!0}return c}function ub(){n.toggleFullViewMode(!1)}function k(a){a=Z.Utils.event(a);var b=a.type;if(a&&b){Z.Utils.isRightMouseButton(a);if("mousedown"==b||"touchstart"==b||Z.tourPlaying&&Z.tourStop)n.zoomAndPanAllStop(),
Z.interactivityOff=!1;Z.touchSupport&&!Z.clickZoomAndPanBlock&&"touchmove"!=b&&"gesturechange"!=b&&a.preventDefault();if("mousedown"==b)window.setTimeout(function(){n.zoomAndPanAllStop(!1,!0)},1),Z.maskingSelection&&Z.maskClearOnUserAction&&n.clearMask();else if("touchstart"==b||"gesturestart"==b)a.preventDefault(),n.zoomAndPanAllStop(!1,!0),Z.maskingSelection&&Z.maskClearOnUserAction&&n.clearMask();switch(b){case "mouseover":Z.fullView||"TEXTAREA"==document.activeElement.tagName||Z.Viewer.initializeViewerKeyDefaultListeners(!0);
break;case "mousedown":!Z.fullView&&document.activeElement&&document.activeElement.blur();Z.Viewer.initializeViewerKeyEventListeners(!0);Z.Utils.addEventListener(document,"mousemove",k);Z.Utils.addEventListener(document,"mouseup",k);break;case "mouseup":Z.Utils.removeEventListener(document,"mousemove",k),Z.Utils.removeEventListener(document,"mouseup",k)}Xa(a);if("mousedown"==b||"mousemove"==b)return!1}}function Xa(a){a=Z.Utils.event(a);var b=a.type;if(a&&b){var c,d;if("touchstart"==b||"touchmove"==
b||"touchend"==b||"touchcancel"==b)c=Z.Utils.getFirstTouch(a),"undefined"!==typeof c&&(d=new Z.Utils.Point(c.pageX,c.pageY));else{Z.Utils.target(a);Z.Utils.relatedTarget(a);Z.Utils.isRightMouseButton(a);var g=a.altKey;d=Z.Utils.getMousePosition(a);Z.smoothPan&&(vb=d)}"DOMMouseScroll"==b&&(b="mousewheel");var e=n.getZoom();"undefined"!==typeof d&&null!==d&&n.getClickCoordsInImage(a,e,d);switch(b){case "mousedown":Z.mouseIsDown=!0;Aa=new Z.Utils.Point(d.x,d.y);T.mouseXPrior=d.x;T.mouseYPrior=d.y;Z.Utils.hideMessage();
Z.smoothPan&&!g&&Z.mousePan&&1<Z.smoothPanEasing&&(t(void 0),$b=Aa,null===Eb&&(Eb=new Z.Utils.Point(parseFloat(u.left),parseFloat(u.top))),null===Ya&&(Ya=window.setInterval(Fc,50)));break;case "mousemove":Na=new Z.Utils.Point(d.x,d.y);Y&&(clearTimeout(Y),Y=null);!g&&Z.mousePan&&(Ya?vb=d:(e=d.x-T.mouseXPrior,a=d.y-T.mouseYPrior,isNaN(e)||isNaN(a)||(e=parseFloat(u.left)+e,a=parseFloat(u.top)+a,b=B(e,a,Z.imageZ,Z.imageR,"container"),u.left=b.x+"px",u.top=b.y+"px",T.mouseXPrior=d.x,T.mouseYPrior=d.y,
e=b.x-ia,a=b.y-ja,F&&aa&&(Z.mobileDevice||Math.abs(e)>fa/2||Math.abs(a)>ba/2)&&w(F,Ea,sa,"simple",!1,"Updating backfill oversize display"),Z.Navigator&&(d=n.calculateCurrentCenterCoordinates(b,Z.imageZ,Z.imageR),Z.Navigator.z658(d)))));break;case "mouseup":Z.mouseIsDown=!1;document.mousemove=null;document.mouseup=null;Z.mouseOutDownPoint?(d=Z.mouseOutDownPoint,n.getClickCoordsInImage(a,e,Z.mouseOutDownPoint)):d=new Z.Utils.Point(d.x,d.y);d=Z.Utils.calculatePointsDistance(Aa.x,Aa.y,d.x,d.y);if(4>d)if(Z.clickZoom){d=
Y&&Z.doubleClickZoom?!0:!1;var k=n.getClickZoomCoords3D(a,Aa,I,P,d);Z.doubleClickZoom?Y?(clearTimeout(Y),Y=null,n.zoomAndPanToView(k.x,k.y,k.z)):Y=setTimeout(function(a){Y=null;n.zoomAndPanToView(k.x,k.y,k.z)},Z.doubleClickDelay):window.setTimeout(function(){n.zoomAndPanToView(k.x,k.y,k.z)},1)}else Z.clickPan&&n.zoomAndPanToView(k.x,k.y,Z.imageZ);else Na=null,Z.mousePan&&!Z.smoothPan&&n.updateView();Z.mouseOutDownPoint&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&
1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1));break;case "touchstart":c&&!bb&&(Z.mouseIsDown=!0,Fb=!1,Aa=new Z.Utils.Point(d.x,d.y),T.mouseXPrior=d.x,T.mouseYPrior=d.y,Z.Utils.hideMessage());break;case "touchmove":!c||bb||Fb||(Na=new Z.Utils.Point(d.x,d.y),Y&&(clearTimeout(Y),Y=null),!g&&Z.mousePan&&(Ya?vb=d:(e=d.x-T.mouseXPrior,a=d.y-T.mouseYPrior,isNaN(e)||isNaN(a)||(e=parseFloat(u.left)+e,a=parseFloat(u.top)+a,b=B(e,a,Z.imageZ,Z.imageR,"container"),u.left=b.x+"px",u.top=b.y+"px",T.mouseXPrior=
d.x,T.mouseYPrior=d.y,e=b.x-ia,a=b.y-ja,F&&aa&&(Z.mobileDevice||Math.abs(e)>fa/2||Math.abs(a)>ba/2)&&w(F,Ea,sa,"simple",!1,"Updating backfill oversize display"),Z.Navigator&&(d=n.calculateCurrentCenterCoordinates(b,Z.imageZ,Z.imageR),Z.Navigator.z658(d))))));break;case "touchend":bb||Fb||(Z.mouseIsDown=!1,document.mousemove=null,document.mouseup=null,Z.mouseOutDownPoint?(d=Z.mouseOutDownPoint,n.getClickCoordsInImage(a,e,Z.mouseOutDownPoint)):d="undefined"!==typeof d&&null!==d?new Z.Utils.Point(d.x,
d.y):"undefined"!==typeof Na&&null!==Na?Na:Aa,d=Z.Utils.calculatePointsDistance(Aa.x,Aa.y,d.x,d.y),4>d?Z.clickZoom?(d=Y&&Z.doubleClickZoom?!0:!1,k=n.getClickZoomCoords3D(a,Aa,I,P,d),Z.doubleClickZoom?Y?(clearTimeout(Y),Y=null,n.zoomAndPanToView(k.x,k.y,k.z)):Y=setTimeout(function(a){Y=null;n.zoomAndPanToView(k.x,k.y,k.z)},Z.doubleClickDelay):window.setTimeout(function(){n.zoomAndPanToView(k.x,k.y,k.z)},1)):Z.clickPan&&n.zoomAndPanToView(k.x,k.y,Z.imageZ):(Na=null,Z.mousePan&&!Ya&&n.updateView()),
Z.mouseOutDownPoint&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1)));break;case "touchcancel":bb||Fb||(Z.mouseIsDown=!1,document.mousemove=null,document.mouseup=null,Z.mouseOutDownPoint?(d=Z.mouseOutDownPoint,n.getClickCoordsInImage(a,e,Z.mouseOutDownPoint)):d="undefined"!==typeof d&&null!==d?new Z.Utils.Point(d.x,d.y):"undefined"!==typeof Na&&null!==Na?Na:Aa,d=Z.Utils.calculatePointsDistance(Aa.x,Aa.y,d.x,d.y),
4>d?Z.clickZoom?(d=Y&&Z.doubleClickZoom?!0:!1,k=n.getClickZoomCoords3D(a,Aa,I,P,d),Z.doubleClickZoom?Y?(clearTimeout(Y),Y=null,n.zoomAndPanToView(k.x,k.y,k.z)):Y=setTimeout(function(a){Y=null;n.zoomAndPanToView(k.x,k.y,k.z)},Z.doubleClickDelay):window.setTimeout(function(){n.zoomAndPanToView(k.x,k.y,k.z)},1)):Z.clickPan&&n.zoomAndPanToView(k.x,k.y,Z.imageZ):(Na=null,Z.mousePan&&!Ya&&n.updateView()),Z.mouseOutDownPoint&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&
1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1)));break;case "gesturestart":Gc(a);bb||(bb=window.setInterval(Hc,Ic));break;case "gesturechange":ac=Math.round(100*a.scale)/100;break;case "gestureend":bb&&(window.clearInterval(bb),Fb=!0,bb=null),Z.mousePan&&n.updateView()}}}function t(a){null!==Ya&&a&&(window.clearInterval(Ya),Ya=null);Eb=bc=cc=Oa=null;smoothPanDeltaX=smoothPanDeltaY=jb=kb=0}function Fc(a){if(Z.mouseIsDown||Oa){var b=(Oa?bc:vb.x)-$b.x,c=(Oa?cc:vb.y)-$b.y,d=parseFloat(u.left)-Eb.x,
g=parseFloat(u.top)-Eb.y;if(!(isNaN(b)||isNaN(c)||isNaN(d)||isNaN(g)||0==b&&0==c&&0==d&&0==g)){var e=Oa?Z.smoothPanGlide:1;a=Oa?1:100;smoothPanDeltaX=Math.round((b-d)/(Z.smoothPanEasing*e)*a)/a;smoothPanDeltaY=Math.round((c-g)/(Z.smoothPanEasing*e)*a)/a;Z.mouseIsDown?(jb=smoothPanDeltaX,kb=smoothPanDeltaY):(Math.abs(smoothPanDeltaX)>Math.abs(jb)&&(smoothPanDeltaX=jb),Math.abs(smoothPanDeltaY)>Math.abs(kb)&&(smoothPanDeltaY=kb));c=parseFloat(u.left)+smoothPanDeltaX;d=parseFloat(u.top)+smoothPanDeltaY;
b=B(c,d,Z.imageZ,Z.imageR,"container");u.left=b.x+"px";u.top=b.y+"px";smoothPanDeltaX-=c-b.x;smoothPanDeltaY-=d-b.y;c=b.x-ia;d=b.y-ja;F&&aa&&(Oa||Z.mobileDevice||Math.abs(c)>fa/2||Math.abs(d)>ba/2)&&w(F,Ea,sa,"simple",!1,"Updating backfill oversize display");Oa&&0==Math.round(smoothPanDeltaX*a)/a&&0==Math.round(smoothPanDeltaY*a)/a&&(Oa=!1);Z.Navigator&&(a=n.calculateCurrentCenterCoordinates(b,Z.imageZ,Z.imageR),Z.Navigator.z658(a))}}else if(Z.mouseIsDown||null!==Oa||0==smoothPanDeltaX||0==smoothPanDeltaY)t(!0),
n.updateView();else if(a=parseFloat(u.left)+jb,b=parseFloat(u.top)+kb,b=B(a,b,Z.imageZ,Z.imageR,"container"),jb=b.x-parseFloat(u.left),kb=b.y-parseFloat(u.top),0!=jb||0!=kb)bc=vb.x+jb,cc=vb.y+kb,Oa=!0}function Gc(a){a=Z.Utils.event(a);a.preventDefault();ac=Math.round(100*a.scale)/100}function Hc(a){if(Z.mousePan){a=S(I,Za*ac);var b=J(a);a!=Z.imageZ&&n.z633(b)}}var Ob=0;"undefined"!==typeof a&&null!==a&&(Ob=a);var v;v="undefined"!==typeof b&&null!==b?b:Z.imagePath;var n=this,Sb=!1,gb=parseInt(Z.Utils.getResource("z90"),
10),rc=8*gb,sc=4*gb,Rb=0,Ia=parseInt(Z.Utils.getResource("z221"),10),Ja=parseInt(Z.Utils.getResource("z219"),10),dc=parseFloat(Z.Utils.getResource("z218")),U=dc/2,D=parseInt(Z.Utils.getResource("z220"),10),wc=1==Z.toolbarVisible?Z.toolbarH:0,lb,F,Pa,mb,T,u,ec,V,K,nb,fc,$,pa,ma,gc,Ta,Gb,Hb;(function(a){if("undefined"===typeof a||null===a)a=0;a=a.toString();Z.useCanvas&&!F&&(lb=Z.Utils.createContainerElement("canvas","oversizeDisplay"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none",
"0px","transparent none","0px","0px","normal"),Z.ViewerDisplay.appendChild(lb),F=lb,Pa=F.style);T||(mb=Z.Utils.createContainerElement("div","viewportContainer"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Z.ViewerDisplay.appendChild(mb),T=mb,u=T.style);V||(ec=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportBackfillDisplay"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none",
"0px","0px","normal"),mb.appendChild(ec),V=ec,K=V.style);$||(fc=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportDisplay"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),mb.appendChild(fc),$=fc,pa=$.style);Z.useCanvas&&!Ta&&(gc=Z.Utils.createContainerElement("canvas","transitionCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),mb.appendChild(gc),Ta=
gc,Gb=Ta.style);Z.useCanvas?(F&&(oCtx=F.getContext("2d")),nb=V.getContext("2d"),ma=$.getContext("2d"),Hb=Ta.getContext("2d")):(V.innerHTML="",$.innerHTML="")})(Ob);var ta=1,I=0,ea=0,aa=!1,Ea=0,Tb=!1,P,Za,Qa,ua,ra=[],Ca=[],la=[],Ba=[],Da=[],ob=[];tierTileOffsetsCount=[];tierTileOffsetChunks=[];tierTileOffsetLast=[];var db=[];tierTileByteCountsCount=[];tierTileByteCountChunks=[];tierTileByteCountLast=[];var eb=[],W=[],Ka=[],fb=[],wa=[],hb=[],pb=[],$a=[],Mb,xb,Cb,Bb,Vb,wb=null,Nb=0,Ec=parseInt(Z.Utils.getResource("DEFAULT_VALIDATEVIEWRETRYLIMIT"),
10),uc=parseInt(Z.Utils.getResource("DEFAULT_VALIDATEVIEWRETRYDELAY"),10),sa=[],va=[],La=[],qa=[],qb=[],Ua=[],tc=0,Kb=0,Dc=new Z.NetConnector,kc=parseInt(Z.Utils.getResource("z81"),10),Jc=parseInt(Z.Utils.getResource("z78"),10),oc=parseInt(Z.Utils.getResource("z80"),10),Ab=parseInt(Z.Utils.getResource("z77"),10),Ea=Ab,mc=parseInt(Z.Utils.getResource("z79"),10),Jb=parseInt(Z.Utils.getResource("z76"),10),Ib=parseInt(Z.Utils.getResource("z75"),10),lc=null,nc=null,pc=null,qc=parseFloat(Z.Utils.getResource("z173"),
10),vc=parseFloat(Z.Utils.getResource("z74"),10),fa,ba,xc,Pb,na,oa,Ra,Sa,ia,ja,Va,Wa,Yb,Zb,Ga,Ha;fa=Z.viewerW;ba=Z.viewerH;xc=Pb=0;ba-=wc;0==Z.toolbarPosition&&(Pb+=wc);var Y=null,Aa,Na,bb=null,ac=null,Fb=!1,Ic=parseInt(Z.Utils.getResource("z122"),10),Qb=Math.round(parseFloat(Z.Utils.getResource("z176"))*Z.panSpeed),ya=0,za=0,jb=0,kb=0,Oa=null,bc=null,cc=null,Ya=null,$b=null,Eb=null,vb=null,yb=parseFloat(Z.Utils.getResource("z242"))*Z.zoomSpeed;Z.mobileDevice&&(yb/=2);var Fa=0,ab=null,Wb=0,Xb=parseInt(Z.Utils.getResource("z238"),
10),Ub=parseFloat(Z.Utils.getResource("z112"))*Z.fadeInSpeed,Lb=null,Kc=parseFloat(Z.Utils.getResource("z239")),hc=parseFloat(Z.Utils.getResource("z240"));Z.mobileDevice&&(hc/=2);var ib=null,Db=0;if(!Z.fullScreenVisible&&!Z.fullPageVisible)var yc,zc,Ac,Bc,ic,Cc,zb,jc;h(fa,ba,xc,Pb);if(null!==Z.imagePath&&"null"!=Z.imagePath){if(1==Z.localUse&&"ZoomifyImageFile"==Z.tileSource){Z.Utils.showMessage(Z.Utils.getResource("z290"),!0);return}1==Z.localUse&&(Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||
Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=Z.browserVersion)&&Z.Utils.showMessage(Z.Utils.getResource("z288"),!0);var Lc=new Z.NetConnector;f(v,Lc,Ob)}this.setSizeAndPosition=function(a,b,c,d){h(a,b,c,d)};this.setSizeAndPositionMultiple=function(a,b,c,d){setSizeAndPositionMultiple(a,b,c,d)};this.loadImageProperties=function(a,b,c){f(a,b,c)};this.parseZIFHeader=function(a){e();if(73==a[0]&&73==a[1]&&43==a[2]&&0==a[3]&&8==a[4]&&0==a[5]&&0==a[6]&&0==a[7]&&16==a[8]&&
0==a[9]&&0==a[10]&&0==a[11]&&0==a[12]&&0==a[13]&&0==a[14]&&0==a[15]){for(var b=Z.Utils.longValue(a,8),c=Z.Utils.longValue(a,b),g=1,k=null,q=null,h=null,f=null,t=null,l=null,l=2;0!=b;){for(k=0;k<c;k++)switch(q=b+8+20*k,Z.Utils.shortValue(a,q)){case 256:ra[g-1]=Z.Utils.intValue(a,q+12);break;case 257:Ca[g-1]=Z.Utils.intValue(a,q+12);break;case 322:h=Z.Utils.intValue(a,q+12);break;case 323:f=Z.Utils.intValue(a,q+12);break;case 324:var m=tierTileOffsetsCount[g-1]=Z.Utils.longValue(a,q+4);ob[g-1]=Z.Utils.longValue(a,
q+12);t+=m;break;case 325:m=tierTileByteCountsCount[g-1]=Z.Utils.longValue(a,q+4),db[g-1]=1==m?Z.Utils.intValue(a,q+12):2==m?Z.Utils.intValue(a,q+12)+","+Z.Utils.intValue(a,q+16):Z.Utils.longValue(a,q+12)}b=Z.Utils.longValue(a,b+20*c+8);c=Z.Utils.longValue(a,b);g++}k=ra[0];q=Ca[0];ta=g-1;ra.reverse();Ca.reverse();tierTileOffsetsCount.reverse();ob.reverse();tierTileByteCountsCount.reverse();db.reverse();!isNaN(k)&&0<k&&!isNaN(q)&&0<q&&!isNaN(h)&&0<h&&!isNaN(f)&&0<f&&0<t?n.getInitialized()?z627(k,q,
h,f,t,l,null,null,null,null,null):d(k,q,h,f,t,l,null,null,null,null,null):"ZoomifyImageFolder"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z252")):Z.Utils.showMessage(Z.Utils.getResource("z250"))}};this.parseZIFOffsetChunk=function(a,b){var c=Z.Utils.arrayIndexOfObjectValue(tierTileOffsetChunks,"chunkID",b);-1!=c&&(tierTileOffsetChunks[c].chunk=a,A(b,"offset"))};this.parseZIFByteCountChunk=function(a,b){var c=Z.Utils.arrayIndexOfObjectValue(tierTileByteCountChunks,"chunkID",b);-1!=c&&(tierTileByteCountChunks[c].chunk=
a,A(b,"byteCount"))};this.parseZIFImage=function(a,b,c){a="data:image/jpeg;base64,"+Z.Utils.encodeBase64(a);var d;"image-display"==c?d=r:"image-backfill"==c?d=H:"navigator"==c&&(d=Z.Navigator.z556);b=Z.Utils.createCallback(null,d,b);Z.Utils.createImageElementFromBytes(a,b)};this.z602=function(a){m(a)};this.validateXYZDefaults=function(a){a&&Z.Utils.resetParametersXYZ(Z.parameters);var b=parseFloat(Z.Utils.getResource("z143")),c=parseFloat(Z.Utils.getResource("z144")),d=parseFloat(Z.Utils.getResource("z145")),
g=parseFloat(Z.Utils.getResource("DEFAULT_INITIALR")),e=parseFloat(Z.Utils.getResource("z163"));a=parseFloat(Z.Utils.getResource("z153"));b=isNaN(b)?null:b;c=isNaN(c)?null:c;d=isNaN(d)?null:d;g=isNaN(g)?null:g;e=isNaN(e)?null:e;a=isNaN(a)?null:a;Z.parameters?(Z.parameters.zInitialX||(Z.initialX=b),Z.parameters.zInitialY||(Z.initialY=c),Z.parameters.zInitialZoom||(Z.initialZ=d),Z.parameters.zInitialRotation||(Z.initialR=g),Z.parameters.zMinZoom||(Z.minZ=e),Z.parameters.zMaxZoom||(Z.maxZ=a)):(Z.initialX=
b,Z.initialY=c,Z.initialZ=d,Z.initialR=g,Z.minZ=e,Z.maxZ=a);null===Z.initialX&&(Z.initialX=Z.imageW/2);null===Z.initialY&&(Z.initialY=Z.imageH/2);Z.fitZ=n.z468(0);a=n.getInitialized()?n.getRotation():Z.initialR;Z.fitR=n.z468(a);if(null===Z.initialZ||-1==Z.initialZ)Z.initialZ=Z.fitR;if(null===Z.minZ||-1==Z.minZ)Z.minZ=Z.fitZ;if(null===Z.maxZ||-1==Z.maxZ)Z.maxZ=Z.fitZ;Z.initialZ<Z.minZ&&(Z.initialZ=Z.minZ);Z.initialZ>Z.maxZ&&(Z.initialZ=Z.maxZ)};this.getInitialized=function(){return Sb};this.getParsingXML=
function(){return parsingXML};this.getAnnotationsLoaded=function(){return!1};this.getW=function(){return na};this.getImagePath=function(){return v};this.setImagePath=function(a){v=a};this.getViewportID=function(){return Ob};this.getH=function(){return oa};this.getTierCount=function(){return ta};this.getTileW=function(){return Ia};this.getTileH=function(){return Ja};this.getTierCurrent=function(){return I};this.getTierBackfill=function(){return ea};this.getTierBackfillDynamic=function(){return aa};
this.getTierBackfillOversize=function(){return Ea};this.getTierScale=function(){return P};this.getX=function(){var a=parseFloat(u.left)-ia,b=n.getZoom();return Z.imageX-a/b};this.getY=function(){var a=parseFloat(u.top)-ja,b=n.getZoom();return Z.imageY-a/b};this.getZoom=function(){return S(I,P)};this.getRotation=function(){return Z.imageR};this.getTiersScaleUpMax=function(){return dc};this.getTiersScaleDownMax=function(){return U};this.getTilesCacheMax=function(){return D};this.getTierWs=function(){return ra.join(",")};
this.getTierHs=function(){return Ca.join(", ")};this.getTierTileCounts=function(){return Da.join(", ")};this.getTilesLoadingNames=function(){return""==W.join(", ")?"Current view loading complete":W.join(", ")};this.getConstrainPan=function(a){return Z.constrainPan};this.setConstrainPan=function(a){0==a&&(Z.constrainPan=!1);Z.constrainPanStrict=2==a?!0:!1;Z.constrainPan&&Z.constrainPanStrict&&n.toggleConstrainPan(!0)};this.getSmoothPan=function(){return Z.smoothPan};this.setSmoothPan=function(a){Z.smoothPan=
a};this.getSmoothPanEasing=function(){return Z.smoothPanEasing};this.setSmoothPanEasing=function(a){Z.smoothPanEasing=a};this.getSmoothPanGlide=function(){return Z.smoothPanGlide};this.setSmoothPanGlide=function(a){Z.smoothPanGlide=a};this.setVisibility=function(a){a=a?"inline-block":"none";lb&&!Pa&&(Pa=lb.style);Pa&&(Pa.display=a);mb&&!u&&(u=mb.style);u&&(u.display=a)};this.updateView=function(b){if("undefined"!==typeof b&&!0===b||P!=Za||n.getZoom()!=Z.imageZ||parseFloat(u.left)!=ia||parseFloat(u.top)!=
ja){if(!Z.slideStack||a>Z.viewportCurrentID-1&&a<Z.viewportCurrentID+1){var c=!1,d=!1;if(parseFloat(u.left)!=ia||parseFloat(u.top)!=ja)c=!0;if(P!=Za||Z.imageZ!=Z.priorZ)d=!0;ka();var g=!1;if(b||parseFloat(pa.width)!=$.width)Z.useCanvas&&(pa.width=$.width+"px",pa.height=$.height+"px",pa.left="0px",pa.top="0px",ma.restore(),ma.save(),ma.scale(P,P),V&&(aa?(K.width=V.width+"px",K.height=V.height+"px",K.left=Ga+"px",K.top=Ha+"px",nb.restore(),nb.save(),nb.scale(Qa,Qa)):(K.width=Va+"px",K.height=Wa+"px",
K.left=Ga+"px",K.top=Ha+"px"))),g=!0;if(b||parseFloat(u.left)!=ia||parseFloat(u.top)!=ja){var g=parseFloat(u.left)-ia,e=parseFloat(u.top)-ja;0!=Z.imageR&&(e=Z.Utils.rotatePoint(g,e,Z.imageR),g=e.x,e=e.y);u.left=ia+"px";u.top=ja+"px";aa||(Ga=parseFloat(K.left)+g,Ha=parseFloat(K.top)+e,K.left=Ga+"px",K.top=Ha+"px");var k=n.getZoom();Z.imageX-=g/k;Z.imageY-=e/k;g=!0}g&&(w($,I,wa,"centerOut",!1,"1a. Updating view: resetting display positions"),aa&&w(V,ea,sa,"simple",!1,"1b. Updating view: resetting backfill positions"));
g=!1;if("undefined"!==typeof b&&b||P!=Za||n.getZoom()!=Z.imageZ||!Sb){P!=Za&&(Z.imageZ=n.getZoom());Z.imageZ<Z.minZ&&(Z.imageZ=Z.minZ);k=dc;for(e=ta;k/2>=Z.imageZ;)e--,k/=2;e=0>e-1?0:e-1;k=L(e,Z.imageZ);if(e!=I||k!=P)Z.useCanvas&&(ma.restore(),ma.save(),ma.scale(k,k)),I!=e&&(Tb=!0),I=e,P=k;Za=P;aa=!1;I>kc?(ea=I-Jc,aa=!0):ea=I>oc?Ab:I>mc?Jb:Ib;tierBackfillScalePrior=Qa=L(ea,Z.imageZ);var e=ra[ea],k=Ca[ea],q=Z.imageX*Z.imageZ,h=Z.imageY*Z.imageZ;aa?(e=vc,Va=na*e,Wa=oa*e,Ga=-(na/e),Ha=-(oa/e),Yb=Ra*
e,Zb=Sa*e,V.width=Va,V.height=Wa,K.width=V.width+"px",K.height=V.height+"px",K.left=Ga+"px",K.top=Ha+"px",Z.useCanvas&&(F&&(ua=L(Ea,Z.imageZ),oCtx.restore(),oCtx.save(),oCtx.scale(ua,ua),0!=Z.imageR&&oCtx.rotate(Z.imageR*Math.PI/180)),nb.restore(),nb.translate(Yb,Zb),nb.save(),nb.scale(Qa,Qa))):(Va=e*Qa,Wa=k*Qa,Ga=Ra-q,Ha=Sa-h,V.width=e,V.height=k,Z.useCanvas&&(K.width=Va+"px",K.height=Wa+"px"),K.left=Ga+"px",K.top=Ha+"px");w(V,ea,sa,"simple",!1,"2. Updating view: changing tier - backfill");!b&&0<
D&&(g=!0)}else n.validateView("updateView-noChange");aa?s(!0):F&&Z.Utils.clearDisplay(F)}s();w($,I,null,"centerOut",g,"3. Updating view: prior to loading of any new tiles");0<W.length&&y(W,r,"centerOut","image-display");n.syncViewportRelated();c&&Z.Utils.validateCallback("viewPanned");d&&Z.Utils.validateCallback("viewZoomed");(c||d)&&Z.Utils.validateCallback("viewChanged")}};syncTransitionCanvas=function(){Ta.width=$.width;Ta.height=$.height;Gb.width=pa.width;Gb.height=pa.height;Gb.left=pa.left;Gb.top=
pa.top;Hb.restore();Hb.save();Hb.translate(Ra,Sa);Hb.scale(P,P)};this.formatTilePath=function(a,b,c,d){var g;if("ZoomifyImageFile"==Z.tileSource){g="offsetLoading";var e="loading",k="loading",q;if(1==tierTileOffsetsCount[a])e=ob[a];else{var h=new ha(a,b,c),f=h.chunkID+","+a+","+b+","+c+","+d+",offset";q=Z.Utils.arrayIndexOfObjectValue(tierTileOffsetChunks,"chunkID",h.chunkID);-1==q?(n.validateView("z532",h.chunkID+","+a+","+b+","+c+","+d),-1==Z.Utils.arrayIndexOf(qa,f)&&(qa[qa.length]=f),tierTileOffsetChunks[tierTileOffsetChunks.length]=
{chunkID:h.chunkID,chunk:"loading"},q=new Z.NetConnector,q.loadByteRange(v,h.chunkStart,h.chunkEnd,"offset",null,h.chunkID)):"loading"==tierTileOffsetChunks[q].chunk?-1==Z.Utils.arrayIndexOf(qa,f)&&(qa[qa.length]=f):"loading"!=tierTileOffsetChunks[q].chunk&&(q=tierTileOffsetChunks[q].chunk,e=Z.Utils.longValue(q,h.offsetStartInChunk))}1==tierTileByteCountsCount[a]?k=db[a]:(q=b+c*la[a],2==tierTileByteCountsCount[a]?(a=db[a],k=0==q?a.substring(0,a.indexOf(",")):a.substring(a.indexOf(",")+1,a.length)):
(h=new Q(a,b,c),a=h.chunkID+","+a+","+b+","+c+","+d+",byteCount",q=Z.Utils.arrayIndexOfObjectValue(tierTileByteCountChunks,"chunkID",h.chunkID),-1==q?(-1==Z.Utils.arrayIndexOf(qa,a)&&(qa[qa.length]=a),tierTileByteCountChunks[tierTileByteCountChunks.length]={chunkID:h.chunkID,chunk:"loading"},q=new Z.NetConnector,q.loadByteRange(v,h.chunkStart,h.chunkEnd,"byteCount",null,h.chunkID)):"loading"==tierTileByteCountChunks[q].chunk?-1==Z.Utils.arrayIndexOf(qa,a)&&(qa[qa.length]=a):"loading"!=tierTileByteCountChunks[q].chunk&&
(q=tierTileByteCountChunks[q].chunk,k=Z.Utils.intValue(q,h.bcStartInChunk))));"loading"==e||isNaN(e)||"loading"==k||isNaN(k)||(g=v+"?"+e.toString()+","+k.toString())}else if("ZoomifyImageFolder"==Z.tileSource){g=c*la[a]+b;for(e=0;e<a;e++)g+=Da[e];a=v+"/TileGroup"+Math.floor(g/256)+"/"+a+"-"+b+"-"+c+"."+Z.tileType;if(Z.browser==Z.browsers.IE&&9>Z.browserVersion||0==D)a=Z.Utils.cacheProofPath(a);g=a}return g};this.getClickCoordsAtZoom=function(a,b){var c=this.getClickCoordsInImage(a,b);return new Z.Utils.Point(c.x*
b,c.y*b)};this.getClickCoordsInImage=function(a,b,c){a=Z.Utils.event(a);var d=null;if(a){var g=a.type;if("undefined"===typeof c||null===c)"touchstart"==g||"touchend"==g||"touchcancel"==g?(touch=Z.Utils.getFirstTouch(a),"undefined"!==typeof touch&&(target=touch.target,c=new Z.Utils.Point(touch.pageX,touch.pageY))):(target=Z.Utils.target(a),relatedTarget=Z.Utils.relatedTarget(a),c=Z.Utils.getMousePosition(a));"undefined"!==typeof c&&null!==c&&(a=O(c.x,c.y),d=da(a.x,a.y,b))}return d};this.getClickZoomCoords3D=
function(a,b,c,d,g){var e=parseFloat(Z.Utils.getResource("z93TIERSKIPTHRESHOLD"));b=O(b.x,b.y);b=da(b.x,b.y,Z.imageZ);var k=S(c,d);a=a.altKey;g?a?k=Z.fitZ:(g=L(c,Z.fitZ),d-g<e?k=Z.fitZ:d>1+e?k=S(c,1):0<c&&(k=S(c-1,1))):a?k=1:d<1-e?k=S(c,1):c<ta-1&&(k=S(c+1,1));return new Z.Utils.Point3D(b.x,b.y,k)};this.calculateCurrentCenterCoordinates=function(a,b,c){if("undefined"===typeof a||null===a)a=new Z.Utils.Point(parseFloat(u.left),parseFloat(u.top));if("undefined"===typeof c||null===c)c=Z.imageR;0>c&&
(c+=360);if("undefined"===typeof b||null===b)b=n.getZoom();var d=(a.x-ia)/b;a=(a.y-ja)/b;var g,e;switch(c){case 0:g=Z.imageX-d;e=Z.imageY-a;break;case 90:g=Z.imageX-a;e=Z.imageY+d;break;case 180:g=Z.imageX+d;e=Z.imageY+a;break;case 270:g=Z.imageX+a,e=Z.imageY-d}return new Z.Utils.Point(g,e)};this.z542=function(a,b){if("undefined"===typeof a||null===a)a=I;if("undefined"===typeof b||null===b)b=!1;return new N(n.z541(b),a)};this.z541=function(a){var b=parseFloat(u.left)-ia,c=parseFloat(u.top)-ja;if(Z.useCanvas)var d=
parseFloat(u.width)/T.width,b=b/d,c=c/d;d=n.getZoom();0!=b&&(b/=d);0!=c&&(c/=d);b=Z.imageX-b;c=Z.imageY-c;if(a){a=-(fa/2);var g=fa/2,e=-(ba/2),k=ba/2}else a=-(na/2),g=na/2,e=-(oa/2),k=oa/2;return new C(b,c,a,g,e,k,d)};this.z468=function(a){var b=Z.imageW/Z.imageH>fa/ba?fa/Z.imageW:ba/Z.imageH;if(90==a||270==a)b=Z.imageW/Z.imageH>fa/ba?fa/Z.imageH:ba/Z.imageW;return b};this.z482=function(a,b){return S(a,b)};this.syncViewportToNavigator=function(a){var b=Z.imageR;0>b&&(b+=360);var c=B(a.x,a.y,Z.imageZ,
b,"image");a=Z.imageY;var d=c.y,c=dX=Z.imageX-c.x;a=dY=a-d;0!=b&&(90==b?(c=-dY,a=dX):180==b?(c=-dX,a=-dY):270==b&&(c=dY,a=-dX));b=c*Z.imageZ;a*=Z.imageZ;d=a+ja;u.left=b+ia+"px";u.top=d+"px";F&&aa&&(Z.mobileDevice||Math.abs(b)>fa/2||Math.abs(a)>ba/2)&&w(F,Ea,sa,"simple",!1,"Updating backfill oversize display")};this.updateProgress=function(a,b){var c=Z,d;0==a&&0==b?(Z.Utils.validateCallback("loadingTilesComplete"),Z.Utils.validateCallback("loadingTilesCompleteGetLabelIDs"),d=void 0):(d=Math.round(100-
b/a*100),d=Math.round(d/10));c.updateViewPercent=d;Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&Z.Toolbar.updateProgress(a,b)};this.validateView=function(a,b,c,d){c="undefined"!==typeof c&&null!==c?c:null;b=null!==b?b:"";switch(a){case "tilesToDisplay":xb=Mb=0;Cb=c;Bb=0;tilesTimeStart=(new Date).getTime();Vb=0;window.clearTimeout(wb);wb=null;wb=window.setTimeout(E,uc);break;case "z581-image-display":Mb+=1;break;case "onTileLoad":xb+=1;Bb=((new Date).getTime()-c)/1E3;Vb=xb/Bb;break;case "z507":a=
Z.Utils.arrayIndexOf(eb,b),-1!==a&&(eb.splice(a,1),--Cb)}};this.setView=function(a,b,c,d,g,e){q(a,b,c,d,g,e)};this.zoom=function(a){if("stop"!=a||"stop"!=Z.zooming){switch(a){case "out":0<=Fa&&(Fa-=yb);break;case "in":0>=Fa&&(Fa+=yb);break;case "stop":Fa=0}Z.zooming=0==Fa?"stop":0<Fa?"in":"out";0!=Fa?ab||(ab=window.setTimeout(Ma,Xb)):(tb(),n.updateView())}};this.pan=function(a){if("horizontalStop"!=a||"stop"!=Z.panningX)if("verticalStop"!=a||"stop"!=Z.panningY){switch(a){case "left":0>=ya&&(ya+=Qb);
break;case "up":0>=za&&(za+=Qb);break;case "down":0<=za&&(za-=Qb);break;case "right":0<=ya&&(ya-=Qb);break;case "horizontalStop":ya=0;break;case "verticalStop":za=0;break;case "stop":za=ya=0}Z.panningX=0==ya?"stop":0<ya?"left":"right";Z.panningY=0==za?"stop":0<za?"up":"down";S(I,1);S(I,1);0!=ya||0!=za?ab||(ab=window.setTimeout(Ma,Xb)):(tb(),n.updateView())}};this.zoomAndPanToView=function(a,b,c,d,g,e,k){n.zoomAndPanAllStop();if(Z.clickZoomAndPanBlock)Z.clickZoomAndPanBlock=!1;else{if("undefined"===
typeof a||null===a)a=Z.imageX;if("undefined"===typeof b||null===b)b=Z.imageY;if("undefined"===typeof c||null===c)c=Z.imageZ;if("undefined"===typeof d||null===d)d=Z.imageR;if("undefined"===typeof g||null===g)g=Kc;if("undefined"===typeof e||null===e)e=hc;if("center"==a||isNaN(parseFloat(a)))a=Z.imageCenterX;if("center"==b||isNaN(parseFloat(b)))b=Z.imageCenterY;if(-1==c||isNaN(parseFloat(c)))b=Z.fitZ;if("undefined"===typeof a||null===a)a=Z.initialX;if("undefined"===typeof b||null===b)b=Z.initialY;if("undefined"===
typeof d||null===d)d=Z.imageR;"undefined"===typeof c||null===c?c=Z.initialZ:1<c&&2>c&&0!=c%1?c=1:1<c?c/=100:.99<c&&1>c&&0!=100*c%1&&(c=1);b=B(a,b,c,d,"image");a=b.x;b=b.y;c=J(c);if(Math.round(a)!=Math.round(Z.imageX)||Math.round(b)!=Math.round(Z.imageY)||Math.round(1E5*c)!=Math.round(1E5*Z.imageZ)||Math.round(d)!=Math.round(Z.imageR))Z.interactivityOff=!0,Db=0,sb(a,b,c,d,g,e,k)}};this.zoomAndPanAllStop=function(a,b){Z.interactivityOff||(ib&&ib&&(window.clearTimeout(ib),ib=null),Z.tourPlaying&&b&&
(n.tourStop(),a=!1),Z.slideshowPlaying&&b&&(n.slideshowStop(),a=!1),Z.smoothPan&&null!==Ya&&(Z.mouseIsDown||t(!0),a=!0),a||n.updateView())};this.syncViewportRelated=function(a,b,c,d,g){if("undefined"==typeof c||c)Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&(a=n.getZoom(),Z.Toolbar.syncSliderToViewport(a)),Z.Utils.validateCallback("viewZoomingGetCurrentZoom");("undefined"==typeof d||d)&&Z.Navigator&&Z.Navigator.getInitialized()&&Z.Navigator.syncToViewport()};this.z633=function(a,b){rb(a,b)&&n.syncViewportRelated()};
this.reset=function(a){a?n.zoomAndPanToView(Z.priorX,Z.priorY,Z.priorZ,Z.priorR):n.zoomAndPanToView(Z.initialX,Z.initialY,Z.initialZ,Z.initialR);ka(!0)};this.toggleFullViewModeExternal=function(){jc=!0;n.toggleFullViewMode()};this.toggleFullViewMode=function(a,b){Z.maskingSelection&&Z.maskClearOnUserAction&&n.clearMask();var c=null,d=null;Z.fullView="undefined"!==typeof a&&null!==a?a:!Z.fullView;var g=document.body.style,e=document.documentElement.style,k=Z.ViewerDisplay.style,d=Z.Utils.getElementStyle(Z.pageContainer);
Z.fullView?(yc=g.width,zc=g.height,Ac=g.overflow,Bc=e.overflow,ic=Z.Utils.stringValidate(d.backgroundColor)&&"transparent"!=d.backgroundColor?d.backgroundColor:Z.Utils.stringValidate(g.backgroundColor)&&"transparent"!=g.backgroundColor?g.backgroundColor:Z.Utils.getResource("z120"),Cc=k.zIndex,Z.fullScreenSupported&&!Z.fullPageVisible?(fullScreenEntering=!0,Z.Utils.fullScreenView(Z.ViewerDisplay,!0),d=Z.Utils.getScreenSize()):(d=Z.Utils.getWindowSize(),Z.mobileDevice?(g.width=d.x,g.height=d.y):(g.width=
"100%",g.height="100%")),c=d.x,d=d.y,g.overflow="hidden",e.overflow="hidden",k.backgroundColor=ic,k.position="fixed",k.zIndex="99999999"):(g.overflow=Ac,e.overflow=Bc,k.backgroundColor=ic,k.position="relative",k.zIndex=Cc,Z.fullScreenSupported&&!Z.fullPageVisible&&Z.Utils.fullScreenView(Z.ViewerDisplay,!1,b),g.width=yc,g.height=zc,c=parseFloat(d.width),d=parseFloat(d.height),isNaN(c)&&(c=Z.ViewerDisplay.clientWidth),isNaN(d)&&(d=Z.ViewerDisplay.clientHeight),jc=!1);Z.viewerW=c;Z.viewerH=d;"multiple"!=
Z.imagePath?n.setSizeAndPosition(c,d):n.setSizeAndPositionMultiple(c,d);g=document.getElementById("buttonFullView");e=document.getElementById("buttonFullViewExit");g&&e&&(g.style.display=Z.fullView?"none":"inline-block",e.style.display=Z.fullView?"inline-block":"none");jc?(zb||(g=Z.Utils.getResource("z420"),e=parseFloat(Z.viewerW)-54,k=parseFloat(Z.viewerH)-54,d=Z.Utils.getResource("DEFAULT_FULLVIEWEXITEXTERNALBUTTONCOLOR"),zb=new Z.Utils.Button("buttonFullViewExitExternal",g,null,null,null,null,
"34px","34px",e+"px",k+"px","mousedown",ub,"z391EXITEXTERNAL","solid","1px",d,"0px","0px"),Z.ViewerDisplay.appendChild(zb.elmt)),zb.elmt.style.display="inline-block"):zb&&(zb.elmt.style.display="none");Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&(Z.toolbarCurrentW=-1==Z.toolbarW?c:Z.toolbarW,Z.Toolbar.setSizeAndPosition(Z.toolbarCurrentW,null,null,1==Z.toolbarPosition?Z.viewerH-Z.toolbarH:0));Z.NavigatorDisplay&&Z.Navigator.getInitialized()&&Z.Navigator.setSizeAndPosition(Z.navigatorW,Z.navigatorH,
Z.navigatorL,Z.navigatorT);Z.RulerDisplay&&Z.Ruler.getInitialized()&&Z.Ruler.setSizeAndPosition(null,null,null,null);n.validateXYZDefaults();Z.imageZ=J(Z.imageZ);c=parseFloat(u.left);g=parseFloat(u.top);c=B(c,g,Z.imageZ,Z.imageR,"container");u.left=c.x+"px";u.top=c.y+"px";n.updateView(!0)};this.fullScreenEscapeHandler=function(a){fullScreenEntering?fullScreenEntering=!1:n.toggleFullViewMode(!1,!0)};this.mouseWheelHandler=function(a){var b=n.z482(I,P*(1+(0<a?yb:-yb)));constrainedZ=J(b);constrainedZ!=
Z.imageZ&&(Z.zooming=0<a?"in":0>a?"out":"stop",n.z633(constrainedZ))}};
Z.ZoomifyToolbar=function(a){function b(){window.clearInterval(O);O=null;var a=document.getElementById("progressTextBoxCenteredDiv");a&&(a=a.firstChild)&&(a.nodeValue="")}function c(a){4>Z.toolbarVisible&&!Z.mobileDevice||8==Z.toolbarVisible?d(a):e(!a)}function d(a){Q&&(Q.display=a?"inline-block":"none")}function e(a){Z.ToolbarMinimized=a;if(Q){var b=document.getElementById("buttonContainer"),c=document.getElementById("toolbarBackground"),d=document.getElementById("buttonMinimize"),e=document.getElementById("buttonExpand"),
h=document.getElementById("logoDivider"),f=0;e&&!L&&(f=parseFloat(e.style.left)+parseFloat(e.style.width)+4);var l=Z.toolbarCurrentW;a?(b&&(b.style.display="none"),d&&e&&!L&&(h&&(h.style.display="none"),d.style.display="none",e.style.display="inline-block"),Q.width=f+"px",c&&(c.style.width=f+"px")):(b&&(b.style.display="inline-block"),d&&e&&!L&&(h&&(h.style.display="inline-block"),d.style.display="inline-block",e.style.display="none"),Q.width=l+"px",c&&(c.style.width=l+"px"))}}function h(a){if(A&&
X){a=(a-Z.minZ)/(Z.maxZ-Z.minZ);var b=parseFloat(A.style.left),c=parseFloat(A.style.left)+parseFloat(A.style.width)-parseFloat(X.style.width)-b;X.style.left=a*c+b+"px"}}function f(a){X&&(M=!0,a=Z.Utils.getMousePosition(a),X.mouseXPrior=a.x,X.mouseYPrior=a.y)}function m(){if(A&&X){var b=parseFloat(A.style.left),c=parseFloat(A.style.left)+parseFloat(A.style.width)-parseFloat(X.style.width),d=parseFloat(X.style.left)+(C.x-X.mouseXPrior);d<b?d=b:d>c?d=c:X.mouseXPrior=C.x;X.style.left=d+"px";b=Z.minZ+
(d-b)/(c-b)*(Z.maxZ-Z.minZ);c=b-a.getZoom();Z.zooming=0<c?"in":0>c?"out":"stop";a.z633(b)}}function l(b){if(b=Z.Utils.event(b)){var c=b.type,d=Z.Utils.target(b);if(d){var e=d.parentNode;if(e){var h=e;tbID=e.id}}d=Z.Utils.relatedTarget(b)}"mousedown"==c&&a&&(a.zoomAndPanAllStop(!1,!0),Z.maskingSelection&&Z.maskClearOnUserAction&&a.clearMask());if((!Z.interactivityOff||"mousedown"!=c&&"mouseup"!=c||"buttonRotateClockwise"==tbID||"buttonRotateCounterwise"==tbID)&&(!d||"[object HTMLSelectElement]"!=d&&
"[object HTMLOptionElement]"!=d)&&!Z.Utils.isRightMouseButton(b)){Z.touchSupport&&b.preventDefault();if("viewportContainer"==tbID||M)if(e=document.getElementById("buttonSlider"))tbID=e.id;var d=e,y=c;if(-1!=d.id.indexOf("button")&&-1==d.id.indexOf("buttonContainer")){var G=d.firstChild,r=d.childNodes[1],A=d.childNodes[2];if(G&&r&&A)if(G=G.style,r=r.style,A=A.style,G.visibility=r.visibility=A.visibility="hidden","mouseover"==y&&"buttonSlider"==d.id&&M)A.visibility="visible";else if("mouseover"==y||
"mouseup"==y)r.visibility="visible";else if("mousedown"==y||"mousemove"==y||"touchstart"==y||"MSPointerDown"==y)A.visibility="visible";else if("mouseout"==y||"touchend"==y||"touchcancel"==y||"MSPointerUp"==y)G.visibility="visible"}if(tbID&&"buttonBackground"!=tbID&&c)switch(c){case "mouseover":Z.Utils.removeEventListener(e.childNodes[0],"mouseover",l);Z.Utils.addEventListener(e.childNodes[1],"mousedown",l);Z.Utils.addEventListener(e.childNodes[1],"mouseout",l);M&&h&&Z.Utils.addEventListener(h.childNodes[0],
"mouseup",l);break;case "mousedown":"trackSlider"!=tbID&&(Z.Utils.removeEventListener(e.childNodes[1],"mousedown",l),Z.Utils.removeEventListener(e.childNodes[1],"mouseout",l),Z.Utils.addEventListener(e.childNodes[2],"mouseup",l),Z.Utils.addEventListener(e.childNodes[2],"mouseout",l),"buttonSlider"==tbID&&(f(b),w(b),Z.Utils.addEventListener(document,"mousemove",w),N||(N=window.setInterval(m,ca)),Z.Utils.addEventListener(document,"mouseup",l)));a&&s(b,tbID);break;case "mouseup":Z.Utils.removeEventListener(e.childNodes[2],
"mouseup",l);Z.Utils.removeEventListener(e.childNodes[2],"mouseout",l);Z.Utils.addEventListener(e.childNodes[1],"mousedown",l);Z.Utils.addEventListener(e.childNodes[1],"mouseout",l);M&&h&&Z.Utils.removeEventListener(h.childNodes[0],"mouseup",l);a&&s(b,tbID);break;case "mouseout":Z.Utils.removeEventListener(e.childNodes[1],"mousedown",l);Z.Utils.removeEventListener(e.childNodes[1],"mouseout",l);Z.Utils.addEventListener(e.childNodes[0],"mouseover",l);a&&s(b,tbID);break;case "touchstart":"buttonSlider"==
tbID&&(f(b),x(b),Z.Utils.addEventListener(document,"touchmove",x),N||(N=window.setInterval(m,ca)));Z.Utils.addEventListener(e,"touchend",l);Z.Utils.addEventListener(e,"touchcancel",l);a&&s(b,tbID);break;case "touchend":Z.Utils.addEventListener(e,"touchstart",l);a&&s(b,tbID);break;case "touchcancel":Z.Utils.addEventListener(e,"touchstart",l);a&&s(b,tbID);break;case "MSPointerDown":"buttonSlider"==tbID&&(f(b),x(b),Z.Utils.addEventListener(document,"MSPointerMove",x),N||(N=window.setInterval(m,ca)));
Z.Utils.addEventListener(e,"MSPointerUp",l);a&&s(b,tbID);break;case "MSPointerUp":Z.Utils.addEventListener(e,"MSPointerDown",l),a&&s(b,tbID)}}}function s(b,c){var d=b.type;if("mousedown"==d||"touchstart"==d){var e=b.altKey,d=document.activeElement.id;!Z.Utils.stringValidate(d)||d!="poiNameTextElement"+R&&d!="labelNameTextElement"+R&&"captionTextElement"!=d&&"tooltipTextElement"!=d&&"clickURLTextElement"!=d&&d!="noteNameTextElement"+R&&d!="noteTextElement"+R||document.getElementById(d).blur();switch(c){case "buttonMinimize":y.minimize(!0);
Z.Navigator&&Z.Navigator.setVisibility(!1);break;case "buttonExpand":y.minimize(!1);Z.Navigator&&Z.Navigator.setVisibility(!0);break;case "buttonZoomOut":e||a.zoom("out");break;case "trackSlider":A&&(e=Z.Utils.getElementPosition(A),e=Z.Utils.getMousePosition(b).x-e.x,d=parseFloat(A.style.width),e=Z.minZ+(e-0)/(d-0)*(Z.maxZ-Z.minZ),e<Z.minZ+.1&&(e=Z.minZ),e>Z.maxZ-.1&&(e=Z.maxZ),d=e-a.getZoom(),Z.zooming=0<d?"in":0>d?"out":"stop",a.z633(e),Z.zooming="stop",a.updateView());break;case "buttonZoomIn":e||
a.zoom("in");break;case "buttonPanLeft":a.pan("left");break;case "buttonPanUp":a.pan("up");break;case "buttonPanDown":a.pan("down");break;case "buttonPanRight":a.pan("right");break;case "buttonReset":a.reset(e);break;case "buttonHelp":Z.annotations&&null===Z.editMode?Z.Utils.showHelp(Z.Utils.getResource("z32")+Z.Utils.getResource("z30")+Z.Utils.getResource("z29")):Z.Utils.showHelp(Z.Utils.getResource("z32"))}}else if("mouseup"==d||"touchend"==d||"touchcancel"==d)if("buttonSlider"==c||M){N&&(window.clearInterval(N),
N=null);M&&(Z.Utils.removeEventListener(document,"mousemove",w),Z.Utils.removeEventListener(document,"mouseup",l),Z.Utils.removeEventListener(document,"touchmove",x));for(var e=Z.ToolbarDisplay.childNodes,d=0,h=e.length;d<h;d++){var f=e[d],m=f.id;if(m&&-1!=m.indexOf("button"))if("buttonContainer"!=m&&"buttonContainerImageFilter"!=m)Z.Utils.setButtonDefaults(f);else for(var f=f.childNodes,m=0,G=f.length;m<G;m++){var r=f[m],k=r.id;k&&-1!=k.indexOf("button")&&Z.Utils.setButtonDefaults(r)}}M=!1;Z.zooming=
"stop";a.updateView()}else"buttonZoomOut"==c||"buttonZoomIn"==c?(a.zoom("stop"),0==Z.debug&&"buttonZoomOut"==c&&e&&Z.Utils.showGlobals(),"buttonZoomIn"==c&&e&&a.toggleEditMode()):"buttonPanLeft"==c||"buttonPanRight"==c?(a.pan("horizontalStop"),"buttonPanLeft"==c&&e&&a.toggleSmoothPan()):"buttonPanUp"==c||"buttonPanDown"==c?a.pan("verticalStop"):"buttonFullView"==c?a.toggleFullViewMode(!0):"buttonFullViewExit"==c&&a.toggleFullViewMode(!1);else"mouseout"==d&&("buttonZoomOut"==c||"buttonZoomIn"==c?a.zoom("stop"):
"buttonPanLeft"==c||"buttonPanRight"==c?a.pan("horizontalStop"):"buttonPanUp"!=c&&"buttonPanDown"!=c||a.pan("verticalStop"))}function w(a){C=new Z.Utils.Point(a.clientX,a.clientY)}function x(a){(a=Z.Utils.getFirstTouch(a))&&(C=new Z.Utils.Point(a.pageX,a.pageY))}var y=this,G=!1,R=a.getViewportID().toString();Z.skinPath=Z.Utils.stringRemoveTrailingSlashCharacters(Z.skinPath);(new Z.NetConnector).loadXML(Z.skinPath+"/"+Z.Utils.getResource("z200"));var ha,Q,A,X,ga=[],r=[],H=[],ca=parseInt(Z.Utils.getResource("z205"),
10),M=!1,N=null,C=null,O=null,da=null,xa,S,L,B,J;this.getInitialized=function(){return G};this.getSkinArray=function(){return ga};this.getSkinSizes=function(){return H};this.show=function(a){c(a)};this.setVisibility=function(a){d(a)};this.minimize=function(a){e(a)};this.showProgress=function(){var a=document.getElementById("progressTextBox");a&&(a=a.style)&&(a.display="inline-block")};this.hideProgress=function(){var a=document.getElementById("progressTextBox");a&&(a=a.style)&&(a.display="none")};
this.updateProgress=function(a,c){if(Z.progressVisible){O&&window.clearInterval(O);var d,e=document.getElementById("progressTextBoxCenteredDiv");e&&(e=e.firstChild)&&(0==a||0==c?(e.nodeValue="llllllllll",O=window.setInterval(b,parseInt(Z.Utils.getResource("z182")),10)):(d=Math.round(100-c/a*100),d=Math.round(d/10),e.nodeValue=Z.Utils.stringMultiply("l",d)))}};this.setViewport=function(b){a=b;R=a.getViewportID().toString()};this.parseSkinXML=function(b){Z.skinMode=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("SKINMODE").nodeValue;
var d,e;1==Z.skinMode||0==Z.skinMode&&!Z.mobileDevice?(d=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERSTANDARD").nodeValue,e="SIZESSTANDARD"):(d=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERLARGE").nodeValue,e="SIZESLARGE");var f=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("PROGRESSCOLOR");"undefined"!==typeof f&&null!==f&&(da=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("PROGRESSCOLOR").nodeValue);f=[];f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("TOOLBARW").nodeValue);
f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("TOOLBARH").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("LOGOW").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("LOGOH").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("DIVIDERW").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("DIVIDERH").nodeValue);f[f.length]=
parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("BUTTONW").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("BUTTONH").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("BUTTONSPAN").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERBUTTONW").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERBUTTONH").nodeValue);f[f.length]=
parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERTRACKW").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERTRACKH").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERSPAN").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("PROGRESSW").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("PROGRESSH").nodeValue);f[f.length]=
parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("PROGRESSFONTSIZE").nodeValue);var m,x,A;e="edit"==Z.editMode?161:"markup"==Z.editMode?152:Z.imageFiltersVisible?100:Z.screensaver||Z.tourPath||Z.slidePath||Z.slidestackPath?77:Z.rotationVisible?58:Z.measureVisible?51:0<Z.helpVisible?45:Z.fullScreenVisible||Z.fullPageVisible?45:Z.resetVisible?35:Z.panButtonsVisible?32:Z.sliderVisible?19:Z.minimizeVisible?14:Z.logoVisible?8:6;m=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN0");
null!==m&&(x=m.nodeValue);m=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+e.toString());null!==m&&(A=m.nodeValue);if("undefined"!==typeof x&&Z.Utils.stringValidate(x)&&"undefined"!==typeof A&&Z.Utils.stringValidate(A)){x=!1;A=0;for(e+=1;A<e;A++)m=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+A).nodeValue,Z.Utils.stringValidate(m)?r[A]=d+"/"+m:(r[A]="null",x=!0);x&&Z.Utils.showMessage(Z.Utils.getResource("z279"));ga=r;Z.ToolbarDisplay=Z.Utils.createContainerElement("div",
"ToolbarDisplay","inline-block","absolute","visible","1px","1px","0px","1px","none","0px","transparent none","0px","0px","normal");Q=Z.ToolbarDisplay.style;b=parseInt(Z.Utils.getResource("z230"),10);Q.zIndex=(b+1).toString();b=new Z.Utils.Graphic("toolbarBackground",Z.skinPath,r[0],"1px","1px","0px","0px");parseFloat(Z.Utils.getResource("z82"));Z.Utils.getResource("z83NOALPHA");Z.ToolbarDisplay.appendChild(b.elmt);H=f;Z.logoVisible&&(Z.Utils.stringValidate(Z.logoCustomPath)?(f=Z.Utils.cacheProofPath(Z.logoCustomPath),
f=new Z.Utils.Graphic("toolbarLogo",f,null,"1px","1px","1px","1px")):f=new Z.Utils.Graphic("toolbarLogo",Z.skinPath,r[7],"1px","1px","1px","1px"),Z.Utils.stringValidate(Z.logoLinkURL)?(b=document.createElement("a"),b.setAttribute("href",Z.logoLinkURL),b.setAttribute("target",Z.Utils.getResource("z427TARGET")),b.setAttribute("title",Z.Utils.getResource("z360")),b.setAttribute("outline","none"),b.appendChild(f.elmt),Z.ToolbarDisplay.appendChild(b)):(f.elmt.setAttribute("title",Z.Utils.getResource("z427DISPLAY")),
Z.ToolbarDisplay.appendChild(f.elmt)),0==Z.toolbarVisible||1==Z.toolbarVisible)&&(f=new Z.Utils.Graphic("logoDivider",Z.skinPath,r[8],"1px","1px","1px","1px"),Z.ToolbarDisplay.appendChild(f.elmt));f=Z.Utils.createContainerElement("div","buttonContainer","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default");Z.ToolbarDisplay.appendChild(f);Z.Utils.addEventListener(f,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(f,"mouseover",
y.backgroundEventsHandler);Z.Utils.addEventListener(f,"touchstart",Z.Utils.preventDefault);b=new Z.Utils.Graphic("buttonBackground",Z.skinPath,r[0],"1px","1px","0px","0px");f.appendChild(b.elmt);Z.Utils.setOpacity(b.elmt,"0","#FBFAFA");(0!=Z.toolbarVisible&&1!=Z.toolbarVisible||Z.mobileDevice)&&Z.minimizeVisible&&(b=new Z.Utils.Button("buttonMinimize",null,Z.skinPath,r[9],r[10],r[11],"1px","1px","1px","1px","mouseover",l,"z363"),Z.ToolbarDisplay.appendChild(b.elmt),b=new Z.Utils.Button("buttonExpand",
null,Z.skinPath,r[12],r[13],r[14],"1px","1px","1px","1px","mouseover",l,"z341"),Z.ToolbarDisplay.appendChild(b.elmt));b=new Z.Utils.Button("buttonZoomOut",null,Z.skinPath,r[1],r[2],r[3],"1px","1px","1px","1px","mouseover",l,"z400");f.appendChild(b.elmt);Z.sliderVisible&&(b=new Z.Utils.Graphic("trackSlider",Z.skinPath,r[15],"1px","1px","0px","0px","z385"),f.appendChild(b.elmt),Z.Utils.addEventListener(b.elmt,"mousedown",l),Z.Utils.addEventListener(b.elmt,"touchstart",l),b=new Z.Utils.Button("buttonSlider",
null,Z.skinPath,r[17],r[18],r[19],"1px","1px","1px","1px","mouseover",l,"z385"),f.appendChild(b.elmt));b=new Z.Utils.Button("buttonZoomIn",null,Z.skinPath,r[4],r[5],r[6],"1px","1px","1px","1px","mouseover",l,"z399");f.appendChild(b.elmt);Z.panButtonsVisible&&(b=new Z.Utils.Graphic("panDivider",Z.skinPath,r[20],"1px","1px","1px","1px"),f.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanLeft",null,Z.skinPath,r[21],r[22],r[23],"1px","1px","1px","1px","mouseover",l,"z370"),f.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanUp",
null,Z.skinPath,r[24],r[25],r[26],"1px","1px","1px","1px","mouseover",l,"z372"),f.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanDown",null,Z.skinPath,r[27],r[28],r[29],"1px","1px","1px","1px","mouseover",l,"z369"),f.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanRight",null,Z.skinPath,r[30],r[31],r[32],"1px","1px","1px","1px","mouseover",l,"z371"),f.appendChild(b.elmt));Z.resetVisible&&(b=new Z.Utils.Button("buttonReset",null,Z.skinPath,r[33],r[34],r[35],"1px","1px","1px","1px","mouseover",
l,"z378"),f.appendChild(b.elmt));if(Z.fullScreenVisible||Z.fullPageVisible)null===Z.editMode&&(b=new Z.Utils.Graphic("fullViewDivider",Z.skinPath,r[36],"1px","1px","1px","1px"),f.appendChild(b.elmt)),b=new Z.Utils.Button("buttonFullViewExit",null,Z.skinPath,r[40],r[41],r[42],"1px","1px","1px","1px","mouseover",l,"z391EXIT"),f.appendChild(b.elmt),b=new Z.Utils.Button("buttonFullView",null,Z.skinPath,r[37],r[38],r[39],"1px","1px","1px","1px","mouseover",l,"z391"),f.appendChild(b.elmt);if(1==Z.helpVisible||
3==Z.helpVisible)b=new Z.Utils.Button("buttonHelp",null,Z.skinPath,r[43],r[44],r[45],"1px","1px","1px","1px","mouseover",l,"z342"),f.appendChild(b.elmt);Z.progressVisible&&(b=Z.Utils.createContainerElement("div","progressTextBox","inline-block","absolute","hidden","1px","1px","1px","1px","none","0px","transparent none","0px","0px","normal",null,!0),d=H[16],f.appendChild(b),f=document.createTextNode(Z.Utils.getResource("z183")),b.appendChild(Z.Utils.createCenteredElement(f,"progressTextBoxCenteredDiv")),
null===da&&(da=Z.Utils.getResource("z183COLOR")),Z.Utils.setTextNodeStyle(f,da,"verdana",d+"px","none","normal","normal","normal","normal","1em","left","none"),Z.Utils.disableTextInteraction(f));Z.ViewerDisplay.appendChild(Z.ToolbarDisplay);Z.toolbarW=H[0];Z.toolbarCurrentW=-1==Z.toolbarW?Z.viewerW:Z.toolbarW;Z.toolbarH=ha=H[1];y.setSizeAndPosition(Z.toolbarCurrentW,Z.toolbarH,0,1==Z.toolbarPosition?Z.viewerH-ha:0);a&&a.getInitialized()&&(1==Z.toolbarVisible&&(f=Z.Utils.getElementStyle(Z.pageContainer),
f=parseFloat(f.height),isNaN(f)&&(f=Z.ViewerDisplay.clientHeight),a.setSizeAndPosition(Z.viewerW,f-Z.toolbarH,0,0),a.validateXYZDefaults(!0),a.setView(Z.initialX,Z.initialY,Z.initialZ)),f=a.getZoom(),h(f));c(1==Z.toolbarVisible||2==Z.toolbarVisible||4==Z.toolbarVisible||7==Z.toolbarVisible);Z.Utils.addEventListener(Z.ToolbarDisplay,"mouseover",Z.Utils.stopPropagation);G=!0;Z.Utils.validateCallback("toolbarInitialized");Z.Viewport&&Z.Viewport.getInitialized()&&Z.Toolbar&&Z.Toolbar.getInitialized()&&
Z.Navigator&&Z.Navigator.getInitialized()&&Z.Utils.validateCallback("viewerInitialized")}else Z.Utils.showMessage(Z.Utils.getResource("z278"))};this.setSizeAndPosition=function(a,b,c,d){"undefined"===typeof a||null===a?a=0<Z.toolbarVisible?Z.toolbarCurrentW:0:Z.toolbarCurrentW=a;if("undefined"===typeof b||null===b)b=0<Z.toolbarVisible?ha:0;if("undefined"===typeof c||null===c)c=0;if("undefined"===typeof d||null===d)d=1==Z.toolbarPosition?Z.viewerH-ha:0;Q=Z.ToolbarDisplay.style;Q.width=a+"px";Q.height=
b+"px";Q.left=c+"px";Q.top=d+"px";var e=H[2],f=H[3],h=H[4],m=H[5],l=H[6],k=H[7],x=H[8],t=H[9],y=H[10],G=H[11],r=H[12],R=H[13];c=H[14];d=H[15];var v=0,n=(b-f)/2+1,s=(b-m)/2,w=(b-k)/2,C=1.3*w,M=w+4,O=w+2,N=1==Z.logoVisible?0:x/2,ca=1==Z.logoVisible?0:x/2,ga=x-(l-h),U=2,D=0;Z.panButtonsVisible&&(U+=4,D+=1);Z.resetVisible&&(U+=1);if(Z.fullScreenVisible||Z.fullPageVisible)U+=1,D+=1;Z.helpVisible&&(U+=1,Z.fullScreenVisible||Z.fullPageVisible||(D+=1));D=U*x+D*ga;Z.sliderVisible&&(D+=R);xa=S=L=B=!1;var U=
(1==Z.logoVisible?e+2:0)+(0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&0!=Z.minimizeVisible?x:0),da=1==Z.panButtonsVisible?4*x+ga:0,lb=1==Z.resetVisible?x:0,F=U+20+D+20+c;F>a&&(xa=!0,F-R>a&&(S=!0,F-R-c>a&&(L=!0,F-R-c-U>a&&(J=!0,F-R-c-U-lb>a&&(B=!0,D-=da),D-=lb)),c=0),D-=R);da=(a-D)/2-20+3;if(U=document.getElementById("toolbarBackground"))U.style.width=a+"px",U.style.height=b+"px",U.firstChild.style.width=a+"px",U.firstChild.style.height=b+"px";if(U=document.getElementById("buttonContainer"))U.style.width=
D+40+"px",U.style.height=b+"px",U.style.left=da+"px";if(D=document.getElementById("buttonBackground"))D.style.width=a+"px",Z.Utils.graphicSize(D,parseFloat(U.style.width),parseFloat(U.style.height)),D.style.left="0px";if(D=document.getElementById("toolbarLogo"))if(da=D.style)if(L)da.display="none";else if(da.display="inline-block",Z.Utils.graphicSize(D,e,f),da.left=v+"px",da.top=n+"px",v+=e+2,e=document.getElementById("logoDivider"))Z.Utils.graphicSize(e,h,m),e=e.style,e.left=v+"px",e.top=s+"px";
0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&(e=document.getElementById("buttonMinimize"),f=document.getElementById("buttonExpand"),e&&f&&(n=e.style,D=f.style,n&&D&&(L?(n.display="none",D.display="none"):(n.display="inline-block",D.display="inline-block",Z.Utils.buttonSize(e,l,k),Z.Utils.buttonSize(f,l,k),n.left=v+N+"px",n.top=C+"px",D.left=v+ca+"px",D.top=C+"px"))));v=20;if(C=document.getElementById("buttonZoomOut"))Z.Utils.buttonSize(C,l,k),C=C.style,C.left=v+"px",C.top=w+"px",v+=x;A=document.getElementById("trackSlider");
X=document.getElementById("buttonSlider");A&&X&&(C=A.style,N=X.style,C&&N&&(xa?(C.display="none",N.display="none"):(C.display="inline-block",N.display="inline-block",Z.Utils.graphicSize(A,G,r),C.left=v-2+"px",C.top=M+"px",Z.Utils.buttonSize(X,t,y),N.left=parseFloat(C.left)+"px",N.top=O+"px",v+=R)));if(t=document.getElementById("buttonZoomIn"))Z.Utils.buttonSize(t,l,k),t=t.style,t.left=v+"px",t.top=w+"px",v+=x+1;if(!B&&(t=document.getElementById("panDivider"))){Z.Utils.graphicSize(t,h,m);t=t.style;
t.left=v+"px";t.top=s+"px";v+=ga;if(t=document.getElementById("buttonPanLeft"))Z.Utils.buttonSize(t,l,k),t=t.style,t.left=v+"px",t.top=w+"px",v+=x;if(t=document.getElementById("buttonPanUp"))Z.Utils.buttonSize(t,l,k),t=t.style,t.left=v+"px",t.top=w+"px",v+=x;if(t=document.getElementById("buttonPanDown"))Z.Utils.buttonSize(t,l,k),t=t.style,t.left=v+"px",t.top=w+"px",v+=x;if(t=document.getElementById("buttonPanRight"))Z.Utils.buttonSize(t,l,k),t=t.style,t.left=v+"px",t.top=w+"px",v+=x}!J&&(t=document.getElementById("buttonReset"))&&
(Z.Utils.buttonSize(t,l,k),t=t.style,t.left=v+"px",t.top=w+"px",v+=x+1);if(t=document.getElementById("fullViewDivider"))Z.Utils.graphicSize(t,h,m),h=t.style,h.left=v+"px",h.top=s+"px",v+=ga;if(s=document.getElementById("buttonFullViewExit"))Z.Utils.buttonSize(s,l,k),s=s.style,s.left=v+"px",s.top=w+"px",s.display=Z.fullView?"inline-block":"none";if(s=document.getElementById("buttonFullView"))Z.Utils.buttonSize(s,l,k),s=s.style,s.left=v+"px",s.top=w+"px",v+=x+1,s.display=Z.fullView?"none":"inline-block";
if(1==Z.helpVisible||3==Z.helpVisible)if(x=document.getElementById("buttonHelp"))Z.Utils.buttonSize(x,l,k),l=x.style,l.left=v+"px",l.top=w+"px";if(v=document.getElementById("progressTextBox"))if(v=v.style)S?v.display="none":(v.display="inline-block",v.width=c+"px",v.height=d+"px",v.left=a-parseFloat(U.style.left)-parseFloat(v.width)+"px",v.top=(b-parseFloat(v.height))/2+"px")};this.syncSliderToViewport=function(a){h(a)};this.z457=function(a){l(a)};this.backgroundEventsHandler=function(a){a=Z.Utils.event(a);
if(a=Z.Utils.relatedTarget(a)){var b=a.parentNode;b&&(b=b.id)&&(M||-1==b.indexOf("button")||-1!=b.indexOf("buttonContainer")||Z.Utils.setButtonDefaults(a.parentNode))}}};
Z.ZoomifyNavigator=function(a){function b(a,c){"ZoomifyImageFile"==Z.tileSource&&(E=c);var d=Z.Utils.createContainerElement("div","testImageContainer","inline-block","absolute","hidden",q+"px",Ma+"px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);d.appendChild(E);d.removeChild(E);d=null;d=E.height;if(0!=E.width&&0!=d){Z.NavigatorDisplay=Z.Utils.createContainerElement("div","NavigatorDisplay","inline-block","absolute","hidden",q+"px",Ma+"px",sb+"px",tb+"px","solid","1px",
"transparent none","0px","0px","normal",null,!0);C=Z.NavigatorDisplay;O=C.style;Z.slideshow&&Z.Utils.setOpacity(C,0);d=parseInt(Z.Utils.getResource("z230"),10);O.zIndex=(d+2).toString();var d=parseFloat(Z.Utils.getResource("z82")),e=Z.Utils.getResource("z83"),f=Z.Utils.getResource("z83NOALPHA"),e=Z.Utils.createContainerElement("div","navigatorBackground","inline-block","absolute","hidden",q+"px",Ma+"px","0px","0px","none","0px",e,"0px","0px","normal",null,!0);Z.Utils.setOpacity(e,d,f);Z.NavigatorDisplay.appendChild(e);
da=e;xa=da.style;d=Z.Utils.createContainerElement("div","navigatorImageContainer","inline-block","absolute","hidden",q+"px",Ma+"px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);d.appendChild(E);E.alt=Z.Utils.getResource("z439");Z.NavigatorDisplay.appendChild(d);S=d;L=S.style;B=E;d=B.width;f=B.height;e=Z.Utils.createContainerElement("div","navigatorRectangle","inline-block","absolute","hidden",q+1+"px",Ma+1+"px",sb+"px",tb+"px","solid","1px","transparent none","0px","0px",
"normal",null,!0);e.style.borderColor=Z.Utils.stringValidateColorValue(Z.navigatorRectangleColor);Z.NavigatorDisplay.appendChild(e);J=e;g=J.style;Z.ViewerDisplay.appendChild(Z.NavigatorDisplay);h(q,Ma,sb,tb,rb,d,f);l(1==Z.navigatorVisible||2==Z.navigatorVisible);Z.Utils.addEventListener(C,"mouseover",Z.Utils.stopPropagation);Z.Utils.addEventListener(C,"mousedown",R);Z.Utils.addEventListener(C,"touchstart",A);Z.Utils.addEventListener(C,"touchmove",X);Z.Utils.addEventListener(C,"touchend",ga);Z.Utils.addEventListener(C,
"touchcancel",r);ca=!0;Z.Utils.validateCallback("navigatorInitialized");Z.Viewport&&Z.Viewport.getInitialized()&&Z.Toolbar&&Z.Toolbar.getInitialized()&&Z.Navigator&&Z.Navigator.getInitialized()&&Z.Utils.validateCallback("viewerInitialized");s()}else window.setTimeout(function(){b(a,c)},100)}function c(b,d){var e="undefined"===typeof d||null===d?a:d;"ZoomifyImageFile"==Z.tileSource?ub=e.formatTilePath(0,0,0):"ZoomifyImageFolder"==Z.tileSource&&(ub=Z.Utils.cacheProofPath(e.getImagePath()+"/TileGroup0/0-0-0."+
Z.tileType));E=null;E=new Image;E.onload=b;E.onerror=G;"offsetLoading"!=ub?"ZoomifyImageFile"==Z.tileSource?(new Z.NetConnector).loadImage(ub,Z.Utils.createCallback(null,b),"navigator",null):E.src=ub:window.setTimeout(function(){c(b)},100)}function d(a){if(Z.NavigatorDisplay)if(Z.slideshow&&Z.Utils.setOpacity(Z.NavigatorDisplay,0),"ZoomifyImageFile"==Z.tileSource&&(E=a),S&&E&&0<E.width&&0<E.height){a=E.width;var b=E.height;S.appendChild(E);B=Z.NavigatorDisplay.childNodes[1].firstChild;h(q,Ma,sb,tb,
rb,a,b);a=Z.ToolbarDisplay&&"inline-block"==Z.ToolbarDisplay.style.display&&!Z.ToolbarMinimized||"undefined"!==typeof slideList&&null!==slideList&&"visible"==slideList.style.visibility;l((1==Z.navigatorVisible||2==Z.navigatorVisible)&&a);a=parseInt(Z.Utils.getResource("z230"),10);Z.NavigatorDisplay.style.zIndex=(a+2).toString();s()}else window.setTimeout(function(){d()},100)}function e(){ca&&(N&&(window.clearInterval(N),N=null),C&&O&&da&&xa&&S&&L&&B&&J&&g||(C=Z.NavigatorDisplay,O=C.style,da=Z.NavigatorDisplay.firstChild,
xa=da.style,S=Z.NavigatorDisplay.childNodes[1],L=S.style,B=Z.NavigatorDisplay.childNodes[1].firstChild,J=Z.NavigatorDisplay.childNodes[2],g=J.style))}function h(a,b,c,d,e,g,h){e||(e=rb);if("undefined"===typeof a||null===a)a=Z.navigatorW;if("undefined"===typeof b||null===b)b=Z.navigatorH;if("undefined"===typeof c||null===c)c=0;if("undefined"===typeof d||null===d)d=0;C||(C=Z.NavigatorDisplay);O||(O=C.style);B=C.childNodes[1].firstChild;0==B.width&&"undefined"!==g&&null!==g&&(B.width=g);0==B.height&&
"undefined"!==h&&null!==h&&(B.height=h);C&&O&&B&&(e&&(a=1,a=0==e?Z.viewerW/Z.viewerH:B.width/B.height,a*=b),O.width=a+"px",O.height=b+"px",O.left=c+"px",O.top=d+"px",f(a,b))}function f(a,b){B||(B=Z.NavigatorDisplay.childNodes[1].firstChild);B&&0!=B.width&&0!=B.height?(xa||(xa=Z.NavigatorDisplay.firstChild.style),L||(L=Z.NavigatorDisplay.childNodes[1].style),xa&&L&&(xa.width=a+"px",xa.height=b+"px",m(a,b),L.width=B.width+"px",L.height=B.height+"px",L.left=(a-B.width)/2+"px",L.top=(b-B.height)/2+"px",
s())):window.setTimeout(function(){f(a,b)},100)}function m(a,b){B||(B=Z.NavigatorDisplay.childNodes[1].firstChild);if(B){var c=B.width,d=B.height,e=c/d,f=a/c,g=b/d;f<=g?(c=a,d=a/e,navImageT=(b-a/c*d)/2):g<f&&(d=b,c=b*e,navImageL=(a-b/d*c)/2);B.width=c;B.height=d}}function l(a){O||(O=Z.NavigatorDisplay.style);O&&(O.display=a?"inline-block":"none")}function s(){if(a&&a.getInitialized()){w();var b=a.calculateCurrentCenterCoordinates();x(b)}}function w(){if(B&&g){var b=B.width/Z.imageW,c=B.height/Z.imageH,
d=a.getZoom(),c=Z.viewerH*c/d;g.width=Z.viewerW*b/d+"px";g.height=c+"px"}}function x(a){if(B&&g&&L){if("undefined"===typeof a||null===a||0==a.x&&0==a.y)a=new Z.Utils.Point(Z.imageX,Z.imageY);if("undefined"===typeof z||null===z)z=Z.imageZ;var b=Z.imageR;0>b&&(b+=360);var c=parseFloat(B.width),d=parseFloat(B.height),b=Z.Utils.rotatePoint(c/Z.imageW*a.x-c/2,d/Z.imageH*a.y-d/2,-b);a=b.x-parseFloat(g.width)/2;c=b.y-parseFloat(g.height)/2;b=parseFloat(O.width)/2;c=parseFloat(O.height)/2+c-1;g.left=b+a+
"px";g.top=c+"px"}}function y(){if(B&&g&&L){if("undefined"===typeof z||null===z)z=Z.imageZ;var b=Z.imageR;0>b&&(b+=360);var c=parseFloat(g.left),d=parseFloat(g.top),e=parseFloat(O.width)/2,f=parseFloat(O.height)/2,d=d-f,c=c-e+parseFloat(g.width)/2,e=d+parseFloat(g.height)/2,b=Z.Utils.rotatePoint(c,e,b),c=parseFloat(B.width),e=parseFloat(B.height),d=c/Z.imageW,b=new Z.Utils.Point((b.x+c/2)/d,(b.y+e/2)/d);a.syncViewportToNavigator(b)}}function G(){Z.Utils.showMessage(Z.Utils.getResource("z271"))}function R(b){Z.interactivityOff||
(a.zoomAndPanAllStop(!1,!0),Z.maskingSelection&&Z.maskClearOnUserAction&&a.clearMask(),C&&J&&g&&(b=Z.Utils.event(b),J.mouseXPrior=b.clientX,J.mouseYPrior=b.clientY,dragPtStart=new Z.Utils.Point(b.clientX,b.clientY),Z.Utils.addEventListener(C,"mousemove",ha),Z.Utils.addEventListener(C,"mouseup",Q),Z.Utils.addEventListener(document,"mouseup",Q)))}function ha(a){if(!Z.interactivityOff&&J&&g){var b=parseFloat(g.left),c=parseFloat(g.top);g.left=b+(a.clientX-J.mouseXPrior)+"px";g.top=c+(a.clientY-J.mouseYPrior)+
"px";J.mouseXPrior=a.clientX;J.mouseYPrior=a.clientY;y();return!1}}function Q(b){if(!Z.interactivityOff&&C&&J&&g){document.mousemove=null;document.mouseup=null;Z.Utils.removeEventListener(C,"mousemove",ha);Z.Utils.removeEventListener(C,"mouseup",Q);Z.Utils.removeEventListener(document,"mouseup",Q);b=Z.Utils.event(b);var c=new Z.Utils.Point(b.clientX,b.clientY);4>Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),g.left=b.clientX-
c.x-parseFloat(g.width)/2+"px",g.top=b.clientY-c.y-parseFloat(g.height)/2+"px");y();a.updateView()}}function A(a){!Z.interactivityOff&&(a.preventDefault(),C&&J&&g&&(a=Z.Utils.getFirstTouch(a)))&&(a=new Z.Utils.Point(a.pageX,a.pageY),dragPtStart=new Z.Utils.Point(a.x,a.y),J.mouseXPrior=a.x,J.mouseYPrior=a.y)}function X(a){if(!Z.interactivityOff&&(a.preventDefault(),Z.mousePan)){if(J&&g&&(a=Z.Utils.getFirstTouch(a))){a=new Z.Utils.Point(a.pageX,a.pageY);var b=parseFloat(g.left),c=parseFloat(g.top);
g.left=b+(a.x-J.mouseXPrior)+"px";g.top=c+(a.y-J.mouseYPrior)+"px";J.mouseXPrior=a.x;J.mouseYPrior=a.y;y()}return!1}}function ga(b){if(!Z.interactivityOff&&C&&J&&g){if(b=Z.Utils.getFirstTouch(b)){b=new Z.Utils.Point(b.pageX,b.pageY);var c=new Z.Utils.Point(b.x,b.y);Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)<(Z.mobileDevice?6:3)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),g.left=b.x-c.x-parseFloat(g.width)/2+"px",g.top=b.y-c.y-parseFloat(g.height)/2+"px")}y();a.updateView()}}
function r(b){if(!Z.interactivityOff&&C&&J&&g){if(b=Z.Utils.getFirstTouch(b)){b=new Z.Utils.Point(b.pageX,b.pageY);var c=new Z.Utils.Point(b.x,b.y);Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)<(Z.mobileDevice?6:3)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),g.left=b.x-c.x-parseFloat(g.width)/2+"px",g.top=b.y-c.y-parseFloat(g.height)/2+"px")}y();a.updateView()}}var H=this,ca=!1,M=a.getViewportID().toString(),N,C,O,da,xa,S,L,B,J,g,E,ka=[],q=Z.navigatorW,Ma=Z.navigatorH,
sb=Z.navigatorL,tb=Z.navigatorT,rb=Z.navigatorFit,ub;c(b);this.z556=function(a,c){b(a,c)};this.setImage=function(a){S&&E&&0<S.childNodes.length&&(S.innerHTML="");"undefined"===typeof ka||null===ka||0==ka.length?c(d):(a=Z.Utils.arrayIndexOfObjectValue(ka,"id",M),-1!=a&&(E=ka[a].image,d(E)))};this.getInitialized=function(){return ca};this.setVisibility=function(a){l(a)};this.syncToViewport=function(){s()};this.z657=function(){w()};this.z658=function(a){x(a)};this.setViewport=function(b){a=b;M=a.getViewportID().toString();
H.setImage(a.getImagePath())};this.z682=function(){ca?e():N=window.setInterval(e,300)};this.setSizeAndPosition=function(a,b,c,d,e,f,g){h(a,b,c,d,e,f,g)}};
Z.NetConnector=function(){function a(a,d,e,f,h,m){var l=b();if(l){var s="function"===typeof d;if(s){var w=d;d=function(){window.setTimeout(Z.Utils.createCallback(null,w,l),1)};l.onreadystatechange=function(){4==l.readyState&&(l.onreadystatechange=new Function,d())}}try{"undefined"===typeof e||null===e?(l.open("GET",a,s),l.send(null)):"undefined"!==typeof f&&null!==f&&"ZoomifyImageFile"==Z.tileSource&&("tile"!=f&&(a=Z.Utils.cacheProofPath(a)),l.open("GET",a,!0),l.responseType="arraybuffer",Z.Utils.defineObjectProperty(l,
"zType",{value:f,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(l,"zTile",{value:h,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(l,"zChunkNumber",{value:m,writable:!1,enumerable:!1,configurable:!1}),Z.browser==Z.browsers.SAFARI&&l.setRequestHeader("If-Modified-Since","Thu, 01 Dec 1994 16:00:00 GMT"),l.setRequestHeader("Range","bytes="+e.start.toString()+"-"+e.end.toString()),l.send(null))}catch(r){c(r,a,f),l.onreadystatechange=l=null}}else Z.Utils.showMessage(Z.Utils.getResource("z295"))}
function b(){var a=null;switch(Z.xmlHttpRequestSupport){case "XMLHttpRequest":a=new XMLHttpRequest;break;case "Msxml2.XMLHTTP.6.0":a=new ActiveXObject("Msxml2.XMLHTTP.6.0");break;case "Msxml2.XMLHTTP.3.0":a=new ActiveXObject("Msxml2.XMLHTTP.3.0");break;case "Microsoft.XMLHTTP":a=new ActiveXObject("Microsoft.XMLHTTP")}return a}function c(a,b,c){1==Z.localUse&&(Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=
Z.browserVersion)?Z.Utils.showMessage(Z.Utils.getResource("z288"),!0):1==Z.localUse&&"ZoomifyImageFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z290"),!0):1==Z.localUse&&"ZoomifyPFFFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z289"),!0):-1!=b.toLowerCase().indexOf(".zif")?Z.Utils.showMessage(Z.Utils.getResource("z256-ZIFBYTERANGE")+c+".",!1,m,"center"):-1!=b.indexOf("ImageProperties.xml")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEXML"),!0,null,"left"):-1!=b.toLowerCase().indexOf(".pff")?
Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEHEADER"),!1,m,"center"):-1!=b.toLowerCase().indexOf("reply_data")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEOFFSET"),!1,m,"center"):-1!=b.indexOf(Z.Utils.getResource("z200"))?Z.Utils.showMessage(Z.Utils.getResource("z256-TOOLBARSKINSXML"),!0,null,"left"):Z.Utils.showMessage(Z.Utils.getResource("z256"),!1,f,"center")}function d(a,b){if(a)if(200!==a.status&&0!==a.status&&206!==a.status){var c=a.status,d=404==c?"Not Found":a.statusText;Z.Toolbar&&
!Z.Toolbar.getInitialized()?Z.Utils.showMessage(Z.Utils.getResource("z256-TOOLBARSKINSXML"),!0,null,"left"):"ZoomifyImageFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z273RANGEREQUESTS")+c+" - "+d,!0,null,"left"):Z.Utils.showMessage(Z.Utils.getResource("z273")+c+" - "+d,!1,f,"center")}else c=null,a.response&&a.zType&&"ZoomifyImageFile"==Z.tileSource?Z.Viewport&&(c=new Z.Utils.createUint8Array(a.response,0),"header"==a.zType?"undefined"!==typeof b&&null!==b||Z.Viewport.parseZIFHeader(c):
"offset"==a.zType?"undefined"!==typeof b&&null!==b||Z.Viewport.parseZIFOffsetChunk(c,a.zChunkNumber):"byteCount"==a.zType?"undefined"!==typeof b&&null!==b||Z.Viewport.parseZIFByteCountChunk(c,a.zChunkNumber):"image"==a.zType.substring(0,5)?(l--,Z.Viewport.parseZIFImage(c,a.zTile,a.zType)):"navigator"==a.zType?"undefined"!==typeof b&&null!==b||Z.viewportCurrent.parseZIFImage(c,a.zTile,a.zType):Z.Utils.showMessage(Z.Utils.getResource("z256-ZIFBYTES"),!1,m,"center")):a.responseXML&&a.responseXML.documentElement&&
((c=a.responseXML)&&c.documentElement?(d=c.documentElement.tagName,"COPYRIGHT"==d?(d=c.documentElement.getAttribute("STATEMENTTEXT"),c=c.documentElement.getAttribute("DECLINEDTEXT"),Z.Utils.stringValidate(d)?Z.Utils.showCopyright(d,c):Z.Utils.showMessage(Z.Utils.getResource("z255"),!0)):"IMAGE_PROPERTIES"==d||"ZIFHEADER"==d||"PFFHEADER"==d?("ZoomifyImageFile"==Z.tileSource||"ZoomifyImageFolder"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource||"ImageServer"==Z.tileSource)&&Z.Viewport&&Z.Viewport.z602(c):
"SKINDATA"==d?Z.Toolbar&&Z.Toolbar.parseSkinXML(c):"SLIDEDATA"==d?Z.Viewport&&Z.Viewport.parseSlidesXML(c):Z.Utils.showMessage(Z.Utils.getResource("z296"),!0)):Z.Utils.showMessage(Z.Utils.getResource("z293"),!0));else Z.Utils.showMessage(Z.Utils.getResource("z272"),!1,f,"center")}function e(a,b,c){l--;if("function"===typeof a)try{a(c)}catch(d){Z.Utils.showMessage(d.name+Z.Utils.getResource("z245")+b+" "+d.message,!0)}}function h(a,b,c){function d(c){e.onload=null;e.onabort=null;e.onerror=null;f&&
window.clearTimeout(f);window.setTimeout(function(){b(a,c?e:null)},1)}var e=null,f=null;this.start=function(){e=new Image;var b=function(){d(!1)};e.onload=function(){d(!0)};e.onabort=b;e.onerror=b;f=window.setTimeout(function(){console.log(Z.Utils.getResource("z253"));d(!1);Z.Viewport.validateView("imageRequestTimeout",c+" timeout: "+a)},w);e.src=a}}var f=parseInt(Z.Utils.getResource("z268"),10),m=parseInt(Z.Utils.getResource("z268MEDIUM"),10),l=0,s=parseInt(Z.Utils.getResource("z140"),10),w=parseFloat(Z.Utils.getResource("z139"));
this.loadXML=function(b,c){"undefined"===typeof c||null===c?a(b,d,null):a(b,function(a){d(a,c)},null)};this.loadJSON=function(b){a(b,d,null)};this.loadByteRange=function(b,c,e,f,h,l){c=new Z.Utils.Range(c,e);a(b,d,c,f,h,l)};this.loadImageByteRange=function(b,c,e){var f=b.substring(0,b.indexOf("?")),h=parseFloat(b.substring(b.indexOf("?")+1,b.indexOf(",")));b=parseFloat(b.substring(b.indexOf(",")+1,b.length));h=new Z.Utils.Range(h,h+b);a(f,d,h,c,e)};this.loadImage=function(a,b,c,d){return l<s?(l++,
"ZoomifyImageFile"==Z.tileSource&&("undefined"!==typeof d&&null!==d||"navigator"==c)?this.loadImageByteRange(a,c,d):(b=Z.Utils.createCallback(null,e,b),(new h(a,b,c)).start()),!0):!1}};
Z.Utils={addCrossBrowserMethods:function(){document.addEventListener?(this.disableTextInteraction=function(a){if(a){var b=a.parentNode.style;b&&(a.parentNode.unselectable="on",b.userSelect="none",b.MozUserSelect="none",b.webkitUserSelect="none",b.webkitTouchCallout="none",b.webkitTapHighlightColor="transparent")}},this.renderQuality=function(a,b){b&&a.style.setProperty("image-rendering","high"==b?"optimizeQuality":"optimizeSpeed",null)},this.setOpacity=function(a,b,c){Z.alphaSupported?a.style.opacity=
b:c&&(a.style.backgroundColor=c)}):document.attachEvent&&(this.disableTextInteraction=function(a){a&&(a.parentNode.unselectable="on",a.parentNode.onselectstart=function(){return!1})},this.renderQuality=function(a,b){b&&(a.style.msInterpolationMode="high"==b?"bicubic":"nearest-neighbor")},this.setOpacity=function(a,b,c){Z.alphaSupported?(b*=100,a.style.zoom=1,a.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+b+")",a.style.filter="alpha(opacity="+b+")",100==b&&(a.style.filter="")):c&&
(a.style.backgroundColor=c)})},addCrossBrowserEvents:function(){document.addEventListener?(this.addEventListener=function(a,b,c){a&&("mousewheel"==b&&a.addEventListener("DOMMouseScroll",c,!1),a.addEventListener(b,c,!1))},this.removeEventListener=function(a,b,c){a&&("mousewheel"==b&&a.removeEventListener("DOMMouseScroll",c,!1),a.removeEventListener(b,c,!1))},this.event=function(a){return a},this.target=function(a){return a.target},this.relatedTarget=function(a){return a.relatedTarget},this.isRightMouseButton=
function(a){var b=!1;if(2==a.which||3==a.which)b=!0;return b},this.preventDefault=function(a){a.preventDefault()},this.stopPropagation=function(a){a.stopPropagation()}):document.attachEvent&&(this.addEventListener=function(a,b,c){if(-1==this._findListener(a,b,c)){var d=function(){var b=window.event;Function.prototype.call?c.call(a,b):(a._currentListener=c,a._currentListener(b),a._currentListener=null)};a.attachEvent("on"+b,d);b={target:a,eventName:b,handler:c,handler2:d};var d=(a.document||a).parentWindow,
e="l"+this._listenerCounter++;d._allListeners||(d._allListeners={});d._allListeners[e]=b;a._listeners||(a._listeners=[]);a._listeners[a._listeners.length]=e;d._unloadListenerAdded||(d._unloadListenerAdded=!0,d.attachEvent("onunload",this._removeAllListeners))}},this.removeEventListener=function(a,b,c){if(a&&(c=this._findListener(a,b,c),-1!=c)){var d=(a.document||a).parentWindow,e=a._listeners[c];a.detachEvent("on"+b,d._allListeners[e].handler2);a._listeners=Z.Utils.arraySplice(a._listeners,c,1);delete d._allListeners[e]}},
this.event=function(a){return window.event},this.target=function(a){return a.srcElement},this.relatedTarget=function(a){var b=null;"mouseover"==a.type?b=a.fromElement:"mouseout"==a.type&&(b=a.toElement);return b},this.isRightMouseButton=function(a){var b=!1;2==a.button&&(b=!0);return b},this.preventDefault=function(a){a&&(a.returnValue=!1)},this.stopPropagation=function(a){a.cancelBubble=!0},this._findListener=function(a,b,c){var d=a._listeners;if(!d)return-1;a=(a.document||a).parentWindow;for(var e=
d.length-1;0<=e;e--){var h=a._allListeners[d[e]];if(h&&h.eventName==b&&h.handler==c)return e}return-1},this._removeAllListeners=function(){for(id in this._allListeners){var a=this._allListeners[id];a.target.detachEvent("on"+a.eventName,a.handler2);delete this._allListeners[id]}},this._listenerCounter=0)},declareGlobals:function(){Z.pageContainerID=null;Z.imagePath=null;Z.skinPath=null;Z.skinMode=null;Z.parameters=null;Z.cacheProofCounter=0;Z.browsers=null;Z.browser=null;Z.browserVersion=null;Z.scaleThreshold=
null;Z.canvasSupported=null;Z.cssTransformsSupported=null;Z.cssTransformProperty=null;Z.cssTransformNoUnits=null;Z.alphaSupported=null;Z.renderQuality=null;Z.rotationSupported=null;Z.fullScreenSupported=null;Z.arrayMapSupported=null;Z.arraySpliceSupported=null;Z.float32ArraySupported=null;Z.uInt8ArraySupported=null;Z.xmlHttpRequestSupport=null;Z.definePropertySupported=null;Z.responseArraySupported=null;Z.responseArrayPrototyped=!1;Z.touchSupport=null;Z.mobileDevice=null;Z.localUse=null;Z.zifSupported=
null;Z.initialX=null;Z.initialY=null;Z.initialZ=null;Z.initialZoom=null;Z.minZ=null;Z.minZoom=null;Z.maxZ=null;Z.maxZoom=null;Z.zoomSpeed=null;Z.panSpeed=null;Z.smoothPan=null;Z.smoothPanEasing=null;Z.smoothPanGlide=null;Z.fadeInSpeed=null;Z.toolbarVisible=null;Z.toolbarAutoShowHide=null;Z.toolbarW=null;Z.toolbarH=null;Z.toolbarPosition=null;Z.navigatorVisible=null;Z.navigatorW=null;Z.navigatorWidth=null;Z.navigatorH=null;Z.navigatorHeight=null;Z.navigatorL=null;Z.navigatorLeft=null;Z.navigatorT=
null;Z.navigatorTop=null;Z.navigatorFit=null;Z.navigatorRectangleColor=null;Z.clickZoom=null;Z.doubleClickZoom=null;Z.doubleClickDelay=null;Z.clickPan=null;Z.clickZoomAndPanBlock=!1;Z.mousePan=null;Z.keys=null;Z.constrainPan=null;Z.constrainPanStrict=null;Z.tooltipsVisible=null;Z.helpVisible=0;Z.minimizeVisible=null;Z.sliderVisible=null;Z.panButtonsVisible=null;Z.resetVisible=null;Z.fullViewVisible=null;Z.fullScreenVisible=null;Z.fullPageVisible=null;Z.initialFullPage=null;Z.fullPageInitial=null;
Z.measureVisible=!1;Z.textColor=null;Z.lineColor=null;Z.backColor=null;Z.fillColor=null;Z.rotationVisible=null;Z.initialR=null;Z.initialRotation=null;Z.progressVisible=null;Z.logoVisible=null;Z.logoLink=null;Z.logoLinkURL=null;Z.logoCustomPath=null;Z.canvas=null;Z.debug=null;Z.imageProperties=null;Z.tileW=null;Z.tileH=null;Z.tileType="jpg";Z.tilesPNG=null;Z.tileSource=null;Z.Viewer=null;Z.ViewerDisplay=null;Z.Viewport=null;Z.Toolbar=null;Z.ToolbarDisplay=null;Z.ToolbarMinimized=!1;Z.TooltipDisplay=
null;Z.Navigator=null;Z.NavigatorDisplay=null;Z.MessageDisplay=null;Z.messages=null;Z.messageDisplayList=[];Z.overlayMessage=null;Z.imageW=null;Z.imageH=null;Z.imageCenterX=null;Z.imageCenterY=null;Z.imageX=0;Z.imageY=0;Z.imageZ=0;Z.imageR=0;Z.priorX=0;Z.priorY=0;Z.priorZ=0;Z.priorR=0;Z.preventDupCall=!1;Z.fitZ=null;Z.zooming="stop";Z.panningX="stop";Z.panningY="stop";Z.fullView=!1;Z.interactivityOff=!1;Z.useCanvas=!0;Z.specialStorageEnabled=null;Z.callbacks=[];Z.updateViewPercent=0;Z.mouseIsDown=
!1;Z.mouseOutDownPoint=null;Z.viewportCurrentID=0;Z.viewportCurrent=null},detectBrowserFeatures:function(){Z.browsers={UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5};var a=Z.browsers.UNKNOWN,b=0,c=1E4,d=navigator.appName,e=navigator.appVersion,h=!1,f=!1,m=navigator.userAgent.toLowerCase();if("Microsoft Internet Explorer"==d&&window.attachEvent&&window.ActiveXObject)b=m.indexOf("msie"),a=Z.browsers.IE,b=parseFloat(m.substring(b+5,m.indexOf(";",b))),h="undefined"!==typeof document.documentMode;
else if("Netscape"==d&&-1!=m.indexOf("trident"))a=Z.browsers.IE,b=11;else if("Netscape"==d&&window.addEventListener){var l=m.indexOf("firefox"),d=m.indexOf("safari"),e=m.indexOf("chrome");0<=l?(a=Z.browsers.FIREFOX,b=parseFloat(m.substring(l+8)),c=1E4):0<=d&&(c=m.substring(0,d).lastIndexOf("/"),a=0<=e?Z.browsers.CHROME:Z.browsers.SAFARI,b=parseFloat(m.substring(c+1,d)),c=1E4);d=new Image;d.style.getPropertyValue&&(f=d.style.getPropertyValue("image-rendering"))}else"Opera"==d&&window.opera&&"[object Opera]"==
Object.prototype.toString.call(window.opera)&&(a=Z.browsers.OPERA,b=parseFloat(e));var s;if(window.ActiveXObject)for(d=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],e=0,l=d.length;e<l;e++)try{netReq=new ActiveXObject(d[e]);s=d[e];break}catch(w){}else window.XMLHttpRequest&&(netReq=new XMLHttpRequest,s="XMLHttpRequest");var d="response"in XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in
XMLHttpRequest.prototype,e=document.createElement("canvas"),e=!(!e.getContext||!e.getContext("2d")),l=!(a==Z.browsers.SAFARI&&4>b||a==Z.browsers.CHROME&&2>b),e=e&&l,l=!(a==Z.browsers.CHROME&&2>b),f=h||f?"high":null,x=(document.documentElement||{}).style||{},h=!1,y=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],G,R;for(;G=y.shift();)if("undefined"!==typeof x[G]){h=!0;R=/webkit/i.test(G);break}x=h;y=!1;if("undefined"!==typeof document.cancelFullScreen||"undefined"!==typeof document.webkitCancelFullScreen||
"undefined"!==typeof document.mozCancelFullScreen||"undefined"!==typeof document.oCancelFullScreen||"undefined"!==typeof document.msCancelFullScreen||"undefined"!==typeof document.msExitFullscreen)y=!0;var ha=Array.prototype.map,Q=Array.prototype.splice,A=!1;try{new Float32Array(1),A=!0}catch(X){}var ga=!1;try{new Uint8Array(1),ga=!0}catch(r){}var H=!1;if("function"==typeof Object.defineProperty)try{Object.defineProperty({},"x",{}),H=!0}catch(ca){}var M="ontouchstart"in window||window.DocumentTouch&&
document instanceof DocumentTouch||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,m=-1<m.indexOf("android")||-1<m.indexOf("iphone")||-1<m.indexOf("ipad")||-1<m.indexOf("ipod"),N;switch(window.location.protocol){case "http:":N=!1;break;case "https:":N=!1;break;case "file:":N=!0;break;default:N=null}var C=!(Z.browser==Z.browsers.IE&&9>Z.browserVersion||Z.browser==Z.browsers.OPERA&&15>Z.browserVersion||Z.browser==Z.browsers.CHROME&&25>Z.browserVersion&&Z.browser==Z.browsers.FIREFOX&&20>Z.browserVersion&&
Z.browser==Z.browsers.SAFARI&&5>Z.browserVersion);Z.browser=a;Z.browserVersion=b;Z.scaleThreshold=c;Z.xmlHttpRequestSupport=s;Z.responseArraySupported=d;Z.canvasSupported=e;Z.useCanvas=Z.canvasSupported;Z.imageFiltersVisible=!Z.useCanvas&&Z.imageFiltersVisible?!1:Z.imageFiltersVisible;Z.cssTransformsSupported=h;Z.cssTransformProperty=G;Z.cssTransformNoUnits=R;Z.alphaSupported=l;Z.renderQuality=f;Z.rotationSupported=x;Z.fullScreenSupported=y;Z.arrayMapSupported=ha;Z.arraySpliceSupported=Q;Z.float32ArraySupported=
A;Z.uInt8ArraySupported=ga;Z.definePropertySupported=H;Z.touchSupport=M;Z.mobileDevice=m;Z.localUse=N;Z.zifSupported=C},parseParameters:function(a){var b=[];if("object"===typeof a)b=a;else if("string"===typeof a){a=a.split("&");for(var c=0,d=a.length;c<d;c++){var e=a[c],h=e.indexOf("=");if(0<h){var f=e.substring(0,h),e=e.substring(h+1);b[f]=e}}}return b},parametersToDelimitedString:function(a,b){var c="",d;for(d in a)c+=d+"="+a[d].toString()+b;return c=c.slice(0,-1)},setParameters:function(a){var b=
this.getResource("z287"),c=this.getResource("z110"),d=this.getResource("z109"),e=this.getResource("z108"),c=c!=d?!0:!1;c||(Z.logoLinkURL=Z.Utils.getResource("z427"));var h=this.getResource("z187"),f=this.getResource("z186"),d=this.getResource("z185"),h=h!=f?!0:!1,f=this.getResource("z215"),m=this.getResource("z214");this.getResource("z213");Z.specialStorageEnabled=f!=m?!0:!1;var m=this.getResource("z107"),l=this.getResource("z106"),f=this.getResource("z105"),m=m!=l?!0:!1;Z.skinPath=this.getResource("z201");
Z.skinMode=this.getResource("z199");isNaN(parseFloat(this.getResource("z143")))||(Z.initialX=parseFloat(this.getResource("z143")));isNaN(parseFloat(this.getResource("z144")))||(Z.initialY=parseFloat(this.getResource("z144")));isNaN(parseFloat(this.getResource("z145")))||(Z.initialZ=parseFloat(this.getResource("z145")));isNaN(parseFloat(this.getResource("z163")))||(Z.minZ=parseFloat(this.getResource("z163")));isNaN(parseFloat(this.getResource("z153")))||(Z.maxZ=parseFloat(this.getResource("z153")));
isNaN(parseFloat(this.getResource("z241")))||(Z.zoomSpeed=parseFloat(this.getResource("z241")));isNaN(parseFloat(this.getResource("z175")))||(Z.panSpeed=parseFloat(this.getResource("z175")));isNaN(parseFloat(this.getResource("z111")))||(Z.fadeInSpeed=parseFloat(this.getResource("z111")));Z.navigatorVisible=parseInt(this.getResource("z171"),10);Z.navigatorW=parseInt(this.getResource("z172"),10);Z.navigatorH=parseInt(this.getResource("z167"),10);Z.navigatorL=parseInt(this.getResource("z168"),10);Z.navigatorT=
parseInt(this.getResource("z170"),10);Z.navigatorFit=this.getResource("z166");Z.navigatorRectangleColor=this.getResource("z169");Z.clickZoom="0"!=this.getResource("z93");Z.doubleClickZoom="0"!=this.getResource("DEFAULT_DOUBLECLICKZOOM");Z.doubleClickDelay=parseFloat(this.getResource("DEFAULT_DOUBLECLICKDELAY"));Z.clickPan="0"!=this.getResource("z92");Z.mousePan="0"!=this.getResource("z164");Z.constrainPan="0"!=this.getResource("z95");Z.constrainPanStrict="0"!=this.getResource("z95STRICT");Z.smoothPan=
Z.useCanvas&&"0"!=this.getResource("DEFAULT_SMOOTHPAN");Z.smoothPanEasing=parseInt(this.getResource("DEFAULT_SMOOTHPANEASING"),10);Z.smoothPanGlide=parseInt(this.getResource("DEFAULT_SMOOTHPANGLIDE"),10);Z.keys="0"!=this.getResource("z146");Z.canvas="0"!=this.getResource("z88");Z.debug=parseInt(this.getResource("z104"),10);Z.toolbarVisible=parseInt(this.getResource("z223"),10);Z.toolbarAutoShowHide=0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&6!=Z.toolbarVisible&&7!=Z.toolbarVisible&&8!=Z.toolbarVisible;
Z.toolbarPosition=parseFloat(this.getResource("z222"));Z.logoVisible="0"!=this.getResource("z150");Z.logoCustomPath=this.getResource("z149");Z.minimizeVisible="0"!=this.getResource("z162");Z.sliderVisible="0"!=this.getResource("z206");Z.panButtonsVisible="0"!=this.getResource("z174");Z.resetVisible="0"!=this.getResource("DEFAULT_RESETVISIBLE");Z.tooltipsVisible="0"!=this.getResource("z224");Z.helpVisible=parseInt(this.getResource("z128"),10);Z.progressVisible="0"!=this.getResource("z184");Z.fullViewVisible=
"0"!=this.getResource("z121");Z.fullScreenVisible="0"!=this.getResource("z119");Z.fullPageVisible="0"!=this.getResource("z118");Z.initialFullPage="0"!=this.getResource("z141");Z.rotationVisible="0"!=this.getResource("z190");Z.initialR=this.getResource("DEFAULT_INITIALR");if("object"===typeof a&&null!==a)for(var s in a)if("function"!==typeof a[s]||"zOnAnnotationReady"===s||"zOnReady"===s)if("undefined"===typeof Z[Z.Utils.stringLowerCaseFirstLetter(s.substr(1))])alert(b+" "+s);else if(pValue=a[s],c||
"zNavigatorVisible"==s)switch(s){case "zInitialX":isNaN(parseFloat(pValue))||(Z.initialX=parseFloat(pValue));break;case "zInitialY":isNaN(parseFloat(pValue))||(Z.initialY=parseFloat(pValue));break;case "zInitialZoom":isNaN(parseFloat(pValue))||(Z.initialZ=parseFloat(pValue),Z.initialZ&&-1!=Z.initialZ&&(Z.initialZ/=100));break;case "zMinZoom":isNaN(parseFloat(pValue))||(Z.minZ=parseFloat(pValue),Z.minZ&&-1!=Z.minZ&&(Z.minZ/=100));break;case "zMaxZoom":isNaN(parseFloat(pValue))||(Z.maxZ=parseFloat(pValue),
Z.maxZ&&-1!=Z.maxZ&&(Z.maxZ/=100));break;case "zNavigatorVisible":Z.navigatorVisible=parseInt(pValue,10);break;case "zNavigatorRectangleColor":Z.navigatorRectangleColor=pValue;break;case "zToolbarVisible":Z.toolbarVisible=parseInt(pValue,10);Z.toolbarAutoShowHide=0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&6!=Z.toolbarVisible&&7!=Z.toolbarVisible&&8!=Z.toolbarVisible;break;case "zLogoVisible":"0"==pValue&&(Z.logoVisible=!1);break;case "zMinimizeVisible":"0"==pValue&&(Z.minimizeVisible=!1);break;case "zSliderVisible":"0"==
pValue&&(Z.sliderVisible=!1);break;case "zPanButtonsVisible":"0"==pValue&&(Z.panButtonsVisible=!1);break;case "zResetVisible":"0"==pValue&&(Z.resetVisible=!1);break;case "zFullViewVisible":"1"==pValue?(Z.fullScreenVisible=!0,Z.fullPageVisible=!1):"0"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!1);break;case "zFullScreenVisible":"0"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!1);break;case "zFullPageVisible":"1"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!0);break;case "zInitialFullPage":"1"==
pValue&&(Z.initialFullPage=!0);break;case "zFullPageInitial":alert(Z.Utils.getResource("z275")+" zFullPageInitial is now zInitialFullPage");break;case "zSkinPath":Z.skinPath=pValue;break;case "zTooltipsVisible":"0"==pValue&&(Z.tooltipsVisible=!1);break;case "zHelpVisible":Z.helpVisible=parseInt(pValue,10);break;case "zProgressVisible":"0"==pValue&&(Z.progressVisible=!1);break;default:h||alert(d+" "+s)}else alert(e+" "+s);if(Z.Utils.stringValidate(Z.annotationPath)||Z.Utils.stringValidate(Z.saveHandlerPath))m||
alert(f);Z.Utils.validateImagePath()},resetParametersXYZ:function(a){isNaN(parseFloat(this.getResource("z143")))||(Z.initialX=parseFloat(this.getResource("z143")));isNaN(parseFloat(this.getResource("z144")))||(Z.initialY=parseFloat(this.getResource("z144")));isNaN(parseFloat(this.getResource("z145")))||(Z.initialZ=parseFloat(this.getResource("z145")));isNaN(parseFloat(this.getResource("z163")))||(Z.minZ=parseFloat(this.getResource("z163")));isNaN(parseFloat(this.getResource("z153")))||(Z.maxZ=parseFloat(this.getResource("z153")));
if(this.stringValidate(a))for(var b=0,c=a.length;b<c;b++){var d=a[b],e=d.indexOf("=");if(0<e){var h=d.substring(0,e),d=d.substring(e+1);if(this.stringValidate(d))switch(h){case "zInitialX":isNaN(parseFloat(d))||(Z.initialX=parseFloat(d));break;case "zInitialY":isNaN(parseFloat(d))||(Z.initialY=parseFloat(d));break;case "zInitialZoom":isNaN(parseFloat(d))||(Z.initialZ=parseFloat(d),Z.initialZ&&-1!=Z.initialZ&&(Z.initialZ/=100));break;case "zMinZoom":isNaN(parseFloat(d))||(Z.minZ=parseFloat(d),Z.minZ&&
-1!=Z.minZ&&(Z.minZ/=100));break;case "zMaxZoom":isNaN(parseFloat(d))||(Z.maxZ=parseFloat(d),Z.maxZ&&-1!=Z.maxZ&&(Z.maxZ/=100))}}}},validateImagePath:function(a){a="undefined"!==typeof a&&Z.Utils.stringValidate(a)?a:Z.imagePath;if(null!==a){var b=this.getResource("z213");-1!=a.toLowerCase().indexOf(".zif")?Z.zifSupported?(Z.tileSource="ZoomifyImageFile",Z.Utils.validateResponseArrayFunctionality()):alert(this.getResource("z16")):Z.Utils.stringValidate(Z.tileHandlerPath)?-1!=a.toLowerCase().indexOf(".pff")?
Z.specialStorageEnabled?(Z.tileSource="ZoomifyPFFFile",a=Z.tileHandlerPath,Z.tileHandlerPathFull=a):alert(b):Z.Utils.stringValidate(Z.tileHandlerPath)&&(Z.specialStorageEnabled?(Z.tileSource="ImageServer",a=Z.tileHandlerPath,Z.tileHandlerPathFull=a):alert(b)):Z.tileSource="ZoomifyImageFolder"}},getResource:function(a){var b="";switch(a){case "z110":b="Enable Express parameters";break;case "z109":b="Changing This Violates License Agreement";break;case "z108":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Express, Pro, and Enterprise editions: ";
break;case "z187":b="Changing This Violates License Agreement";break;case "z186":b="Changing This Violates License Agreement";break;case "z185":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Pro and Enterprise editions: ";break;case "z215":b="Changing this violates License Agreement";break;case "z214":b="Changing this violates License Agreement";break;case "z213":b="Support for Zoomify Image File (PFF) storage and other special storage options is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition.";
break;case "z107":b="Changing this violates License Agreement";break;case "z106":b="Changing this violates License Agreement";break;case "z105":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition: ";break;case "z125":b="0";break;case "z124":b="8192";break;case "z90":b="ZoomifyImageFile"==Z.tileSource?"1024":"256";break;case "z221":b="256";break;case "z219":b="256";break;case "z140":b="300";break;case "z139":b="60000";break;case "z218":b=
"1.15";break;case "z220":b="300";break;case "z81":b="6";break;case "z78":b="3";break;case "z80":b="5";break;case "z77":b="3";break;case "z79":b="3";break;case "z76":b="2";break;case "z75":b="0";break;case "z173":b=Z.mobileDevice?"1":"1.5";Z.rotationVisible&&(b="2");break;case "z74":b=Z.mobileDevice?"1":"2";break;case "z88":b="1";break;case "z230":b="2000";break;case "DEFAULT_VALIDATEVIEWRETRYLIMIT":b="2";break;case "DEFAULT_VALIDATEVIEWRETRYDELAY":b="1000";break;case "z104":b="0";break;case "z175":b=
"5";break;case "z176":b="10";break;case "z241":b="5";break;case "z242":b="0.02";break;case "z238":b="30";break;case "z240":b="20";break;case "z239":b="800";break;case "z93TIERSKIPTHRESHOLD":b="0.2";break;case "z122":b="10";break;case "z165":b="300";break;case "z111":b="5";break;case "z112":b="0.067";break;case "z146":b="1";break;case "z164":b="1";break;case "z92":b="1";break;case "z93":b="1";break;case "DEFAULT_DOUBLECLICKZOOM":b="1";break;case "DEFAULT_DOUBLECLICKDELAY":b="250";break;case "z95":b=
"1";break;case "z95STRICT":b="0";break;case "DEFAULT_SMOOTHPAN":b="1";break;case "DEFAULT_SMOOTHPANEASING":b="2";break;case "DEFAULT_SMOOTHPANGLIDE":b="2";break;case "z143":b=null;break;case "z144":b=null;break;case "z145":b=null;break;case "z163":b=null;break;case "z153":b="1";break;case "z83":b="#FBFAFA";break;case "z83NOALPHA":b="#FBFAFA";break;case "z83LIGHT":b="#FEFEFE";break;case "z82":b="0.75";break;case "z86":b="0.75";break;case "z87":b="#C0C0C0";break;case "z200":b="skinFiles.xml";break;
case "z201":b="Assets/Skins/Default";break;case "z199":b="0";break;case "z171":b="2";break;case "z172":b="150";break;case "z167":b="100";break;case "z168":b="-1";break;case "z170":b="-1";break;case "z166":b=null;break;case "z169":b="#0000FF";break;case "z223":b="4";break;case "z222":b="1";break;case "z224":b="1";break;case "z128":b="1";break;case "z150":b="1";break;case "z149":b=null;break;case "z162":b="1";break;case "z206":b="1";break;case "z205":b="10";break;case "z174":b="1";break;case "DEFAULT_RESETVISIBLE":b=
"1";break;case "z121":b="1";break;case "z119":b="1";break;case "z120":b="white";break;case "z118":b="0";break;case "z141":b="0";break;case "DEFAULT_FULLVIEWEXITEXTERNALBUTTONCOLOR":b="\t#F8F8F8";break;case "z190":b="0";break;case "DEFAULT_INITIALR":b="0";break;case "z184":b="1";break;case "z182":b="500";break;case "z183":b=" ";break;case "z183COLOR":b="#000000";break;case "z127":b="lightgray";break;case "z126":b="white";break;case "z159":b="lightgray";break;case "z158":b="white";break;case "z12":b=
"Rotation requires a newer browser version. Please consider upgrading to the current release of your browser.";break;case "z16":b="Viewing Zoomify Images stored in the ZIF format requires a newer browser version. Please consider upgrading to the current release of your browser.";break;case "z8":b="\nClick the '?' button for help.";break;case "ERROR_ERROR":b="error";break;case "z268":b="3000";break;case "z268MEDIUM":b="1500";break;case "z268SHORT":b="750";break;case "z287":b="Parameter unrecognized or deprecated - see the Parameters List documentation: ";
break;case "z275":b="Parameter deprecated - please replace: ";break;case "z288":b="Recent versions of most browsers allow dynamic content loading (such as viewing of Zoomify Images) only from a web server.  Please change your browser settings (see READ ME FIRST file for details) or use FireFox or an earlier version of your browser for local viewing.";break;case "z290":b="Browsers allow ZIF file viewing only from a web server.  Please use Zoomify Image folders for local viewing.";break;case "z289":b=
"Browsers allow PFF file viewing only from a web server.  Please use Zoomify Image folders for local viewing.";break;case "z249":b="Image failed to load: possible invalid path, missing image, or network error.";break;case "z280":b="Sorry!  Part of this view is not refreshing.  The network may be slow, or the website may be missing a file:  ";break;case "ERROR_VALIDATEVIEW":b="Sorry!  Part of this view is not refreshing. The network\nmay be slow, or the website may be missing a file.  ";break;case "z280-ZIF":b=
"Sorry!  Part of this view is not refreshing.  The network may be slow, or the ZIF file may be faulty:  ";break;case "z256-ZIFBYTERANGE":b="Error loading image: ZIF file data request failed. Request content type: ";break;case "z256-ZIFBYTES":b="Error loading image: ZIF file invalid.";break;case "z295":b="Browser does not support XMLHttpRequest.";break;case "z256-IMAGEXML":b="Error loading image: please make sure image path in web page matches image folder location on webserver.";break;case "z256-TOOLBARSKINSXML":b=
"Error loading toolbar - skin files not found: please verify that the folders 'Assets/Skins/Default' are in same folder as the web page displaying the Viewer, or add zSkinPath parameter to web page. The zSkinPath parameter may be required if using a content management system such as Drupal, Joomla, or WordPress.";break;case "z256-SLIDESXML":b="Error loading slides: please make sure slide path in web page matches slides folder location on webserver.";break;case "z256":b="Error making network request:\npossible invalid path or network error.";
break;case "z272":b="Error related to network security: ";break;case "z273":b="Error related to network status: ";break;case "z273RANGEREQUESTS":b="Network error. If using ZIF storage, setting MIME type on web server may be necessary. See READ ME FIRST file in ZIF Storage folder or contact Support: ";break;case "z244":b=" converting XML text to XML doc (DOMParser): ";break;case "z243":b=" converting XML doc to XML text (DOMParser): ";break;case "z294":b="Browser does not support XML DOM.";break;case "z293":b=
"XML Doc invalid.";break;case "z296":b="XML invalid.";break;case "z255":b="Image XML invalid.";break;case "z252":b="Image properties XML invalid.";break;case "z250":b="Image properties invalid.";break;case "z251":b="Image properties parameter invalid.";break;case "z254":b="Image tile count does not match value in image XML. If the count is invalid display problems can result.";break;case "z245":b=" while executing callback: ";break;case "z253":b="\nImage tile request not fulfilled within time period expected";
break;case "z271":b="Navigator image failed to load: possible invalid path, missing image, or network error.";break;case "z278":b="Skin XML invalid.";break;case "z279":b="The skin XML file has one or more faulty name lines.";break;case "z283":b="Unknown element style - no known method to identify.";break;case "z284":b="Unknown mouse position - no known method to calculate.";break;case "z285":b="Unknown mouse scroll - no known method to calculate.";break;case "z286":b="Unknown window size - no known method to calculate.";
break;case "z360":b="Launch Zoomify Website";break;case "z363":b="Minimize Toolbar";break;case "z341":b="Expand Toolbar";break;case "z400":b="Zoom Out";break;case "z385":b="Zoom In And Out";break;case "z399":b="Zoom In";break;case "z370":b="Pan Left";break;case "z372":b="Pan Up";break;case "z369":b="Pan Down";break;case "z371":b="Pan Right";break;case "z378":b="Reset Initial View\nAlt-Click: Prior View";break;case "z391":b="Enter Full View";break;case "z391EXIT":b="Exit Full View";break;case "z391EXITEXTERNAL":b=
"Exit Full View";break;case "z342":b="Show Help";break;case "z342OK":b="Close Help Display";break;case "z362":b="Accept And Close Message";break;case "z361":b="Decline And Close Message";break;case "z427DISPLAY":b="www.zoomify.com";break;case "z427":b="http://www.zoomify.com";break;case "z427TARGET":b="_blank";break;case "z439":b="Navigator Bird's Eye View";break;case "z420":b="X";break;case "z422":b="430";break;case "z421":b="300";break;case "z423":b="OK";break;case "z437":b="430";break;case "z436":b=
"84";break;case "z435":b="Cancel";break;case "z438":b="OK";break;case "z32":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Viewer Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>To explore this image, simply click the image to zoom, double-click to zoom out, or click-drag to pan.<br><br>The Navigator thumbnail overview can also be clicked or click-dragged to pan.<br><br>Use the Toolbar for exact navigation - if using a mouse, hold it over any button to see a helpful tip.</font></p>";
break;default:b="Unexpected resource request"}return b},clearDisplay:function(a){if(a)if(Z.useCanvas&&"CANVAS"==a.tagName)Z.Utils.clearCanvas(a);else for(;a.hasChildNodes();)a.removeChild(a.lastChild)},clearCanvas:function(a){a=a.getContext("2d");a.save();a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,a.canvas.width,a.canvas.height);a.restore()},deleteDiv:function(a){for(a=document.getElementById(a);a.hasChildNodes();)a.removeChild(a.lastChild);a.parentNode.removeChild(a)},createCallback:function(a,
b){for(var c=[],d=2,e=arguments.length;d<e;d++)c[c.length]=arguments[d];return function(){for(var d=c.concat([]),e=0,m=arguments.length;e<m;e++)d[d.length]=arguments[e];return b.apply(a,d)}},validateCallback:function(a){for(var b=0,c=Z.callbacks.length;b<c;b++){var d=Z.callbacks[b];if(d.callbackEvent==a&&"object"===typeof d&&"function"===typeof d.callbackFunction)switch(a){case "viewZoomingGetCurrentZoom":var e=Z.Viewport.getZoom();Z.Utils.functionCallWithDelay(function(){d.callbackFunction(e)},10);
break;case "viewUpdateCompleteGetLabelIDs":var h=Z.Viewport.getLabelIDsInCurrentView(!1);Z.Utils.functionCallWithDelay(function(){d.callbackFunction(h)},10);break;case "viewUpdateCompleteGetLabelInternalIDs":var f=Z.Viewport.getLabelIDsInCurrentView(!0);Z.Utils.functionCallWithDelay(function(){d.callbackFunction(f)},10);break;case "labelSavedGetJSONObject":var m=Z.Viewport.getCurrentLabel();if(m){var l=m.internalID,s=Z.Viewport.getLabelJSONObject(l,!0);Z.Utils.functionCallWithDelay(function(){d.callbackFunction(s)},
10)}break;case "labelCreatedGetInternalID":Z.Viewport&&!Z.Viewport.getParsingXML()&&(m=Z.Viewport.getCurrentLabel())&&(l=m.internalID,Z.Utils.functionCallWithDelay(function(){d.callbackFunction(l)},10));break;case "labelSelectedInViewportGetIDs":Z.Viewport&&(m=Z.Viewport.getCurrentLabel())&&Z.Utils.functionCallWithDelay(function(){d.callbackFunction(m.id,m.internalID)},10);break;case "currentLabelChangedGetID":Z.Viewport&&(m=Z.Viewport.getCurrentLabel())&&Z.Utils.functionCallWithDelay(function(){d.callbackFunction(m.id,
m.internalID)},10);break;default:Z.Utils.functionCallWithDelay(d.callbackFunction,10)}}},createContainerElement:function(a,b,c,d,e,h,f,m,l,s,w,x,y,G,R,ha,Q){var A=document.createElement(a);this.stringValidate(b)&&(A.id=b);b=A.style;b.display=this.stringValidate(c)?c:"inline-block";b.position=this.stringValidate(d)?d:"static";b.overflow=this.stringValidate(e)?e:"hidden";"canvas"==a?(this.stringValidate(h)&&A.setAttribute("width",h),this.stringValidate(f)&&A.setAttribute("height",f)):(this.stringValidate(h)&&
(b.width=h),this.stringValidate(f)&&(b.height=f));this.stringValidate(m)&&(b.left=m);this.stringValidate(l)&&(b.top=l);b.borderStyle=this.stringValidate(s)?s:"none";b.borderWidth=this.stringValidate(w)?w:"0px";b.borderColor="#696969";b.background=this.stringValidate(x)?x:"transparent none";b.margin=this.stringValidate(y)?y:"0px";b.padding=this.stringValidate(G)?G:"0px";b.whiteSpace=this.stringValidate(R)?R:"normal";this.stringValidate(ha)&&(b.cursor=ha);"undefined"!==Q&&Q&&(Z.Utils.addEventListener(A,
"touchstart",Z.Utils.preventDefault),Z.Utils.addEventListener(A,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(A,"contextmenu",Z.Utils.preventDefault));return A},createCenteredElement:function(a,b){var c=this.createContainerElement("div"),d=[];d[d.length]='<div style="#position:relative; display:table; height:100%; width:100%; border:none; margin:0px; padding:0px; overflow:hidden; text-align:left;">';d[d.length]='<div style="#position:absolute; display:table-cell; #top:50%; width:100%; border:none; margin:0px; padding:0px; vertical-align:middle;">';
d[d.length]='<div id="'+b+'"; style="#position:relative; width:100%; #top:-50%; border:none; margin:0px; padding:0px; text-align:center;"></div></div></div>';c.innerHTML=d.join("");for(var d=c=c.firstChild,e=c.getElementsByTagName("div");0<e.length;)d=e[0],e=d.getElementsByTagName("div");d.appendChild(a);return c},createTextElement:function(a,b,c,d,e,h,f,m,l,s,w,x,y,G,R,ha,Q,A){c=Z.Utils.createContainerElement("div","textBoxFor-"+a,"inline-block","absolute","hidden",c,d,e,h,m,l,"white","0px",f,"normal");
d=document.createElement("textarea");c.appendChild(d);e=d.style;d.id=a;d.value=b;d.readOnly=s;e.width="100%";e.height="100%";e.margin="0";e.border="0";this.stringValidate(w)&&(e.fontFamily=w);this.stringValidate(x)&&(e.fontSize=x);this.stringValidate(y)&&(e.resize=y);this.stringValidate(G)&&(d.columns=G);this.stringValidate(R)&&(d.rows=R);this.stringValidate(ha)&&(e.overflowX=ha);this.stringValidate(Q)&&(e.overflowY=Q);this.stringValidate(A)&&(d.wrap=A,"off"==A&&(e.whiteSpace="nowrap"));return c},
createSelectElement:function(a,b,c,d,e,h,f,m,l,s){var w=document.createElement("select");w.id=a;Z.Utils.stringValidate(b)&&"none"!=b&&(w.options[0]=new Option(b,null));a=0;for(b=c.length;a<b;a++)w.options[w.options.length]=new Option(c[a].text,c[a].value);Z.Utils.addEventListener(w,"undefined"!==typeof s&&null!==s?s:"change",l);c=w.style;c.width=d+"px";c.position="absolute";c.left=e+"px";c.top=h+"px";c.fontSize=null==f?"11px":f+"px";c.fontFamily="verdana";c.visibility=m;return w},updateSelectElement:function(a,
b,c){if(a){var d=-1!=a.selectedIndex?a.selectedIndex:0;a.innerHTML="";for(var e=0,h=b.length;e<h;e++)a.options[a.options.length]=new Option(b[e].text,b[e].value.toString());"undefined"!==typeof c&&null!==c&&(b=parseInt(Z.Utils.arrayIndexOfObjectValue(b,"value",c),10),-1!=b&&(d=b));b=a.options.length-1;a.selectedIndex=d<=b?d:b}},getChildElementByID:function(a,b){for(var c=null,d=0,e=a.childNodes.length;d<e&&(c=a.childNodes[d],c.id!=b)&&(c=Z.Utils.getChildElementByID(c,b),null===c);d++);return c},getElementPosition:function(a){for(var b=
0,c=0,d="fixed"==this.getElementStyle(a).position,e=this.getOffsetParent(a,d);e;)b+=a.offsetLeft,c+=a.offsetTop,d&&(a=this.getPageScroll(),b+=a.x,c+=a.y),a=e,d="fixed"==this.getElementStyle(a).position,e=this.getOffsetParent(a,d);return new this.Point(b,c)},getOffsetParent:function(a,b){return b&&a!=document.body?document.body:a.offsetParent},getElementSize:function(a){return new this.Point(a.clientWidth,a.clientHeight)},getElementStyle:function(a){if(a.currentStyle)return a.currentStyle;if(window.getComputedStyle)return window.getComputedStyle(a,
"");this.showMessage(this.getResource("z283"))},getElementStyleProperty:function(a,b){if(window.getComputedStyle)return window.getComputedStyle(a,null).getPropertyValue(b);if(a.currentStyle)return a.currentStyle[b];this.showMessage(this.getResource("z283"))},getEventTargetCoords:function(a){return getElementPosition(Z.Utils.target(a))},getFirstTouch:function(a){var b=null,c=a.touches;a=a.changedTouches;"undefined"!==typeof c?b=c[0]:"undefined"!==typeof a&&(b=a[0]);return b},getMousePosition:function(a){var b=
0,c=0;"DOMMouseScroll"==a.type&&Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion?(b=a.screenX,c=a.screenY):"number"===typeof a.pageX?(b=a.pageX,c=a.pageY):"number"===typeof a.clientX?(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,c=a.clientY+document.body.scrollTop+document.documentElement.scrollTop):this.showMessage(this.getResource("z284"));return new this.Point(b,c)},getMouseScroll:function(a){var b=0;"number"===typeof a.wheelDelta?b=a.wheelDelta:"number"===typeof a.detail?
b=-1*a.detail:this.showMessage(this.getResource("z285"));return b?b/Math.abs(b):0},getPageScroll:function(){var a=0,b=0,c=document.documentElement||{},d=document.body||{};if("number"===typeof window.pageXOffset)a=window.pageXOffset,b=window.pageYOffset;else if(d.scrollLeft||d.scrollTop)a=d.scrollLeft,b=d.scrollTop;else if(c.scrollLeft||c.scrollTop)a=c.scrollLeft,b=c.scrollTop;return new this.Point(a,b)},getScreenSize:function(){return new this.Point(screen.width,screen.height)},getWindowSize:function(){var a=
0,b=0,c=document.documentElement||{},d=document.body||{};"number"===typeof window.innerWidth?(a=window.innerWidth,b=window.innerHeight):c.clientWidth||c.clientHeight?(a=c.clientWidth,b=c.clientHeight):d.clientWidth||d.clientHeight?(a=d.clientWidth,b=d.clientHeight):this.showMessage(this.getResource("z286"));return new this.Point(a,b)},Button:function(a,b,c,d,e,h,f,m,l,s,w,x,y,G,R,ha,Q,A,X,ga){a=Z.Utils.createContainerElement("span",a,"inline-block","absolute","hidden",f,m,l,s,G,R,ha,Q,A,X,ga);if(Z.Utils.stringValidate(b)){var r=
document.createTextNode(b);a.appendChild(Z.Utils.createCenteredElement(r));Z.Utils.setTextNodeStyle(r,"black","verdana","13px","none","normal","normal","normal","normal","1em","center","none")}else{c=Z.Utils.stringRemoveTrailingSlashCharacters(c);var H=Z.Utils.createGraphicElement(c+"/"+d),ca=Z.Utils.createGraphicElement(c+"/"+e),M=Z.Utils.createGraphicElement(c+"/"+h);H.style.width=ca.style.width=M.style.width=f;H.style.height=ca.style.height=M.style.height=m;H.style.position=ca.style.position=M.style.position=
"absolute";Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion&&(H.style.top=ca.style.top=M.style.top="");ca.style.visibility=M.style.visibility="hidden";H.alt=ca.alt=M.alt="";"undefined"!==typeof y&&Z.Utils.stringValidate(y)&&(H.alt=Z.Utils.getResource(y));a.appendChild(H);a.appendChild(ca);a.appendChild(M)}Z.Utils.addEventListener(a,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"mouseover",Z.Utils.stopPropagation);Z.Utils.addEventListener(a,"mousedown",Z.Utils.stopPropagation);Z.Utils.addEventListener(a,
"mouseup",Z.Utils.stopPropagation);Z.Utils.addEventListener(a,"mouseout",Z.Utils.stopPropagation);"undefined"!==typeof imageUp&&(Z.Utils.addEventListener(H,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(ca,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(M,"contextmenu",Z.Utils.preventDefault));Z.Utils.addEventListener(a,"touchstart",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"touchend",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"touchcancel",Z.Utils.preventDefault);
Z.Utils.stringValidate(b)||(Z.Utils.disableTextInteraction(r),Z.Utils.addEventListener(a,"contextmenu",Z.Utils.preventDefault));Z.tooltipsVisible&&Z.Utils.stringValidate(y)&&(a.title=Z.Utils.getResource(y));Z.Utils.setButtonHandler(a,w,x);this.elmt=a},buttonSize:function(a,b,c){var d=a.style;d.width=b+"px";d.height=c+"px";c=a.firstChild;d=a.childNodes[1];a=a.childNodes[2];c&&d&&a&&(c.style.width=d.style.width=a.style.width=b+"px",c.style.height=d.style.height=a.style.height=b+"px")},setButtonDefaults:function(a){Z.Utils.clearButtonSettings(a);
Z.Utils.setButtonState(a,"up");Z.Utils.setButtonHandler(a,"mouseover",Z.Toolbar.z457)},clearButtonSettings:function(a){var b=a.firstChild,c=a.childNodes[1],d=a.childNodes[2];b&&c&&d&&(b.style.visibility=c.style.visibility=d.style.visibility="hidden",Z.Utils.removeEventListener(b,"mouseover",Z.Toolbar.z457),Z.Utils.removeEventListener(c,"mousedown",Z.Toolbar.z457),Z.Utils.removeEventListener(c,"mouseout",Z.Toolbar.z457),Z.Utils.removeEventListener(d,"mouseup",Z.Toolbar.z457),Z.Utils.removeEventListener(a,
"touchstart",Z.Toolbar.z457),Z.Utils.removeEventListener(a,"touchend",Z.Toolbar.z457),Z.Utils.removeEventListener(a,"touchcancel",Z.Toolbar.z457));Z.Utils.removeEventListener(a,"mouseover",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mousedown",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mouseout",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mouseup",Z.Toolbar.z457)},setButtonState:function(a,b){var c="up"==b?a.firstChild:"down"==b?a.childNodes[1]:a.childNodes[2];c&&(c.style.visibility="visible")},
setButtonHandler:function(a,b,c){c="undefined"!==c?c:Z.Toolbar.z457;var d="undefined"!==b?b:"mouseover";if("mouseover"==b&&"undefined"!==typeof a.firstChild)a=a.firstChild;else if("mousedown"!=b||"undefined"===typeof a.childNodes[1])"mouseup"==b&&"undefined"!==typeof a.childNodes[2]?a=a.childNodes[2]:"mouseout"==b&&"undefined"!==typeof a.childNodes[1]&&(a=a.childNodes[1]);Z.Utils.addEventListener(a,"mousedown"==b?"touchstart":"touchend",c);Z.Utils.addEventListener(a,d,c)},Graphic:function(a,b,c,d,
e,h,f,m){b=Z.Utils.stringRemoveTrailingSlashCharacters(b);b=Z.Utils.createGraphicElement(c?b+"/"+c:b);c=b.style;c.width=d;c.height=e;"undefined"!==typeof m&&Z.Utils.stringValidate(m)?b.alt=Z.Utils.getResource(m):b.alt="";c=Z.Utils.createContainerElement("span",a,"inline-block","absolute","hidden",d,e,h,f,"none","0px","transparent none","0px","0px","normal");c.appendChild(b);this.elmt=c;Z.Utils.addEventListener(b,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(b,"touchstart",Z.Utils.preventDefault);
Z.Utils.addEventListener(b,"contextmenu",Z.Utils.preventDefault)},createGraphicElement:function(a){var b=this.createContainerElement("img"),c=null;Z.browser==Z.browsers.IE&&7>Z.browserVersion?(c=this.createContainerElement("span",null,"inline-block"),b.onload=function(){c.style.width=c.style.width||b.width+"px";c.style.height=c.style.height||b.height+"px";b=b.onload=null},c.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a+'", sizingMethod="scale")'):(c=b,c.src=a);return c},
graphicSize:function(a,b,c){var d=a.style;d.width=b+"px";d.height=c+"px";a=a.firstChild.style;a.width=b+"px";a.height=c+"px"},Point:function(a,b){this.x="number"===typeof a?a:0;this.y="number"===typeof b?b:0},Point3D:function(a,b,c){this.x="number"===typeof a?a:0;this.y="number"===typeof b?b:0;this.z="number"===typeof c?c:0},Range:function(a,b){this.start="number"===typeof a?a:0;this.end="number"===typeof b?b:0},stringValidate:function(a){return"undefined"!==typeof a&&null!==a&&""!==a&&"null"!==a},
stringReadable:function(a){return a.replace(RegExp("%20","g")," ")},stringLowerCaseFirstLetter:function(a){return a.charAt(0).toLowerCase()+a.slice(1)},stringUpperCaseFirstLetter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},stringMultiply:function(a,b){var c=Math.ceil(Math.log(b)/Math.LN2),d=a;do d+=d;while(0<--c);return d.slice(0,a.length*b)},stringRemoveTrailingSlashCharacters:function(a){return"/"==a.slice(-1,a.length)?a.slice(0,a.length-1):a},stringRemoveTabAndLineWrapCharacters:function(a){a=
a.replace(/\n/g,"");a=a.replace(/\r/g,"");return a=a.replace(/\t/g,"")},stringUnescapeAmpersandCharacters:function(a){a=a.replace(/\n/g,"");a=a.replace(/&#38;/g,"&");a=a.replace(/&#038;/g,"&");return a=a.replace(/&amp;/g,"&")},setTextAreaStyle:function(a,b,c,d,e,h,f,m,l,s,w,x,y){a=a.firstChild.style;a.color=b;a.fontFamily=c;a.fontSize=d;a.fontSizeAdjust=e;a.fontStyle=h;a.fontStretch=f;a.fontVariant=m;a.fontWeight=l;a.lineHeight=s;a.textAlign=w;a.textDecoration=x;a.padding=y},setTextNodeStyle:function(a,
b,c,d,e,h,f,m,l,s,w,x){a=a.parentNode.style;a.color=b;a.fontFamily=c;a.fontSize=d;a.fontSizeAdjust=e;a.fontStyle=h;a.fontStretch=f;a.fontVariant=m;a.fontWeight=l;a.lineHeight=s;a.textAlign=w;a.textDecoration=x},stringValidateColorValue:function(a){Z.Utils.stringValidate(a)||(a="#000000");0!=a.indexOf("#")&&(a="#"+a);return a},xmlConvertTextToDoc:function(a){var b=null;if(window.ActiveXObject)try{b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a)}catch(c){this.showMessage(c.name+this.getResource("z244")+
c.message)}else if(window.DOMParser)try{b=(new DOMParser).parseFromString(a,"text/xml")}catch(d){this.showMessage(d.name+this.getResource("z244")+d.message)}else this.showMessage(this.getResource("z294"));return b},xmlConvertDocToText:function(a){var b=null;if(window.ActiveXObject)try{b=a.xml}catch(c){this.showMessage(c.name+this.getResource("z243")+c.message)}else if(window.DOMParser)try{b=(new XMLSerializer).serializeToString(a)}catch(d){this.showMessage(d.name+this.getResource("z243")+d.message)}else this.showMessage(this.getResource("z294"));
return b},jsonConvertObjectToXMLText:function(a){var b=function(a,c){var d="";if(a instanceof Array)for(var m=0,l=a.length;m<l;m++)d+=b(a[m],c)+"\n";else if("object"===typeof a){m=!1;d+="<"+c;for(l in a)"object"!==typeof a[l]?d+=" "+l+'="'+a[l].toString()+'"':m=!0;d+=">";if(m)for(l in a)"#text"==l?d+=a[l]:"object"===typeof a[l]&&(d+=b(a[l],l));d+="</"+c+">"}else d+="<"+c+">"+a.toString()+"</"+c+">";return d},c="",d;for(d in a)c+=b(a[d],d);return c.replace(/\t|\n/g,"")},jsonConvertXMLTextToJSONText:function(a){var b=
{convertToObject:function(a){var d={};if(1==a.nodeType){if(a.attributes.length)for(var e=0,h=a.attributes.length;e<h;e++)d[a.attributes[e].nodeName]=(a.attributes[e].nodeValue||"").toString();if(a.firstChild){for(var e=0,h=!1,f=a.firstChild;f;f=f.nextSibling)1==f.nodeType?h=!0:3==f.nodeType&&f.nodeValue.match(/[^ \f\n\r\t\v]/)&&e++;if(h)if(2>e)for(b.reduceWhitespace(a),f=a.firstChild;f;f=f.nextSibling)3==f.nodeType?d["#text"]=b.escapeMinimal(f.nodeValue):d[f.nodeName]?d[f.nodeName]instanceof Array?
d[f.nodeName][d[f.nodeName].length]=b.convertToObject(f):d[f.nodeName]=[d[f.nodeName],b.convertToObject(f)]:d[f.nodeName]=b.convertToObject(f);else a.attributes.length?d["#text"]=b.escapeMinimal(b.innerXML(a)):d=b.escapeMinimal(b.innerXML(a));else e&&(a.attributes.length?d["#text"]=b.escapeMinimal(b.innerXML(a)):d=b.escapeMinimal(b.innerXML(a)))}a.attributes.length||a.firstChild||(d=null)}else 9==a.nodeType?d=b.convertToObject(a.documentElement):alert("This node type not supported : "+a.nodeType);
return d},convertToJSONText:function(a,d){var e=d?'"'+d+'"':"";if(a instanceof Array){for(var h=0,f=a.length;h<f;h++)a[h]=b.convertToJSONText(a[h],"","\t");e+=(d?":[":"[")+(1<a.length?"\n\t"+a.join(",\n\t")+"\n":a.join(""))+"]"}else if(null==a)e+=(d&&":")+"null";else if("object"===typeof a){h=[];for(f in a)h[h.length]=b.convertToJSONText(a[f],f,"\t");e+=(d?":{":"{")+(1<h.length?"\n\t"+h.join(",\n\t")+"\n":h.join(""))+"}"}else e="string"==typeof a?e+((d&&":")+'"'+a.toString()+'"'):e+((d&&":")+a.toString());
return e},reduceWhitespace:function(a){a.normalize();for(var d=a.firstChild;d;)if(3==d.nodeType)if(d.nodeValue.match(/[^ \f\n\r\t\v]/))d=d.nextSibling;else{var e=d.nextSibling;a.removeChild(d);d=e}else 1==d.nodeType&&b.reduceWhitespace(d),d=d.nextSibling;return a},escapeMinimal:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},innerXML:function(a){var b="";if("innerHTML"in a)b=a.innerHTML;else{var e=function(a){var b="";if(1==a.nodeType){for(var b=
b+("<"+a.nodeName),c=0,d=a.attributes.length;c<d;c++)b+=" "+a.attributes[c].nodeName+"='"+(a.attributes[c].nodeValue||"").toString()+"'";if(a.firstChild){b+=">";for(c=a.firstChild;c;c=c.nextSibling)b+=e(c);b+="</"+a.nodeName+">"}else b+="/>"}else 3==a.nodeType&&(b+=a.nodeValue);return b};for(a=a.firstChild;a;a=a.nextSibling)b+=e(a)}return b}};9==a.nodeType&&(xml=xml.documentElement);return jsonTextOut="{\n  "+b.convertToJSONText(b.convertToObject(b.reduceWhitespace(a)),a.nodeName,"\t").replace(/\t/g,
"  ")+"\n}"},arrayClear:function(a){if(a)for(;0<a.length;)a.pop()},arrayIndexOf:function(a,b,c){c?0>c&&(c=Math.max(0,a.length+c)):c=0;for(var d=a.length;c<d;c++)if(a[c]===b)return c;return-1},arrayIndexOfObjectValue:function(a,b,c,d){if("undefined"!==typeof a){d?0>d&&(d=Math.max(0,a.length+d)):d=0;for(var e=a.length;d<e;d++)if(a[d][b]===c)return d}return-1},arrayIndexOfObjectTwoValues:function(a,b,c,d,e,h){if("undefined"!==typeof a){d?0>d&&(d=Math.max(0,a.length+d)):d=0;for(var f=a.length;d<f;d++)if(a[d][b]===
c&&a[d][e].toString()===h.toString())return d}return-1},arrayIndexOfSubstring:function(a,b,c){c?0>c&&(c=Math.max(0,a.length+c)):c=0;for(var d=a.length;c<d;c++)if(-1!=a[c].indexOf(b))return c;return-1},arrayIndexOfObjectValueSubstring:function(a,b,c,d,e){d?0>d&&(d=Math.max(0,a.length+d)):d=0;for(var h=a.length;d<h;d++)if(e){if(-1!=a[d][b].toLowerCase().indexOf(c))return d}else if(-1!=a[d][b].indexOf(c))return d;return-1},arrayIntersect:function(a,b){for(var c,d,e,h=[],f=0,m=a.length;f<m;f++){c=a[f];
e=!1;for(var l=0,s=b.length;l<s&&c>=(d=b[l]);l++)if(d==c){e=!0;break}e&&(h[h.length]=a[f])}return h},arrayMap:function(a,b){var c=[];if(Z.arrayMapSupported)c=a.map(b);else for(var d=0,e=a.length;d<e;d++)c[d]=b(a[d]);return c},arraySplice:function(a,b,c){if(Z.arraySpliceSupported)if(3<arguments.length)for(var d=3,e=arguments.length;d<e;d++)a.splice(b,c,arguments[d]);else a.splice(b,c);else{0>c&&(c=0);var h=[];if(3<arguments.length)for(d=3,e=arguments.length;d<e;d++)h[h.length]=arguments[d];for(var d=
Z.Utils.arraySubarray(a,0,b),f=Z.Utils.arraySubarrayLen(a,b,c),e=Z.Utils.arraySubarray(a,b+c),h=d.concat(h,e),d=a.length=0,e=h.length;d<e;d++)a[a.length]=h[d];a=f}return a},arraySubarraySimple:function(a,b){return this.slice(a,b)},arraySortNumericAscending:function(a,b,c){a.sort(function(a,b){return a-b});return a},arraySortNumericDescending:function(a,b,c){a.sort(function(a,b){return b-a});return a},arraySortByObjectValue:function(a,b,c,d){a.sort(function(a,c){return a[b]>c[b]});return a},arraySubarray:function(a,
b,c){0>b&&(b=0);if(!c||c>a.length)c=a.length;if(b==c)return[];for(var d=[];b<c;b++)d[d.length]=a[b];return d},arraySubarrayLen:function(a,b,c){if(b>=a.length||c&&0>=c)return[];0>b&&(b=Math.abs(b)>a.length?0:a.length+b);if(!c||c+b>a.length)c=a.length-b;for(var d=[],e=b;e<b+c;e++)d[d.length]=a[e];return d},arraySubtract:function(a,b){for(var c=a.slice(0),d=0,e=c.length;d<e;d++){for(var h=c[d],f=!1,m=0,l=b.length;m<l&&h>=(elmt2=b[m]);m++)if(elmt2==h){f=!0;break}f&&(c=Z.Utils.arraySplice(c,d--,1))}return c},
arrayToArrayOfStrings:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]="undefined"!==typeof a[c]&&"undefined"!=a[c]&&null!==a[c]?a[c].toString():"";return b},arrayUnique:function(a){for(var b=1;b<a.length;)a[b-1]==a[b]?a=Z.Utils.arraySplice(a,b,1):b++;return a},arrayUniqueByObjectValue:function(a,b){if("undefined"!==typeof a)for(var c=1;c<a.length;)a[c-1][b]==a[c][b]?a=Z.Utils.arraySplice(a,c,1):c++;return a},calculatePointsDistance:function(a,b,c,d){return Math.sqrt((a-=c)*a+(b-=d)*b)},fullScreenView:function(a,
b,c){if("undefined"===typeof c||null===c)c=!1;b?(b=document.documentElement,b.requestFullScreen?(a.requestFullScreen(),Z.Utils.addEventListener(document,"fullscreenchange",Z.Viewport.fullScreenEscapeHandler)):b.mozRequestFullScreen?(a.mozRequestFullScreen(),Z.Utils.addEventListener(document,"mozfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):b.webkitRequestFullScreen?(a.webkitRequestFullScreen(),Z.Utils.addEventListener(document,"webkitfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):
b.msRequestFullscreen&&(a.msRequestFullscreen(),Z.Utils.addEventListener(document,"MSFullscreenChange",Z.Viewport.fullScreenEscapeHandler))):document.cancelFullScreen?(c||document.cancelFullScreen(),Z.Utils.removeEventListener(document,"fullscreenchange",Z.Viewport.fullScreenEscapeHandler)):document.msExitFullscreen?(c||document.msExitFullscreen(),Z.Utils.removeEventListener(document,"MSFullscreenChange",Z.Viewport.fullScreenEscapeHandler)):document.mozCancelFullScreen?(c||document.mozCancelFullScreen(),
Z.Utils.removeEventListener(document,"mozfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):document.webkitCancelFullScreen&&(c||document.webkitCancelFullScreen(),Z.Utils.removeEventListener(document,"webkitfullscreenchange",Z.Viewport.fullScreenEscapeHandler))},rotatePoint:function(a,b,c){var d=Math.PI/180*-c;c=a*Math.cos(d)-b*Math.sin(d);a=a*Math.sin(d)+b*Math.cos(d);return new Z.Utils.Point(c,a)},rotateElement:function(a,b,c){if(b!=Z.imageR||c)b="rotate("+b.toString()+"deg)",a.transform=b,
a.msTransform=b,a.mozTransform=b,a.webkitTransform=b,a.oTransform=b},getDisplayPositionRotated:function(a,b){if("undefined"===typeof b||null===b)b=Z.imageR;0>b&&(b+=360);var c=parseFloat(a.width)/2,d=parseFloat(a.height)/2,e=Z.Utils.rotatePoint,h=new Z.Utils.Point(0,0);0!=b&&(90==b?h=e(-c,d,-b):180==b?h=e(c,d,-b):270==b&&(h=e(c,-d,-b)),h.x+=c,h.y+=d);return new Z.Utils.Point(h.x,h.y)},translateElement:function(a,b,c){b="translate("+b.toString()+"px,"+c.toString()+"px)";a.transform=b;a.msTransform=
b;a.mozTransform=b;a.webkitTransform=b;a.oTransform=b},intValue:function(a,b){return(a[b]+(a[b+1]<<8)|a[b+2]<<16)+16777216*a[b+3]},longValue:function(a,b){var c=(a[b]+(a[b+1]<<8)|a[b+2]<<16)+16777216*a[b+3];0!=a[b+4]&&(c+=4294967296*a[b+4]);return c},shortValue:function(a,b){return a[b]+(a[b+1]<<8)},createUint8Array:function(a,b){return Z.uInt8ArraySupported?new Uint8Array(a,b):new Z.Utils.TypedArray(a,b)},TypedArray:function(a){var b;if("number"===typeof a){b=Array(a);for(var c=0;c<a;++c)b[c]=0}else b=
a.slice(0);b.subarray=Z.Utils.arraySubarraySimple;b.buffer=b;b.byteLength=b.length;b.set=Z.Utils.setSimple;"object"===typeof a&&a.buffer&&(b.buffer=a.buffer);return b},setSimple:function(a,b){2>arguments.length&&(b=0);for(var c=0,d=a.length;c<d;++c,++b)this[b]=a[c]&255},encodeBase64:function(a){var b,c,d,e,h=0,f=0,m="",m=[];if(!a)return a;do b=a[h++],c=a[h++],d=a[h++],e=b<<16|c<<8|d,b=e>>18&63,c=e>>12&63,d=e>>6&63,e&=63,m[f++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e);while(h<a.length);m=m.join("");a=a.length%3;return(a?m.slice(0,a-3):m)+"===".slice(a||3)},validateResponseArrayFunctionality:function(){"ZoomifyImageFile"!=Z.tileSource||Z.responseArraySupported||Z.responseArrayPrototyped||(Z.Utils.defineObjectProperty(XMLHttpRequest.prototype,
"response",{get:function(){return(new VBArray(this.responseBody)).toArray()}}),Z.responseArrayPrototyped=!0)},defineObjectProperty:function(a,b,c){Z.definePropertySupported?Object.defineProperty(a,b,c):(delete a[b],"get"in c&&a.__defineGetter__(b,c.get),"set"in c&&a.__defineSetter__(b,c.set),"value"in c&&(a.__defineSetter__(b,function(a){this.__defineGetter__(b,function(){return a});return a}),a[b]=c.value))},createImageElementFromBytes:function(a,b){function c(a){d.onload=null;d.onabort=null;d.onerror=
null;e&&window.clearTimeout(e);window.setTimeout(function(){b(d)},1)}var d=new Image,e=null,h=parseFloat(this.getResource("z139")),f=function(){c(!1)};d.onload=function(){c(!0)};d.onabort=f;d.onerror=f;e=window.setTimeout(function(){console.log(Z.Utils.getResource("z253"));c(!1)},h);d.src=a},getCurrentUTCDateAsString:function(){var a=new Date,b=(10>a.getUTCMonth()+1?"0":"")+(a.getUTCMonth()+1),c=(10>a.getUTCDate()?"0":"")+a.getUTCDate(),d=(10>a.getUTCHours()?"0":"")+a.getUTCHours(),e=(10>a.getUTCMinutes()?
"0":"")+a.getUTCMinutes(),h=(10>a.getUTCSeconds()?"0":"")+a.getUTCSeconds();return a.getUTCFullYear()+b+c+d+e+h},cacheProofPath:function(a){a+="?t"+(new Date).getTime().toString()+"n"+Z.cacheProofCounter.toString();Z.cacheProofCounter+=1;return a},easing:function(a,b,c,d){b-=a;return 1>(c/=d/2)?b/2*c*c*c*c*c+a:b/2*((c-=2)*c*c*c*c+2)+a},functionCallWithDelay:function(a,b){window.setTimeout(a,b)},nodeIsInViewer:function(a){for(var b=!1;0==b;)if(a)a.id?"ViewerDisplay"==a.id?b=!0:a=a.parentNode:a=a.parentNode;
else break;return b},roundToFixed:function(a,b){var c=Math.round(a).toString().length,c=b-c,c=Math.pow(10,0>c?0:c);return a=Math.round(a*c)/c},getRandomInt:function(a,b){return Math.floor(Math.random()*(b-a+1))+a},getSign:function(a){return a?0>a?-1:1:0},configureHelpDisplay:function(){var a=80,b=80,c=parseInt(this.getResource("z422"),10),d=parseInt(this.getResource("z421"),10);c>=Z.viewerW&&(c=Z.viewerW-a,a-=40);d>=Z.viewerH&&(d=Z.viewerH-b,b-=40);var a=Z.viewerW-c-a,e=Z.viewerH-d-b,h=this.getResource("z127"),
b=this.getResource("z126");Z.HelpDisplay=this.createContainerElement("div","HelpDisplay","inline-block","absolute","hidden",c+"px",d+"px",a+"px",e+"px","solid","1px",h,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.HelpDisplay);a=Z.Utils.createContainerElement("div","helpTextBox","inline-block","absolute",null,c-50+"px",d-74+"px","4px","4px","solid","1px","white","0px","20px",null);a.style.overflowY="auto";Z.HelpDisplay.appendChild(a);Z.help=document.getElementById("helpTextBox");a=parseInt(Z.Utils.getResource("z230"),
10);Z.HelpDisplay.style.zIndex=(a+9).toString();d=d-18-5;c-=66;a=this.getResource("z423");c=new Z.Utils.Button("buttonHelpOk",a,null,null,null,null,"56px","18px",c+"px",d+"px","mousedown",this.helpOkButtonHandler,"z342OK","solid","1px",b,"0px","0px");Z.HelpDisplay.appendChild(c.elmt)},helpOkButtonHandler:function(a){Z.Utils.hideHelp();return!0},showHelp:function(a){Z.HelpDisplay||Z.Utils.configureHelpDisplay();Z.help&&(Z.help.innerHTML=unescape(a),Z.HelpDisplay.style.display="inline-block",document.getElementById("buttonHelpOk").style.display=
"inline-block")},hideHelp:function(){Z.HelpDisplay.style.display="none"},configureMessageDisplay:function(){var a=parseInt(this.getResource("z437"),10),b=parseInt(this.getResource("z436"),10),c=Z.viewerH-b-40,d=this.getResource("z159"),e=this.getResource("z158");Z.MessageDisplay=this.createContainerElement("div","MessageDisplay","inline-block","absolute","hidden",a+"px",b+"px","40px",c+"px","solid","1px",d,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.MessageDisplay);c=parseInt(Z.Utils.getResource("z230"),
10);Z.MessageDisplay.style.zIndex=(c+10).toString();c=Z.Utils.createTextElement("messageBox","",a-18+"px",b-40+"px","4px","4px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.MessageDisplay.appendChild(c);Z.messages=document.getElementById("messageBox");b=b-18-5;a-=66;c=this.getResource("z438");e=new Z.Utils.Button("buttonMessageOk",c,null,null,null,null,"56px","18px",a+"px",b+"px","mousedown",this.messageOkButtonHandler,"z362","solid","1px",e,"0px","0px");Z.MessageDisplay.appendChild(e.elmt)},
messageOkButtonHandler:function(a){Z.Utils.hideMessage();Z.Viewport&&Z.coordinatesVisible&&Z.Viewport.setCoordinatesDisplayVisibility(!1);return!0},messageCancelButtonHandler:function(a){Z.Utils.hideMessage();return!1},showMessage:function(a,b,c,d,e){Z.MessageDisplay||Z.Utils.configureMessageDisplay();Z.MessageDisplay.messageTimer&&window.clearTimeout(MessageDisplay.messageTimer);var h=!0;e&&(-1!=Z.Utils.arrayIndexOf(Z.messageDisplayList,a)?h=!1:Z.messageDisplayList[Z.messageDisplayList.length]=a);
if(h&&(Z.messages&&(Z.messages.value=a),Z.MessageDisplay.style.display="inline-block","undefined"!==typeof d&&null!==d&&(a=document.getElementById("textBoxFor-messageBox"))&&(a.firstChild.style.textAlign=d),d=document.getElementById("buttonMessageOk"),a=parseInt(this.getResource("z436"),10),"undefined"!==typeof b&&null!==b&&b?(d.style.display="inline-block",Z.MessageDisplay.style.height=a+"px"):(d.style.display="none",Z.MessageDisplay.style.height=a-22+"px"),"undefined"!==typeof c&&null!==c&&!isNaN(c))){"undefined"!==
typeof Z.MessageDisplay.messageTimer&&null!==Z.MessageDisplay.messageTimer&&window.clearTimeout(Z.MessageDisplay.messageTimer);if("undefined"===typeof c||null===c)c=3E3;Z.MessageDisplay.messageTimer=window.setTimeout(Z.Utils.hideMessageTimerHandler,c)}},getMessage:function(){var a="";Z.messages&&Z.Utils.stringValidate(Z.messages.value)&&(a=Z.messages.value);return a},hideMessage:function(){Z.MessageDisplay&&(Z.MessageDisplay.style.display="none")},hideMessageTimerHandler:function(){Z.MessageDisplay.messageTimer&&
(window.clearTimeout(Z.MessageDisplay.messageTimer),Z.MessageDisplay.messageTimer=null);Z.Utils.hideMessage()}};
add_onload(compass_init);

// Wrapper to add additional window.onload functions
function add_onload(f)
{
	var original_onload = window.onload;
    if (typeof window.onload != 'function') {
       window.onload = f
    } else {
       window.onload = function() {
           if (original_onload) {
                  original_onload()
          }
          f()
       }
   }
}


// Compas widget
// Expects one compass_canvas canvas:
//    <canvas id="compass_canvas" width="240" height="140"></canvas>
// Expects two variables set in page:
//    spatial_rotation: spatial rotation in degrees
//    compass_src: path to the compass image file

function compass_init()
{
	// Set variables
	angle = 0;
	speed = 5;
	max_speed = 20
	min_speed = 5;
	canvas = document.getElementById('compass_canvas');
	if (!canvas)
		return;
	
	ctx = canvas.getContext('2d');
	if (!ctx) {
		// Canvas not supported
		canvas.style.display = 'none';
		return;
	}

	compass = new Image();
	compass.src = compass_src;
	compass.onload = compass_loaded;
	if (spatial_rotation < 0)
		direction = 'ccw';
	else
		direction = 'cw';
}

function compass_loaded()
{
	compass_interval_id = setInterval(compass_draw, 50);
}

function compass_draw()
{
	ctx.clearRect( 0, 0, canvas.width, canvas.height );
	ctx.save()
	ctx.translate( canvas.width/2 , canvas.height/2 );
	if (angle == spatial_rotation) {
		clearInterval(compass_interval_id);	
	}
	if (direction == 'cw') {
		if (angle + speed > spatial_rotation)
			angle = spatial_rotation;
		else
			angle += speed;
		if (spatial_rotation / 2 > angle) {
			// increase speed
			if (speed < max_speed)
				speed += 1
		}
		else if (spatial_rotation / 2 < angle) {
			// decrease speed
			if (speed > min_speed)
				speed -= 1
		}
	} else {
		if (angle - speed < spatial_rotation)
			angle = spatial_rotation;
		else
			angle -= speed;
		if (spatial_rotation / 2 < angle) {
			// increase speed
			if (speed < max_speed)
				speed += 1
		}
		else if (spatial_rotation / 2 < angle) {
			// decrease speed
			if (speed > min_speed)
				speed -= 1
		}
	}
	// we rotate by -angle as the compas turns, not the image
	ctx.rotate( -angle*Math.PI/180 );
	ctx.drawImage( compass, -compass.width/2, -compass.height/2 );
	ctx.restore();
}

/*
# spacetelescope.org
# Copyright 2009-2010 ESO, ESA/Hubble, IAU
#
# Authors:
#   Lars Holm Nielsen <lnielsen@eso.org>
#   Luis Clara Gomes <lcgomes@eso.org>
#
*/

/* 
 * External link decorator 
 */
(function($) {
    $.fn.extend({
        extlink: function () {
            $("a", this).filter(function (i) {
                return (($(this).attr("target") == '_blank') && $(this).contents('img').size()==0);
            }).each(function () {
                $(this).addClass("extlink")
            });
        }
    });
})(jQuery);


$(document).ready(function () {
    $(this).extlink();
});


/* onFocus/onBlur events for search fields */
function searchbox_focus( box, text ) {
	if( box.value == text ){
		box.value='';
		box.className = box.className + '_ready';
	}
}

function searchbox_blur( box, text ) {
	if( box.value == '' ){
		box.value=text;
		box.className = box.className.split('_ready',1)[0];
	}
}


        
/* feature rotator */

$(".rotator").hover(
          function () {
              $(".fbut").fadeIn();
              
          }, 
          function () {
             $(".fbut").fadeOut();
          }
        )
        
$('.feature-fade').removeClass("init_hide")

$('.rotator .items' ).
            cycle({ 
                fx:    'fade', 
                timeout: 4000,
                speed:  1000,
                pause:  1,
                next:   '.fbut_right', 
                prev:   '.fbut_left',
                pager: '#feat-nav'
            });;

$('.fbut').fadeOut(0);
$('.fbut').removeClass('init_hide');


/* Advanced search form submission. removes unset parameters
 * */
$(document).ready( function(){
    function process_adv_search_parms() {
        var fields = $("#adv_search_data :input").serializeArray();
        var goodfields = []
		jQuery.each(fields, function(i, field){
        	
        	
        	if (field.value != '0' && field.value != null && field.value != '')
        	{
        		goodfields.push(field)
        		
        	}
        });
    	goodfields.push({name:'adv',value:''})
    	//return goodfields
        return $.param(goodfields)
      }

      // $(":checkbox, :radio").click(showValues);
      $("#adv_search_data").submit(function() {
    	  
    	  params = process_adv_search_parms()
    	  window.location = "?" + params
    	  
    	  return false
    });
      
});


/* static files tracking */
$('a[href*="'+MEDIA_URL+'"]').addClass('ga_static_tracking')
$('.ga_static_tracking').click(function() { 
	pageTracker._trackPageview($(this).attr('href'))
})
